% \iffalse meta-comment
%<*internal>
\iffalse
%</internal>
%<*readme>
----------------------------------------------------------------
phd-runningheads 
A package to manage epigraphs in LaTeX documents
E-mail: yannislaz@gmail.com
Released under the LaTeX Project Public License v1.3c or later
See http://www.latex-project.org/lppl.txt
----------------------------------------------------------------
%</readme>
%<*readmemd>
###The `phd` LaTeX2e package

The `phd-epigraphs` latex package is part of the `phd` package
buddle and the class with the same name. The `phd` package provides
convenient methods to create new styles for books, reports
and articles. It also loads the most commonly used packages 
and resolves conflicts. The `phd-fontmanager` provides functions
and key values for managing font usage in documents.

This work consists of the file  `phd-epigraphs.dtx`,
and the derived files   `phd-epigraphs.ins`, `phd-epigraphs.pdf`, 
and `phd-epigraphs.sty`.

This is version 0.10.0

###Installation

run
          phd-lua.bat on windows
          pdflatex phd.dtx
          makeindex -s phd.ist -g phd.idx 

If you have any difficulties with the package come and join us at
http://tex.stackexchange.com and post a new question
or send me a message at  yannislaz at gmail.com. Please note
that at this stage the package is not production stable but close
to completion. It will be released as a bundle with the `phd` package.
The `phd` package loads `phd-fontmanager` automatically.

### Documentation

The package was written using the `doc` and `docscript` packages,
so that it is self documented in a literary programming style. 
The .pdf is a fat document, providing over fifty book styles (the
equivalent of classes) plus there is a lot of write-up on the inner
workings of TeX and LaTeX2e. However, you don't need to know much
to use it.

      \usepackage{phd}
      \input{style13}

All choices, are made via an extended key-value interface. 
Although not a compliment, it resembles CSS and the keys are a bit verbose but
attributes are easy to change and have a consistent and easy to remember interface.

To set or add a key we only use one command:

      \cxset{chapter name font-size = Huge,
             chapter number font-size = HUGE} 

### Future Development

This is still an experimental version, but I will retain the
interface in future releases. There is a large amount of
work still to be carried out to improve the template styles
provided, to test it more thoroughly and to add a number of
improvements in the special designs. At present I estimate
that I have completed about 70% of the work that needs
to be done.

__The package as it stands is not production stable.__ 


%</readmemd>
%<*todo>
Improve on User markup
%</todo>
%<*internal>
\fi
\def\nameofplainTeX{plain}
\ifx\fmtname\nameofplainTeX\else
  \expandafter\begingroup
\fi
%</internal>
%<*install>
\input docstrip.tex
\keepsilent
\askforoverwritefalse
\preamble
----------------------------------------------------------------
phd-epigraphs
A package to manage epigraphs in LaTeX
E-mail: yannislaz@gmail.com
Released under the LaTeX Project Public License v1.3c or later
See http://www.latex-project.org/lppl.txt
----------------------------------------------------------------
\endpreamble
\postamble
 Copyright (C) 2015-2020 by Dr. Yiannis Lazarides <yannislaz@gmail.com>
\endpostamble
%\usedir{tex/latex/\jobname}
\generate{
  \file{\jobname.sty}{\from{\jobname.dtx}{EPI}}
 }
%</install>
%<install>\endbatchfile
%<*internal>
%\usedir{source/latex/\jobname}
\generate{
  \file{\jobname.ins}{\from{\jobname.dtx}{install}}
}
\nopreamble\nopostamble
%\usedir{doc/latex/demopkg}
\generate{
  \file{README.txt}{\from{\jobname.dtx}{readme}}
}
%\generate{
%  \file{TODO.tex}{\from{\jobname.dtx}{TODO}}
%}
\generate{
  \file{phd-epigraphs.md}{\from{\jobname.dtx}{readmemd}}
}
\ifx\fmtname\nameofplainTeX
  \expandafter\endbatchfile
\else
  \expandafter\endgroup
\fi
%</internal>
%<*driver>
\NeedsTeXFormat{LaTeX2e}[2017/04/15]%
\ProvidesFile{phd-epigraphs.ins}%
  [2013/01/13 v1.0 ]%
\documentclass[book,oneside,11pt,a4paper]{phddoc}
\usepackage[bottom=2cm]{geometry}
\savegeometry{std}
\usepackage{phd}
\usepackage{phd-toc}
\usepackage{phd-colorpalette}
\cxset{palette bbc}

\sethyperref
\EnableCrossrefs
\CodelineIndex
\RecordChanges
\usepackage{microtype}
\begin{document}
  \let\bold\bfseries
 \coverpage{asia}{Book Design }{Camel Press}{EPIGRAPH}{DESIGN} 
 \secondpage
  
  \newpage
  
  \tableofcontents
  \mainmatter
  \pagestyle{headings}
  \input{./sections/introduction}
  \input{./sections/epigraphschapter}
 
  \DocInput{\jobname.dtx}%
  \nocite{*}
  \printbibliography
  \printindex
\end{document}
%</driver>
% \fi
%
% \CheckSum{53}
% \CharacterTable
%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%   Digits        \0\1\2\3\4\5\6\7\8\9
%   Exclamation   \!     Double quote  \"     Hash (number) \#
%   Dollar        \$     Percent       \%     Ampersand     \&
%   Acute accent  \'     Left paren    \(     Right paren   \)
%   Asterisk      \*     Plus          \+     Comma         \,
%   Minus         \-     Point         \.     Solidus       \/
%   Colon         \:     Semicolon     \;     Less than     \<
%   Equals        \=     Greater than  \>     Question mark \?
%   Commercial at \@     Left bracket  \[     Backslash     \\
%   Right bracket \]     Circumflex    \^     Underscore    \_
%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%   Right brace   \}     Tilde         \~}
%
%
% \changes{1.0}{2011/05/03}{Converted to DTX file}
%
% \DoNotIndex{\newcommand,\newenvironment}
%
% \GetFileInfo{phd-epigraphs.dtx}
%  \def\fileversion{v1.0}          
%  \def\filedate{Typeset \today}
% \title{The \textsf{\jobname} package.
% \author{Dr. Yiannis Lazarides \\ \url{yannislaz@gmail.com}}
% \thanks{This
%        file (\texttt{\jobname.dtx}) has version number 
%        \fileversion, last revised
%        \filedate.}
% }
% 
% \date{\filedate}
%
%
% \maketitle
% 
%
% \chapter{Implementation}
%  This manual is typeset according to the conventions of the
% \LaTeX{} \textsc{docstrip} utility which enables the automatic
% extraction of the \LaTeX{} macro source files~\cite{GOOSSENS94}.
% \pagestyle{headings}
% 
% ^^A\OnlyDescription
%
% ^^A\StopEventually{}
%
%<*EPI>
% \section{Preliminary}
%
%    \begin{macrocode}
\NeedsTeXFormat{LaTeX2e}[2017/04/15]%
\ProvidesPackage{phd-epigraphs}%
  [2015/13/06 v1.0 epigraph styling]%
%    \end{macrocode}
%
% \section{Epigraphs}
%
% This section deals with epigraphs.
% We first get the \pkg{epigraph} package. As the memoir class defines the epigraph 
% we first check if it has been defined.
%    \begin{macrocode}

\@ifundefined{epigraph}
  {%
    \RequirePackage{epigraph}
   %% Set up the epigraph to be a bit wider
    \setlength{\epigraphwidth}{8cm} 
    \setlength{\epigraphrule}{0pt}
    \newcommand{\theepigraph}[2]{\epigraphhead[30]{\epigraph{#1}{\textit{#2}}}}
  }
  {%for memoir
   \setlength{\epigraphwidth}{8cm} 
   \setlength{\epigraphrule}{0pt}
   \newcommand{\theepigraph}[2]{\epigraphhead[30]{\epigraph{#1}{\textit{#2}}}}%
  }

%    \end{macrocode}
%
%    \begin{macrocode}
\cxset{
  epigraph width/.code               = {\setlength\epigraphwidth{#1}},
  epigraph font-size/.code           = {\renewcommand{\epigraphsize}{#1}},
  epigraph beforeskip/.code          = {\setlength\beforeepigraphskip{#1}},
  epigraph afterskip/.code           = {\setlength\afterepigraphskip{#1}},
  epigraph align/.is choice,
  epigraph align/center/.code        = {\renewcommand{\epigraphflush}{center}},
  epigraph align/left/.code          = {\renewcommand{\epigraphflush}{flushleft}},
  epigraph align/right/.code         = {\renewcommand{\epigraphflush}{flushright}},
  epigraph source align/.is choice,
  epigraph source align/left/.code   = {\renewcommand{\sourceflush}{flushleft}},
  epigraph source align/right/.code  = {\renewcommand{\sourceflush}{flushright}},
  epigraph source align/center/.code = {\renewcommand{\sourceflush}{center}},
  epigraph text align/.is choice,
  epigraph text align/left/.code     = {\renewcommand{\textflush}{flushleft}},
  epigraph text align/right/.code    = {\renewcommand{\textflush}{flushright}},
  epigraph text align/center/.code   = {\renewcommand{\textflush}{center}},
  epigraph rule width/.code          = {\setlength\epigraphrule{#1}},
  epigraph rule color/.store in      = \epigraphrulecolor@cx,
  epigraph rule/.code                = {
                                        \renewcommand{\@epirule}{%
      \color{\epigraphrulecolor@cx}\rule[.5ex]{\epigraphwidth}{\epigraphrule}}%
},
}
\ExplSyntaxOn
\cxset
  {
    epigraph~width        = 0.7\linewidth,
    epigraph~font-size    = \small,
    epigraph~rule~width   = 0.4pt,
    epigraph~align        = right,
    epigraph~source~align = right,
    epigraph~text~align   = right,
    epigraph~rule~color   = theepigraphrulecolor,
    epigraph~rule,
  }
\ExplSyntaxOff
%    \end{macrocode}
%
% Many books will also provide epigraphs on a page of their own.
% Define an environment \docAuxEnvironment{epigraph page}
%    \begin{macrocode}
 %% Used below, to make sure that page starts on odd number
\def\startonoddpage{\clearpage
\ifodd\c@page\else\null\thispagestyle{empty}\newpage\fi}
\def\epigraphpage{%
\bgroup
\startonoddpage
\def\epigraph##1##2{\noindent%
\vrule height 20pt width0pt\llap{``}{\it ##1}\\
---##2}
\parindent=0pt\parskip=6pt
\thispagestyle{empty}\vglue11.25pc\small
}
\def\endepigraphpage{\egroup\newpage}
%    \end{macrocode}
% 
% \Finale
%</EPI>
%
%
%
\endinput
% \bibliographystyle{alpha}
% \begingroup
% \raggedright
%
% \begin{thebibliography}{GMSN94A}
%
% \bibitem[GMS94]{GOOSSENS94}
% Michel Goossens, Frank Mittelbach, and Alexander Samarin.
% \newblock {\em The LaTeX Companion}.
% \newblock Addison-Wesley Publishing Company, 1994.
%\endgroup
% \PrintIndex
%
% \end{thebibliography}

