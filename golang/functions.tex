\chapter{Functions}


\section{Functions as parameters}

Functions can be used as parameters in another function. The passed function can then be called within the body of that function, that is why it is commonly called a \textit{callback}. 

A good example of the use of a function as a parameter is the strings.IndexFunc() function:


\begin{minted}[bgcolor=black!3!white, fontsize=\small]{go}
  // IndexFunc returns the index into s of the first Unicode
  // code point satisfying f(c), or -1 if none do.
  func IndexFunc(s string, f func(rune) bool) int {
  	return indexFunc(s, f, true)
  }
  
  // LastIndexFunc returns the index into s of the last
  // Unicode code point satisfying f(c), or -1 if none do.
  func LastIndexFunc(s string, f func(rune) bool) int {
  	return lastIndexFunc(s, f, true)
  }
  
  // indexFunc is the same as IndexFunc except that if
  // truth==false, the sense of the predicate function is
  // inverted.
  func indexFunc(s string, f func(rune) bool, truth bool) int {
  	for i, r := range s {
  		if f(r) == truth {
  			return i
  		}
  	}
  	return -1
  }
\end{minted}


\section{Function Literals}
\begin{minted}{go}
package main

import "fmt"

func main() {
	f()
}

func f() {
	for i := 0; i < 4; i++ {
		g := func(i int) { fmt.Printf("%d ", i) }
		g(i)
		fmt.Printf(" - g is of type %T and has value %v\n", g, g)
	}
}

\end{minted}