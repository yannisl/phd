\documentclass[oneside, a4paper,12pt]{ltxdoc}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{phd}
\tcbuselibrary{documentation}
 
\makeatletter\makeatother

%to break urls
\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks%  save the current one
  \do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%
  \do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%
  \do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%
  \do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%
  \do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%
  \do\Y\do\Z}
\Urlmuskip = 2mu plus 1mu 
\input{defaultstyle}

\definecolor{niagra}{rgb}{0.7,0.027,0.22}
\definecolor{tiber}{rgb}{0.0039,0.09,0.27}

\cxset{%
 chapter color=tiber,
 title font-color=tiber,
 section afterindent = false, 
 section color= tiber,     
 section beforeskip=15pt,
 section afterskip=15pt,
 section indent=-3cm,
 section font-family= sffamily,
 section font-size= LARGE,
 section font-weight= bfseries,
 section font-shape=,
 section align= left,
 section numbering prefix =\thechapter.,
 section numbering= arabic,
 section spaceout=soul,
  section numbering suffix=,
 }
\cxset{title font-color=tiber,
chapter rule color=thegray}
\makeatletter
\begingroup \catcode `|=0 \catcode `[= 1
\catcode`]=2 \catcode `\{=12 \catcode `\}=12
\catcode`\\=12 |gdef|@xsmallverbatim#1\end{smallverbatim}[#1|end[smallverbatim]]
|gdef|@sxsmallverbatim#1\end{smallverbatim*}[#1|end[smallverbatim*]]
|endgroup
\def\@smallverbatim{\trivlist \item\relax
  \if@minipage\else\vskip\parskip\fi
  \leftskip\@totalleftmargin\rightskip\z@skip
  \parindent\z@\parfillskip\@flushglue\parskip\z@skip
  \@@par
  \@tempswafalse
  \def\par{%
    \if@tempswa
      \leavevmode \null \@@par\penalty\interlinepenalty
    \else
      \@tempswatrue
      \ifhmode\@@par\penalty\interlinepenalty\fi
    \fi}%
  \let\do\@makeother \dospecials
  \obeylines \smallverbatim@font \@noligs
  \hyphenchar\font\m@ne
  \everypar \expandafter{\the\everypar \unpenalty}%
}
\def\smallverbatim{\@smallverbatim \frenchspacing\@vobeyspaces \@xsmallverbatim}
\def\endsmallverbatim{\if@newlist \leavevmode\fi\endtrivlist}

\def\smallverbatim@font{\normalfont\smallverbatimsize\ttfamily}


\def\@sect#1#2#3#4#5#6[#7]#8{%
  \ifnum #2>\c@secnumdepth
   \let\@svsec\@empty
  \else
  \refstepcounter{#1}%
  \protected@edef\@svsec{\@seccntformat{#1}\relax}%
 \fi
 \@tempskipa #5\relax
 \ifdim \@tempskipa>\z@
 \begingroup
#6{%
 \@hangfrom{\hskip #3\relax\@svsec}%
 \interlinepenalty \@M #8\@@par}%
 \endgroup
 \csname #1mark\endcsname{#7...}%
 \addcontentsline{toc}{#1}{%
 \ifnum #2>\c@secnumdepth \else
   \protect\numberline{\csname the#1\endcsname}%
 \fi
 #7}%
 \else
 \def\@svsechd{%
 #6{\hskip #3\relax
  \@svsec #8}%
 \csname #1mark\endcsname{#7}%
 \addcontentsline{toc}{#1}{%
 \ifnum #2>\c@secnumdepth \else
      \protect\numberline{\csname the#1\endcsname}%
 \fi
 #7}}%
 \fi 
 \@xsect{#5}}
 
  
\cxset{geometry/.is choice,
          geometry/elements/.code = \geometry{ heightrounded,
          includeheadfoot=false,
          textwidth=      251pt,
          textheight=     502pt,
          paperwidth=     374pt,
          paperheight=    648pt,
          vmarginratio=   1:2,
          marginparwidth= 60pt,
          marginparsep=   18pt,
          outer=          90pt}}   
          
\cxset{geometry/aureo/.code=\geometry{ heightrounded,
         includeheadfoot=true, 
         textwidth=      120mm,
         textheight=     194mm,
         paperwidth=     17cm,
         paperheight=    24cm,
         marginratio=    2:3,
         marginparwidth= 62pt,
         marginparsep=   10pt}}            
    
\cxset{geometry/compact aureo/.code= \geometry{
    heightrounded,
    includeheadfoot=false,
    textheight=     175mm,
    textwidth=      108mm,
    paperwidth=     140mm,
    paperheight=    210mm,
    marginratio=    1:1,
    marginparwidth= 11mm,
    marginparsep=   7pt}
}    

\cxset{geometry/super compact/.code= 
\geometry{
    heightrounded,
    includeheadfoot=false,
    textheight=     175mm,
    textwidth=      108mm,
    paperwidth=     140mm,
    paperheight=    210mm,
    marginratio=    1:1,
    marginparwidth= 11mm,
    marginparsep=   7pt}    
}
 
\cxset{geometry/standard/.code=                   
 \geometry{%standard
    heightrounded,
    a4paper,
    includeheadfoot=true,
    textwidth=      110mm,
    textheight=     220mm,
    marginratio=    1:2,
    marginparwidth= 30mm,
    marginparsep=   12pt}}   
    
\cxset{geometry/periodical/.code=                  
 \geometry{%periodical
    heightrounded,
    includeheadfoot=false,
    textheight=     165mm,
    textwidth=      110mm,
    paperwidth=     170mm,
    paperheight=    240mm,
    marginratio=    2:3,
    marginparwidth= 26mm,
    marginparsep=   10pt}}   
    
\cxset{geometry/periodical aureo/.code= \geometry{%periodical aureo
    heightrounded,
    includeheadfoot=true,
    textwidth=      120mm,
    textheight=     194mm,
    paperwidth=     17cm,
    paperheight=    24cm,
    marginratio=    2:3,
    marginparwidth= 62pt,
    marginparsep=   10pt}}
    
\cxset{geometry/tufte a4paper/.code=    
      \geometry{a4paper,heightrounded,
        left=24.8mm,top=27.4mm,headsep=2\baselineskip,textwidth=107mm,
       marginparsep=8.2mm,marginparwidth=49.4mm,
       textheight=661.5pt,headheight=\baselineskip,
       }}  %error on asymetr
       
\cxset{geometry/tufte letterpaper/.code=\geometry{%  
        heightrounded,     
        letterpaper,left=1in,top=1in,headsep=2\baselineskip,textwidth=26pc,marginparsep=2pc,
       marginparwidth=12pc,textheight=594pt,
       headheight=\baselineskip\relax,reversemp=true,
       twoside=false
       }}         
%  

\cxset{newgeometry/.is choice,
        newgeometry/tufte letterpaper/.code=\newgeometry{%  
        heightrounded,     
        letterpaper,
        left=1in,
        top=1in,
        headsep=2\baselineskip,textwidth=26pc,marginparsep=2pc,
       marginparwidth=12pc,textheight=594pt,
       headheight=\baselineskip\relax,
       reversemp=false,
       twoside=true}}  



%\cxset{geometry=standard}    

\makeatother
\cxset{geometry=standard}    
\begin{document}

%               \makeatletter
%              \@twosidetrue\@mparswitchfalse

                    
%\tableofcontents
\cxset{mainmatter numbering=arabic}
\def\innermarginname{Inner}
\mainmatter

%\lipsum[1-10]
%
%\cxset{geometry units=mm}
%\pagestyle{grid}

\input{./sections/marginpar}
\input{./sections/pages}
\makeatother

\chapter{Introduction}

\cxset{section indent=1sp}
\cxset{section afterskip=20pt plus1pt minus 1pt}
\cxset{section numbering=none}
\cxset{section align=centering}
\cxset{section afterindent=true}
\cxset{section color=black!60}
\cxset{section align=RaggedRight}

\section*{Tufte and Page Layouts.}



\section*{\language-1 This is some very long heading to see if we can manipulate it, even if the hang from form is present that complicates things quite a bit.}

Test\marginpar[]{\footnotesize Some testing \lorem.}
\lorem



\printreadability



\the\baselineskip

\the\normalbaselineskip

\lipsum[1-5]\marginnote{\lorem}
\lipsum[1-5]\marginnote{\lorem}



\end{document}
\makeatletter
% For style 22 need 

\def\ps@verticalrule{%
    \leftskip\z@\let\@mkboth\@gobbletwo\vfuzz=5\p@
    \def\@oddhead{}%
    \def\@evenhead{}%
     \def\@evenfoot{}%
      \def\@oddfoot{}%
  \def\@oddhead{\verbatimsize
    \vbox to 0pt{\vspace{\the\headsep}%
      \noindent\hbox to \dimexpr\the\textwidth+.75cm\relax{%
            \hfill\mbox{%
                \color{thegray}\rule{1pt}{\dimexpr\the\textheight-\footnotesep\relax}\hspace*{1pt}\color{black}\thepage%
                }%
      \makebox[\z@][l]{\@c@pyrightline}%
%     \noindent\hspace*{-9pc}\rule{37pc}{0.25pt}%
    }}%
  }%
 
  \def\sectionmark##1{}%
  \def\subsectionmark##1{}%
 }
\makeatother

 \pagestyle{verticalrule} 
 
\input{./styles/style22}

\end{document}

\cxset{chapter opening=any}
\chapter{Introduction}

The development of a style template for a statistics book, following the style of Statistics for Engineers and Scientists.
The book can easily be developed by the \pkgname{phd} package.  Remember that the best way to start is to use an existing template and to modify the parameters.

\begin{docEnvironment}[doclang/environment content=key description,doc updated=2015-01-29]{docKey}{\oarg{key path}\oarg{options}\marg{name}\marg{parameters}\marg{description}}
  Documents a key with given \meta{name} and an optional \meta{key path}.
  The given \meta{options} are set with \refCom{tcbset}.
  This key takes mandatory or optional \meta{parameters} as value
  with a short \meta{description}.
  It is automatically indexed and can be referenced with
  \refCom{refKey}\marg{name}.
\begin{dispExample}
\begin{docKey}[foo]{footitle}{=\meta{text}}{no default, initially empty}
  Creates a heading line with \meta{text} as content.
\end{docKey}
\end{dispExample}
\end{docEnvironment}


\begin{docCommand}{docValue}{\marg{name}}
  Documents a value with given \meta{name}. Typically, this is a value for a key.
  This value is automatically indexed.
\begin{dispExample}
A feasible value for \refKey{/foo/footitle} is \docValue{foovalue}.
\end{dispExample}
\end{docCommand}

\begin{docCommand}[doc new=2015-01-08]{docCounter}{\marg{c@chapter}}
  Documents a counter with given \meta{name}. The counter is automatically indexed.
\begin{dispExample}
The counter \docCounter{foocounter} can be used for computation.
\end{dispExample}
\end{docCommand}


\begin{figure}[htbp]
\centering
\includegraphics[width=0.8\textwidth]{./images/statistics.jpg}
\end{figure}

I am not too very sure if the choice of color and sky blue for the sections is such a good combination, so we will try both and see which one you like.

\section{Set the Sections} 
 \arial

 The sections can easily be set using the package. We need to define some colors, the font parameters and the
 indentation into the margins. We will revisit some of the settings but for the time being the following settings will do.
 
 \begin{teX}
 \cxset{%
   section afterindent = false, 
   section color= sweet,     
   section beforeskip=15pt,
   section afterskip=15pt,
   section indent=-3cm,
   section font-family= sffamily,
   section font-size= LARGE,
   section font-weight= bfseries,
   section font-shape=,
   section align= left,
   section numbering prefix =\color{black!55}\thechapter.,
   section numbering= arabic,
   section spaceout=soul,
}
 \end{teX}



 \cxset{% 
  section numbering prefix =\thechapter.,}

\section{Examples and Solutions}

\newcounter{example}[chapter]

Obviously any book addressed to a student audience will have special sections for examples, solutions problems and answers and this was the main reason why I have introduced this particular style early in the documentation.

The examples are framed with a `Tâ€™ shaped ruler and are numbered in arabic numerals, with the chapter prefix. they are reset at every chapter.
\newlength\rulerlength
\cxset{rule color=sweet}
\color{black!85}
\makeatletter
\def\example{%
\stepcounter{example}
\settowidth{\rulerlength}{\textbf{Example 10.1}}
\addtolength{\rulerlength}{1cm}
\parindent0pt
\bgroup

\color{sweet}
\parindent-\rulerlength\relax
\leavevmode\par
\rule{\dimexpr(2\rulerlength)}{1.5pt}%
\vskip-12pt
\moveright-4pt\vbox to 0pt{\llap{\sffamily\textbf{Example \thechapter.\theexample :} \hbox to 0pt{\color{sweet}\rule{1.5pt}{\baselineskip}}}}
\egroup%
\everypar{\parindent2em}
}%

\example Suppose that an engineer encounters data from a manufacturing process in which
100 items are sampled and 10 are found to be defective. It is expected and anticipated
that occasionally there will be defective items. Obviously these 100 items
represent the sample. However, it has been determined that in the long run, the
company can only tolerate 5\% defective in the process. Now, the elements of probability
allow the engineer to determine how conclusive the sample information is
regarding the nature of the process. In this case, the population conceptually
represents all possible items from the process. Suppose we learn that if the process
is acceptable, that is, if it does produce items no more than 5\% of which are defective,
there is a probability of 0.0282 of obtaining 10 or more defective items in
a random sample of 100 items from the process. This small probability suggests
that the process does, indeed, have a long-run rate of defective items that exceeds
5\%. In other words, under the condition of an acceptable process, the sample information
obtained would rarely occur. However, it did occur! Clearly, though, it
would occur with a much higher probability if the process defective rate exceeded
5\% by a significant amount.

From this example it becomes clear that the elements of probability aid in the
translation of sample information into something conclusive or inconclusive about
the scientific system. In fact, what was learned likely is alarming information to
the engineer or manager. Statistical methods, which we will actually detail in
Chapter 10, produced a P-value of 0.0282. The result suggests that the process
very likely is not acceptable. The concept of a P-value is dealt with at length
in succeeding chapters. The example that follows provides a second illustration.

\def\solution{%
   \everypar{}
   \parindent0pt
  \leavevmode\par
  \makebox{\llap{\bfseries\textit{Solution }:}\thinspace}%
  \parindent2em
  }
 
\solution Let $X$ represent the number of good components in the sample. The probability
distribution of $X$ is\par

\lipsum[1]\par

\section{Figures}

Since the book is a mathematical textbook, it does not contain too many pictures. Captions are styled easily
with normal phd settings---as a matter of fact---the default style is ok and the looks of the page are
improved by the usage of the same sky blue color as the headings.

\begin{figure}[htbp]
\centering
\includegraphics[width=0.8\textwidth]{./images/statistics-figures.jpg}
\caption{Figures are styled after common LaTeX styles and do not need any particular treatment.}
\end{figure}

\section{Tables}

Tables are always very visual and book designers tend to spend considerable artistic effort to style them. This particular book style, just styles the captions at the primary color of the book (sky blue). Smaller tables are set
in black, including the heading.

The tables in the Appendix all have nice blue captions and some of them have also a small figure at the edge. 
Of course any TeXnician would generate these tables, nowdays using Lua. The figures can be absolute positioned
using pgf or similar methods.

\begin{figure}[htbp]
\example Reproduce the pages shown below to cater for figures.\par
\vskip\abovedisplayskip

\centering
\includegraphics[width=0.8\textwidth]{./images/statistics-tables.jpg}
\caption{Figures are styled after common LaTeX styles and do not need any particular treatment.}
\end{figure}

\lipsum[1-3]
\def\doublerule{%
\toprule
\addlinespace[0pt]
\midrule}

\begin{table}[htbp]
\example Develop a table with a double rule on top of the table head.\par
\centering 
\caption{Absorption of Moisture in Concrete Aggregates}
\label{tbl:stats}
\begin{tabular}{rrrrrr}
\doublerule
Aggregate    &1  &2 &3 &4 &5\\
\midrule
                   &551 & 595 & 639 & 417 & 563\\
\bottomrule
\end{tabular}
\end{table}

\noindent In addition, we may be interested in making individual comparisons among these
5~population means

\solution The only item we needed to define in addition to standard macros provided is the \string\doublerule.
\begin{verbatim}
\begin{table}[htbp]
\centering 
\caption{Absorption of Moisture in Concrete Aggregates}
\label{tbl:stats}
\begin{tabular}{rrrrrr}
\doublerule
Aggregate    &1  &2 &3 &4 &5\\
\midrule
                   &551 & 595 & 639 & 417 & 563\\
\bottomrule
\end{tabular}
\end{table}
\end{verbatim}



\input{./styles/style01}
\input{./styles/style02}
%\input{./styles/style03}
\input{./styles/style04}
\input{./styles/style05}
%\input{./styles/style06}
\input{./styles/style07}
\input{./styles/style08}
\input{./styles/style09}
\input{./styles/style10}
\input{./styles/style11}
\input{./styles/style12}
\input{./styles/style15}
\input{./styles/style16}
%\input{./styles/style17}
\input{./styles/style18}
\input{./styles/style19}
\input{./styles/style21}
\input{./styles/style22}
\input{./styles/versochapter}
\input{./styles/style26}
\input{./styles/style27}
\input{./styles/style28}
\input{./styles/style29}
\input{./styles/style30}
\input{./styles/style31}
\input{./styles/style32}
\input{./styles/style33}
\input{./styles/style34}
\input{./styles/style35}
\input{./styles/style36}
\input{./styles/style37}
\input{./styles/style38}
\input{./styles/style39}
\input{./styles/style40}
%\input{./styles/style41}
\input{./styles/style42}
\input{./styles/style43}
%\input{./styles/style44}
%\input{./styles/style45}
\input{./styles/style49}
\input{./styles/style50}
\input{./styles/style51}
\input{./styles/style52}
\input{./styles/style53}


\begin{docCommand}{docColor}{\marg{name}}
  Documents a color with given \meta{name}. The color is automatically indexed.
\begin{dispExample}
The color \docColor{spot} is available.
\end{dispExample}
\end{docCommand}


\begin{docCommand}{docColor*}{\marg{name}}
  Identical to \refCom{docColor}, but without index entry.
\end{docCommand}






\end{document}

0, .68 , .93