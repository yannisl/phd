\documentclass[twoside,11pt,a4paper]{ltxdoc}

\usepackage[bottom=4cm,footskip=3cm,
            headsep=2cm]{geometry}
\savegeometry{std}
\usepackage{microtype}
\usepackage{phd}
\usepackage{documentation}
\usepackage{phd-lowersections}
\usepackage{phd-runningheads}

\input{defaults-chapters}
\sethyperref
\addbibresource{phd1.bib}% Syntax 
\cxset{palette architectural}  
     
\newfontfamily\symbola{Symbola}

\makeatletter
\long\def\auxm#1(#2);{%
  \def\Xtemp{#1}%
  \def\Ytemp{#2}%
  \parindent=0pt
  \addvspace{1.5pt}%
  \par\leavevmode
  \hangafter=1\relax   \hangindent=1em\relax
  \bgroup  
   \bfseries\sffamily\color{red}\Xtemp\,\color{black}(\textit{\Ytemp})\hskip0.1em
  \egroup
}

%   
%\newenvironment{docLua}[1]{%
%  \auxm#1;
%  }  
%{%
%\@@par
%\smallskip\parindent=1em }


\makeatother
\let\HUGE\Huge
\begin{document}
\DEBUGOFF
\overfullrule1pt
 \frontmatter
  \pagestyle{empty}
  \let\bold\bfseries
  \def\shorttitle{LUA, LUATEX,}
 \coverpage{asia}{Book Design Monographs}{Camel Press}{LUALATEX}{} 
 \secondpage
 \newpage
 \tableofcontents
 \mainmatter
 \pagestyle{headings}
 
  % \catcode `\| =12
  %  \DeleteShortVerb
 
  
  \makeatletter
  \@debugtrue
  \makeatother
  \cxset{section format=hang,
         chapter format = stewart,}
  
  \def\docauthoright{Y Lazarides}
  \def\headingslogo{\headingscopyrightline\enspace\tcbox[size=minimal]{\includegraphics[width=1cm]{balthus-11}}}
  \def\fulltitle{\textsl{LUA AND LUATEX}}
  \def\halftitleleft{\textls{\sffamily Programming}}
  \def\halftitleright{\sffamily\textls{Typography}}
  \def\luacmd#1{{\textbf{#1}}}
  
%  \cxset{headings style/.style={headings odd header background color = white,
%         headings even.header.left = page,
%         headings even header background color = white,
%         headings even header toprule =0pt,
%         headings even header bottomrule = 1.5pt, 
%         headings odd header toprule=0pt,
%         headings odd header bottomrule = 1.5pt,
%         %
%         headings odd footer right = copyright,
%         headings odd footer center = today,
%         headings odd footer left = page,
%        % headings even footer right = shorttitle,
%         EFR/.style={headings even footer right=#1},
%         EFR = halftitleleft,
%         headings odd footer left =halftitleright,}
%  }

  \cxset{headings style,
         pagestyle = headings,
         chapter numbering=arabic,
         palette unorange}
         
%  \input{./golang/mux}  
%  \input{./golang/functions} 
%  \input{./golang/goroutines}    
%  \end{document}
  
     \input{./lua/modules}  
         
   \input{./sections/luatex} 
   \input{./lua/strings} 
   \input{./lua/lua-objects}
    \input{./lua/luaio}
   \end{document}  
   
           
   \input{./sections/i18n}  
   \input{./sections/solar}    
   \input{./lua/lua-tables}      
   \input{./lua/pattern-matching}
   \input{./lua/lpeg}
     
   \input{./lua/nodes}         
    
   \input{./lua/metatables} 
   \nocite{*}
   \printbibliography
   \printindex 
\end{document}    
               
       
   
   
   \include{./sections/colors} %pass     
   \include{./sections/indices}
   %\include{./sections/unicodemath}      
   \include{./sections/expandafter}   %pass
   \include{./sections/futurelet} %pass     
   \include{./sections/io} %pass        
%  \include{./sections/numbers}         
   \include{./sections/iteration} %pass        
  \include{./sections/datastructures}         
  \include{./sections/characters}  %pass       
  \include{./sections/paragraphs}       
  \include{./sections/boxesandglue} %passbiber
  \include{./sections/rulesandleaders} %pass       
  %\include{./l3sections/l3box}  %error due to coffins    
  \include{./sections/tables} %pass threepart table to fix      
%  \include{./sections/environments}         
  \include{./sections/lists} %pass     
%  %\include{./sections/maths-01} 
%  \include{./sections/tableofcontents}        
  \include{./sections/graphics}         
 \include{./sections/captions}       
%  %\include{./sections/floats}       
   \include{./sections/languages} %pass error in epigraph?     
%  \include{./sections/acronyms}   
%  \include{./sections/dropcaps}    
   \include{./sections/book-class} %pass      
  \include{./sections/long-figures} %pass       
 \include{./sections/fonts} %pass       
 % \include{./sections/luatex-fonts}         
  \include{./sections/classes}  %pass
%  %% KERNEL BELOW    
%  \include{./kernel/kernel-intro}   
%  \include{./kernel/kernel-ltfsstrc}    
%  \include{./kernel/kernel-preload}  
%   \include{./kernel/kernel-ltalloc}        
% % \include{./kernel/kernel-ltthm}       
  \include{./kernel/kernel-ltplain}         
%  \include{./kernel/kernel-lthyphen}       
%  \include{./kernel/kernel-ltidxglo}       
%  \include{./kernel/kernel-lttab}       
%  \include{./kernel/kernel-ltpictur}       
%  \include{./kernel/kernel-ltboxes}         
%  \include{./kernel/kernel-ltlogos}       
%  \include{./kernel/kernel-ltfinal}      
%  \include{./kernel/kernel-ltfiles}       
%  \include{./kernel/kernel-ltcounts}       
%  \include{./kernel/kernel-ltfntcmd}       
%  \include{./kernel/kernel-ltvers}
%  \include{./kernel/kernel-ltpage}    
%  \include{./kernel/kernel-ltfloat}       
%  \include{./kernel/kernel-ltoutput}
%  \include{./kernel/kernel-ltpageno}
% 
%  \include{./kernel/kernel-lterror}
%  \include{./kernel/kernel-ltmath}
%   \include{./kernel/kernel-ltspace} 
%  \include{./kernel/kernel-ltfssini} 
%  \include{./kernel/kernel-ltbibl}
%  \include{./kernel/kernel-ltoutenc}
%  \include{./kernel/kernel-ltfssbas}
%  \include{./kernel/kernel-fontdef}
%  
%  \include{./kernel/kernel-ltcntrl}
%  \include{./kernel/kernel-ltxref}
%  \include{./kernel/kernel-ltclass} 
%  \include{./kernel/kernel-ltdefns}
%  \include{./kernel/kernel-ltlists}
%  \include{./kernel/kernel-ltmiscen} 
%  \include{./kernel/kernel-d-ltxdefns} 
%      
%  \include{./kernel/kernel-N-ltlength}     
%  \include{./kernel/kernel-ltsect}   
% 

\nocite{*}
\printbibliography
\printindex
  \end{document} 