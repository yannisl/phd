\chapter{Chemistry}

\section{Introduction}

A number of \latex2e packages are available at the ctan repository for typesetting chemical formulae: \pkgname{chemfig}, \pkgname{ochem}, \pkgname{streetex}, \pkgname{xymtex} \cite{xymtex}, \pkgname{chemformula} and  \pkgname{mhchem}. So far the most intuitive\footnote{For the author!} is |mhchem|. The package has been developed by Martin Hensl and is currently at version |v4.0| \footcite{mhchem}. When the \pkg{phd} is loaded with the option \option{chemistry} the packages \pkgname{mhchem} and \pkgname{chemfig} are loaded. A small third package is loaded if LuaLaTeX is used. 

\begin{texexample}{Chemical formula with mhchem}{}
\ce{$A$ <->T[{Enclose spaces!}] $Aâ€™$}
\ce{Zn^2+
<=>[\ce{+ 2OH-}][\ce{+ 2H+}]
$\underset{\text{amphoteres Hydroxid}}{\ce{Zn(OH)2 v}}$
<=>C[+2OH-][{+ 2H+}]
$\underset{\text{Hydroxozikat}}{\ce{[Zn(OH)4]^2-}}$}
\end{texexample}

The \pkgname{chemfig} is a package for drawing chemical formula and can also be used for simpler applications. The package has been developed by Christian Tellechea and is using TikZ for the actual drawing operations \cite{chemfig}. We cannot do justice to the many commands and settings and as the manual (which comes both in French as well as English) is excellent we refer you to it.\footnote{The package documentation also has a very distinct and refreshing design.}

\begin{texexample}{Using the chemfig Package}{ex:chemfig}
\definesubmol\Me[H_3C]{CH_3}
\chemfig{*6((-!\Me)=(-!\Me)-(-!\Me)=(-!\Me)-(-!\Me)=(-!\Me)-)}
\end{texexample}

The phd package also provides a small contribution to chemistry typesetting with the Lua module \luacmd{molarmass}. This has been adapted from the Mediawiki, as a demonstration of interfacing TeX with Lua. To use the module, load it with the \luacmd{require} function. The molar mass of simple formulae can then be calculated and typeset. The typesetting is achieved using the |mhchem| package.

\begin{texexample}{}{}
\begin{luacode}
   require("molarmass")
   test_mm("NaCl")
   test_mm("NaOH")
   test_mm("CaCO3")
   test_mm("H2SO4")
   test_mm("C10H8")
   test_mm("CO2")
   test_mm("Mo")
   test_mm("HCl")
   test_mm("Si(OH)4")
   test_mm("CuSO4(H20)5")
   test_mm("H2O")
   test_mm("SB2O3")
\end{luacode}
\end{texexample}

Have a look at the module and extend it to use functions for typesetting atomic weights and also to accept isotopes, as an exercise.





