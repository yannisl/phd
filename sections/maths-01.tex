%\chapter{maths}
%\label{ch:maths}
%
%
%                      
%
%\parindent1em
%
%
%
%\starttemplate{kroll}
%\thispagestyle{empty}
%    \begin{leftcolumn}
%         {{\centering \huge  THE ART OF \\
%       TYPESETTING\\
%       MATHS\\}}
%      \medskip
%       {\justifying \small Perhaps some day a typesetting language will become standardized to the 
%point where papers can be submitted to the American Mathematical Society 
%from computer to computer via telephone lines. Galley proofs will not be 
%necessary, but referees  and / or copy editors could send suggested changes to 
%the author, and he could insert these into the manuscript, again via telephone.\par
%\hfill \textit{Donald Knuth}}
%\medskip
%       \putimage[width=1.0\linewidth]{./images/halmos.png}\par
%       \aheader{shows Kroll at 59. Says he. ``Painting is fascinating'' even when motif my own mug.}
%   \end{leftcolumn}
%   \begin{rightcolumn}
%       \putimage[width=0.9\linewidth]{./images/themathematician.jpg}
%       \onelinecaption{{\resizebox{0.9\linewidth}{5.5pt}{\bfseries The Mathematician (1918) an oil painting by the Mexican artist Diego Rivera. }}\par}
%
%     \vspace*{1.5\baselineskip}
%
%  \centerline{\onelineheader{TYPESETTING MATHEMATICS}}
%      \begin{multicols}{2}
%     
%      \lettrine{M}{ost people} discover, \alltex when they are faced with the production of a thesis or paper that includes lots of
%mathematical text. It is the rais\`on detrait for \tex. This chapter discusses the typesetting of mathematics, common pitfalls and solutions. We will also review some typographical questions.
%\parindent1em
%
%You can start writing mathematical text, without any additional loading of packages, either in plain \tex or \latex. The reality is that most institutions have developed their own styles and common packages used by AMS have found widespread use. We will discussing these extensively, but first let us look at how to enter mathematical text. 
%
%To enter mathematical text in plain \tex you just use the |$|\ldots|$| for inline math and |$$|\ldots|$$| for displayed math. \latex uses |\(|
%and |)| for inline and |[\]|.
%      \end{multicols}
%   \end{rightcolumn}
%\stoptemplate
%\end{group}
%
%\newgeometry{left=2.9cm,right=2.9cm, bottom=2cm}
%\pagestyle{headings}
\large
\chapter{Mathematics}

\section{Introduction}
\epigraph{Do or do not. There is no try.}{Yoda in \textit{The Empire Strikes Back}}

Our purpose is to study the typesetting of mathematics using \latexe by providing somewhat longer examples than those provided in normal \latex tutorials, starting with a faster and perhaps steeper learning curve, before we delve into the subtleties of the typesetting macros. Mathematics is described using symbols and texts. We start by the definition of the ordinary \textit{integers}, i.e., the positive and negative whole numbers and zero:

\[\ldots,-3,-2,-1,0,2,3\dots.\]

To typeset the above we enclose the equation using |\[ ... \]|. This is called a display formula, as compared to inline math. Numbers are typeset just by typing the numbers |-3,-2,-1,0,2,3| and the elision using |\ldots | or |\dots|. 

\begin{texexample}{Basic Math Typesetting}{ex:typesetting}
\[\ldots,-3,-2,-1,0,2,3\dots.\]
\end{texexample}


The acute reader will notice the difference in typesetting the first ellipsis ($\ldots, -3$) from the last ($3\dots$). There is no general consensus on the typesetting of dots. Within maths the AmS will use its own defaults if we use |\dots|. 

\[ 1 + 2 +\dots + n  \]

If what follows the dots is ambiguous as to the
choice, the specific form of the command can be used. However, by using the semantically
oriented commands
\begin{description}
 \item[\cs{dotsc}] for \enquote{dots with commas}
 \item[\cs{dotsb}] for \enquote{dots with binary operators/relations}
 \item[\cs{dotsm}] for \enquote{multiplication dots}
 \item[\cs{dotsi}] for \enquote{dots with integrals}
 \item[\cs{dotso}] for \enquote{other dots} (none of the above)
\end{description}
we can adapt our mathematical paper to the standard of any Journal.

Mathematical induction can be used to prove that the following statement, $P(n)$, holds for all natural numbers.

\begin{gather}
0 + 1 +2 + \dots +n = \frac{n(n+1)}{2}.
\end{gather}

I have now introduced another macro |\frac|, this takes two arguments, one for the donominator and another for the numerator. This time we also get an equation number as well by enclosing the formula in an environment.

\begin{texexample}{Display equation with gather}{ex:gather0}
\begin{gather}
0 + 1 +2 + \dots +n = \frac{n(n+1)}{2}.
\end{gather}
\end{texexample}

There are many environments available with subtle differences. Getting back with our writing, we need to explain our method of proofs by induction. We now write,

\textit{Base case}: Show that the statement holds for $n=0$ (taking 0 as a natural number).

$P(0)$ is easily seen to be true:

\[0 = \frac{0\times(0+1)}{2}\].

I have now introduced the |\times| multiplication $(\times)$ symbol and we have not numbered the equation. When multiplying numerals we can use the |\times| operator for multiplication or use a |\cdot| $(\cdot)$ to typeset the equation as follows:

\[0 = \frac{0\cdot(0+1)}{2}\].


\textit{Inductive step}: Show that if $P(k)$ holds, then also $P(k + 1)$ holds. This can be done as follows.

Assume $P(k)$ holds (for some unspecified value of $k$). It must then be shown that $P(k + 1)$ holds, that is:

\begin{gather}
\underbrace{(0+1+2+\dots+k)}_\text{terms to be replaced by $\frac{k(k+1)}{2}$} + (k+1) = \frac{(k+1)((k+1) +1 ) }{2} \label{eq:underbrace}
\end{gather}



Using the induction hypothesis that $P(k)$ holds, the left-hand side can be rewritten to:

\[ \frac{k(k+1)}{2} + (k+1) \]

\begin{align}
\frac{k(k + 1)}{2} + (k+1) & = \frac {k(k+1)+2(k+1)} 2 \\
& = \frac{(k+1)(k+2)}{2} \\
& = \frac{(k+1)((k+1) + 1)}{2}
\end{align}
thereby showing that indeed  $P(k + 1)$ holds.

Since both the base case and the inductive step have been performed, by mathematical induction the statement $P(n)$ holds for all natural numbers $n$.

The alignment of the equations was achieved by enclosing the equations in another environment |align|. This comes in a star and an unstarred version, the latter will typeset the equations without a number. It is very similar to a |tabular| environment and uses |&| as the tabulator symbol and |\\| as the carriage return.

\begin{texexample}{Aligning equations}{ex:align0}
\begin{align}
\frac{k(k + 1)}{2} + (k+1) & = \frac {k(k+1)+2(k+1)} 2 \\
& = \frac{(k+1)(k+2)}{2} \\
& = \frac{(k+1)((k+1) + 1)}{2}
\end{align}
\end{texexample}

Although we so far we managed to typeset beautiful looking mathematics if we blindly apply induction reasoning we are on shaking ground. Consider the statement:

$f(n) = n^2 - n +41$ is a prime number for every $n\ge1$. 

As we evaluate $f(n)$ for $n = 1,2,3,4,\dots,40,$ we obtain the following values:

\begin{gather*}
41,43,47,53,61,71,83,97,113,131, \\
151,173,197,223,251,281,313,347,383,421, \\
461,503,547,593,641,691,743,797,853,911, \\
971,1033,1097,1163,1231,1301,1373,1447,1523,1601. \\
\end{gather*}

It is tedious but not difficult to prove that every one of these 
numbers is prime. Can we now conclude that all the numbers of the form $f(n)$ 
are prime? For example, is the next number $f(41) = 1681$ prime? The answer is no: $f(41) = 41^2 -41 + 41 = 41^2$ , which obviously factors, and hence 
$f(41)$ is not prime. 




P\'olya in \textit{How To Solve It, A New Aspect of Mathematical Method} gave a simple problem: to number the pages of a bulky volume, the printer 
used 2989 digits. How many pages has the volume? 

A volume of 999 numbered pages needs\\ 
$$9 + 2 \times 90 + 3 \times 900 = 2889$$ \\
digits, If the bulky volume in question has $x$ pages \\
$$2889 + 4(x-999) = 2989 $$
$$x = 1024 $$
This problem may teach us that a preliminary estimate 
of the unknown may be useful (or even necessary, as in the present case). 

Pólya was born in Budapest, Austria-Hungary to Anna Deutsch and Jakab Pólya, Hungarian Jews who had converted to the Roman Catholic faith in 1886.[4] Although his parents were religious and he was baptized into the Roman Catholic Church, George Pólya grew up to be an agnostic.[5] He was a professor of mathematics from 1914 to 1940 at ETH Zürich in Switzerland and from 1940 to 1953 at Stanford University. He remained Stanford Professor Emeritus for the rest of his life and career. He worked on a range of mathematical topics, including series, number theory, mathematical analysis, geometry, algebra, combinatorics, and probability.[6] 

For further insights into problem solving, I highly recommend his books.


\begin{Axiom}[Least Integer Axiom]\footnote{An axiom or postulate is a statement that is taken to be true, to serve as a premise or starting point for further reasoning and arguments. The word comes from the Greek axíōma (ἀξίωμα) 'that which is thought worthy or fit' or `that which commends itself as evident.'} Every nonempty collection $C$ of positive integers has a smallest number in it.
\end{Axiom}

\begin{theorem}[Least Criminal] 
Let $S(n)$ be a family of statements, where n 
varies over some nonempty collection of positive integers. If some of these 
statements are false, then there is a first false statement. 

\begin{proof}
Let $C$ be the collection of all those positive integers $n$ for which $S(n)$ 
is false; by hypothesis, $C$ is nonempty. The Least Integer Axiom provides a 
smallest number $m$ in $C$, and $S(m)$ is the first false statement. 
\end{proof}
\end{theorem}

Here are two comments before giving more applications of induction. First, one must verify both the base step and the inductive step; verification of only one of them is inadequate\ldots




\begin{Exercise}
\upshape
This example uses both inductive reasoning and mathematical induction. We seek a formula for the sum of the first $n$ odd numbers: $1 + 3 + \dots+(2n-1)$. A list of the sums for $n =1,2,3,4,5$ is $1,4,9,16,25$. These are perfect squares; we can rewrite them better as $1^2,2^2,3^2,4^2,5^2$. Inductive reasoning suggests the \emph{guess}
\[ S(n): 1 + 3 +5 +\dots+(2n-1)=n^2\]

We have discovered a formula. We now use mathematical induction to prove that this guess is always true. The base step S(1) has already been checked. For the inductive step we must prove 

\[S(n+1): [1+3+\dots+(2n-1)] + (2n+1) = (n+1)^2 \].
\end{Exercise}


Most mathematical texts, will have theorems, proofs and the like, so I would like to introduce them early. These are actually LaTeX environments, supplemented by local definitions and packages.
So if we wanted to print the Fundamental Theorem of Arithmetic, perhaps the most important theorem we say:

\begin{texexample}{Theorems}{ex:theor}
\begin{theorem}[Fundamental theorem of arithmetic] For each natural
number $n$ there is a unique factorization
\[n = p_1^{a_1} p_2^{a_2}\ldots p_k^{a_k},\]
where exponents $a_i$ are positive integers and $p_1<p_2\ldots<p_k$ are primes.
\end{theorem}
\end{texexample}

To typeset subscripts and superscripts we use |_| and |^|.

The next step towards the modern concept of number was made by the invention of the decimal point $(\middot)$ and decimal notation. This made it possible to represent \textit{irrational numbers} to a very high accuracy. For example:\\
the square root $\sqrt{2}\sim 1.4142135623$\\[0.3ex]
correct to 10 decimal places. The symbol $\sim$ means \enquote{is approximately equal to}. This expression is not exact: its square is actually:\\[0.3ex]
\directlua{tex.print(1.4142135623*1.4142135623)}

LaTeX and numerous packages provide commands to typeset an incredible amount of mathematical symbols, which are divided into different classes, such as operators, ordinals, delimiters and the like. We will look at them in more detail later on.

In number theory and related mathematics, the main number systems are normally denoted using a blackboard font as follows. For example $\mathbb{N}$, is typeset using |\mathbb{N}|.
\begin{align*}
\mathbb{N} & = \text{the set of all natural numbers }0,1,2,3,\dots \\
\mathbb{Z} & = \text{the set of all integers }, -3,-2,-1,0,1,2,3,\dots\\
\mathbb{Q} & = \text{the set of all rational numbers}\\
\mathbb{R} & = \text{the set of all real numbers}\\
\mathbb{C} & = \text{the set of all complex numbers}\\
\end{align*}


At this point we need to digress and discuss, the various types of fonts that can be used in \latex. The LaTeX kernel defines several alphabets in \docFile{fontmath.ltx}. The |\math...| commands provide macros to typeset mathematics in these different fonts.
\begin{description}
\item[\cs{mathrm}] is the normal upright Roman font.
\item[\cs{mathnormal}] is the normal math italic font: |$\mathnormal{a}$| and |$a$| give the same result.
\item[\cs{mathcal}] is the special calligraphic font. This can be used only for uppercase letters.
\item[\cs{mathbf}] gives the upright Roman boldface letters.
\item[\cs{mathsf}] gives upright sans serif letters
\item[\cs{mathit}] gives text italic letters: $different\ne\mathit{different}.$
\item[\cs{mathtt}] gives upright letters from the typewriter type font.
\end{description} 

We should mention that the argument to each of these commands is typeset in \emph{math mode}, so spaces are ignored and hyphens become minus signs. Using those commands with arguments not consisting only of normal letters can give unexpected (and sometimes bizarre) results.

No package has to be loaded for being able to use those alphabets.

When we load the AMSfonts package, which by the way is loaded automatically by the amssymb package we get access also to

\begin{description}
\item[\cs{mathfrak}] for Fraktur (aka Gothic) letters, upper and lower case
\item[\cs{mathbb}] for \enquote{blackboard bold} uppercase letters
\end{description}



Now that we have a method to typeset various types of symbols with distinct fonts, we recast
the fundamental theorem of arithmetic with set notation. Most of the symbols for set have
intuitive names, like |\in| for $\in$. 

Let $\mathbb{N} = \{0,1,2,3, \dots \}$ be the set of {\bf natural numbers}.
A number $p \in \mathbb{N}, p>1$ is {\bf prime} if $p$ has no factors different from $1$ and $p$. 
With a {\bf prime factorization} $n=p_1 \dots p_n$, we understand the prime factors $p_j$
of $n$ to be ordered as $p_i \leq p_{i+1}$. The {\bf fundamental theorem of arithmetic} is
\index{natural numbers}
\index{primes}
\index{prime factors} 
\index{prime factorization}

\begin{theorem}
Every $n \in \mathbb{N}, n>1$ has a unique prime factorization.
\end{theorem}

As professor Stewart says, these systems fit inside each other like Russian dolls.\\
$\mathbb{N}\subset \mathbb{Z} \subset \mathbb{Q} \subset \mathbb{R} \subset \mathbb{C}$\\
where the set theory symbol |\subset| ($\subset$) means is \textit{contained in}.

Let $\vert X\vert$ denote the {\bf cardinality} of a finite set $X$. This means that
$\vert X\vert$ is the number of elements in $X$. A function $f$ from a set $X$ to a set $Y$
is called {\bf injective} if $f(x)=f(y)$ implies $x=y$. The {\bf pigeonhole principle} tells:

%% Division
\begin{Definition}
If $a$ and $b$ are integers, $a \neq 0$, and if there is an integer $c$ such that $b = ac$, then we say that $a$ divides $b$, and we write $a\vert b$. If $a$ does not divide $b$, then we write $a \nmid b$.
\end{Definition}

Although $\frac{7}{5} = 1.4$ the quotient is not an integer and thus $5 \nmid 7$. Other examples are
\[2\vert 18, 1\vert 42, 3\vert(6), -6\nmid 31. \]


\begin{theorem} Every square integer is of the form $4k$ or $4k+1$, where $k$ is an integer.
Since $x^2$ and $y^2$ must be of the form 4k or 4k + 1, x2 þ y2, the sum of two
squares, can only be of the form 4k, 4k þ 1 , or 4k þ 2 and we have
established the next result.
\end{theorem}



There are many more number representations, but at this stage I want to introduce the Hebrew alphabet letter which is used normally as a notation for infinities |\infty| ($\infty$), such as Cantor's ordinal and cardinal infinities of set theory.  Georg Cantor developed a system of transfinite numbers, in which the first transfinite cardinal is aleph-null ($\aleph_0$), the cardinality of the set of natural numbers. This modern mathematical conception of the quantitative infinite developed in the late nineteenth century from work by Cantor, Gottlob Frege, Richard Dedekind and others, using the idea of collections, or sets.

In set theory, the cardinality of the continuum is the cardinality or \enquote{size} of the set of real numbers {$\mathbb {R} $ $\mathbb {R}$ , sometimes called the continuum. It is an infinite cardinal number and is denoted by ${\displaystyle |\mathbb {R} |}$ 

\[\mathfrak c = 2^{\mathcal N_0}>\mathcal N_0.\]

\section*{Notation}
 
At this stage one should start developing a notation table. Since we dealing with number theory we will give an example of a notation system

\begin{longtable}{lp{6cm}} 
$d,k,m,n$ & positive integers (unless otherwise indicated) \\
$d\vert n$ & $d$ divides $n$\\ 
$(m,n)$ & greatest common divisor of $m,n$. If $(m,n)=1,m$ and $n$ are called relatively prime or coprime.\\
$(d_1,\dots,d_n)$ &greatest common divisor of $d_1,\dots,d_n$\\
$\sum_{d\vert n}, \prod_{d\vert n}$ & sum, product taken over divisors of $n$.\\
$p, p_1, p_2,\dots $ & prime numbers (or primes): integers $(>1)$ with only two positive integer 
divisors, $1$ and the number itself.\\
$\sum_p, \prod_p$ & sum, product extended over all primes. \\ 
$x,y$ & real numbers.\\
$\log x$ & natural logarithm of $x$, written as $\ln x$ in other chapters.\\
$\zeta(s)$ & Riemann zeta function.\\
$(n\vert P)$ & Jacobi symbol.\\
$(n\vert p) & Legendre symbol\\
 \end{longtable}


\idxboth{binary}{operators}
\index{semidirect products}
\label{ams-bin}
\begin{tabular}{*3{ll}}
\X\barwedge        & \X\circledcirc     & \X\intercal$^*$    \\
\X\boxdot          & \X\circleddash     & \X\leftthreetimes  \\
\X\boxminus        & \X\Cup             & \X\ltimes          \\
\X\boxplus         & \X\curlyvee        & \X\rightthreetimes \\
\X\boxtimes        & \X\curlywedge      & \X\rtimes          \\
\X\Cap             & \X\divideontimes   & \X\smallsetminus   \\
\X\centerdot       & \X\dotplus         & \X\veebar          \\
\X\circledast      & \X\doublebarwedge  \\
\end{tabular}

\bigskip

\begin{tablenote}[*]
  \newcommand{\trpose}{{\mathpalette\raiseT{\intercal}}}
  \newcommand{\raiseT}[2]{\raisebox{0.25ex}{$#1#2$}}
%
  Some people use a superscripted \docAuxCommand{intercal} for matrix
  transpose\index{transpose}: ``\verb|A^\intercal|''~$\mapsto$
  ``$A^\intercal$''.  (See the May~2009 \ctt thread, ``raising math
  symbols'', for suggestions about altering the height of the
  superscript. and se.tex question \footnote{\url{http://tex.stackexchange.com/questions/30619/what-is-the-best-symbol -for-vector-matrix-transpose}})  \docAuxCommand{top} (\vref*{letter-like}), \verb|T|, and
  \verb|\mathsf{T}| are other popular choices: ``$A^\top$'',
  ``$A^T$'', ``$A^{\text{\textsf{T}}}$''.
\end{tablenote}


\begin{Rule} Visit arxiv.com and read some of the papers in your field. Gather a set of symbols that you will need into a symbols list first. Keep the list updated as you expand your writings.
\end{Rule}

\begin{Rule} Choose your notation carefully from that available in the field you are writing about. Use one of the math alphabets to distinguish sets, constants etc. 
\end{Rule}

\begin{Rule} Use a combination of text and mathematics to describe the work. Use amsmath standard packages at first while you learning (from day one).
\end{Rule}


%|\mathbb {R} | or {\displaystyle {\mathfrak {c}}} {\mathfrak {c}} (a lowercase fraktur script "c").

%The real numbers $\mathbb {R}$  are more numerous than the natural numbers $\mathbb {N}$. Moreover,  $\mathbb {R}$  has the same number of elements as the power set of {\displaystyle \mathbb {N} } \mathbb N. Symbolically, if the cardinality of {\displaystyle \mathbb {N} } \mathbb N is denoted as {\displaystyle \aleph _{0}} \aleph _{0}, the cardinality of the continuum is


Consider the typesetting of Euclid's theorem for the existance of infinitely many primes. In books you have probably read something like.

\begin{theorem}[Euclid] There exist infinitely many primes.
\end{theorem}
\begin{proof} Assume that the primes are a finite in number, and denote by $p$ the largest.

\[
n=2\cdot3\cdot5\cdots p+1
\] 
\end{proof}


Continuing with our study of primes we define the nth \textit{primorial} number as  the product of consecutive primes numbers, starting with the first prime, namely 2. One distinguishes between the n, nth primorial number and the primorial of a natural number $n$.

\begin{gather}
p_n\# := \prod_{i=1}^{n} p_i,\quad n \ge 0, \,
\end{gather}

A002110 The primorial numbers, $p_n\#,\ n \,\ge\, 0. \,$

\begin{aligned}
 p_n\# =  1, 2, 6, 30, 210, 2310, \numprint{30030}, \numprint{510510}, \numprint{9699690}, \numprint{223092870}, \numprint{6469693230}, \\
 \numprint{200560490130}, \numprint{7420738134810}, \numprint{304250263527210}, \numprint{13082761331670030},\\
\numprint{614889782588491410}, \numprint{32589158477190044730}, \ldots 
\end{aligned}


To avoid confusion large numbers are typeset either without a comma separator or with spaces. We avoid justification and if need be we manually break the line.


\section{Inline and Display Math}
Mathematical typesetting involves either inline math formulae, which are part of a paragraph of text or display math which are a block of mathematical material. \tex will typeset inline math by enclosing the material between  \$\ldots\$. See Example~\ref{ex:inline}.
\bigskip

\begin{texexample}{Inline and Display Math}{ex:inline}
This is an inline equation \(a^2+b^2=c^2\)

And this equation is a display equation:
\[a^2+b^2=c^2\]
\end{texexample}


The above code, is valid in \latex and its variants as well. However in certain cases, especially for displayed math, this can introduce some blank lines. Lamport redefined
the \$\$. For inline math use |\(|\ldots|\)| and for display math |\[|\ldots|\] |. The above example can be written as:
\bigskip

\begin{texexample}{The Math Environment}{ex:mathenvironment}
 This is an inline equation \(a^2+b^2=c^2\)

 And this equation is a display equation:
 \[a^2+b^2=c^2\]

 \begin{math}
 \sum_{i=1}^{n}i=\frac{1}{2}n\cdot(n+1)
 \end{math}
\end{texexample}

As you can observe the output remains the same.  Spaces within  maths environment are ignored, so use this to your advantage when writing maths. As mentioned earlier, we can use |\[...\]| for display math.


\section{Displayed Equations}


Displayed equations, can either be displayed \emph{flushed left} or \emph{centered}, depending on the option loaded with the standard classes, for example in article use,

\begin{verbatim}
\documentclass[imperial,11pt,openany, twoside,fleqn]{article}
\end{verbatim}

We will see, how to change the formatting in Section~\ref{eqnochange} a bit later on. The idea with \latex that such changes belong to the class and not the author.

\section{Greek letters}

One of the most celebrated equations is Euler's 

\begin{gather}
\frac{1}{1^2} + \frac{1}{2^2} + \frac{1}{3^2} +\dots=\frac{\pi^2}{6}.
\end{gather}
Although the symbol $\pi$ was used earlier, Euler's formula was of such importance that this notation has been adopted ever since. The curious number 1.644934\ldots turns out to be $\tfrac{1}{6}\pi^2$ an astonishing result that did much to enhance Euler's growing reputation.


All the Greek letters are available in \tex{}. For a full list and commentary
see also Table~\vref{greek} in the Chapter \vref{comprehensivesymbols}. 

\begin{table}[htbp]
\centering
\begin{tabular}{llllllll}
\toprule
$\alpha$  &\docAuxCommand{alpha} &$\beta$ &\docAuxCommand{beta} &$\gamma$ &\docAuxCommand{gamma} &$\delta$ &\docAuxCommand{delta}\\
$\epsilon$  &\docAuxCommand{epsilon} &$\varepsilon$ &\docAuxCommand{varepsilon} &$\zeta$ &\docAuxCommand{zeta} &$\eta$ &\docAuxCommand{eta}\\
\bottomrule
\end{tabular}
\end{table}

%Direct Input: Α Β Γ Δ Ε Ζ Η Θ Ι \allowbreak Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ ΩABΓΔEZHΘIKΛMNΞOΠPΣTΥΦXΨΩ 
%\allowbreak α β γ δ ϵ ζ η θ ι κ λ μ ν ξ o π \allowbreak ρ σ τ υ ϕ χ ψ ω ε ϑ ϖ ϱ ς φαβγδϵζηθικλμνξoπρστυϕχψωεϑϖϱςφ
%\begingroup
%\def\K#1{$#1$ & \cmd{#1}}
%\def\Iota{\mathrm{I}}
%\def\Kappa{\mathrm{K}}
%\def\Mu{\mathrm{M}}
%\def\Nu{\mathrm{N}}
%\def\Omicron{\mathrm{O}}
%\def\Tau{\mathrm{T}}
%\begin{longtable}{llllllll}
%A	&|\Alpha| &B &|\Beta|	& $\Gamma$ &|\Gamma|	& $\Delta$ &|\Delta| \\
%\K{E}	&\K{Z}	&\K{H}	&\K\Theta  \\
%\K\Iota &\K\Kappa	  &\K\Lambda	&\K\Mu\\
%\K\Nu	  &\K\Xi     &\K\Omicron	&\K\Pi\\
%\K\Sigma	&\K\Tau	&\K\Upsilon	   &\K\Phi\\
%\end{longtable}
%\endgroup

%

%
%\ChiX \Chi	\PsiΨ \Psi	\OmegaΩ \Omega\\
%\varGammaΓ \varGamma	\varDeltaΔ \varDelta	\varThetaΘ \varTheta	\varLambdaΛ \varLambda\\
%\varXiΞ \varXi	\varPiΠ \varPi	\varSigmaΣ \varSigma	\varUpsilonΥ \varUpsilon\\
%\varPhiΦ \varPhi	\varPsi Ψ \varPsi	\varOmegaΩ \varOmega	\\
%\alphaα \alpha	\betaβ \beta	\gammaγ \gamma	\deltaδ \delta\\
%\epsilonϵ \epsilon	\zetaζ \zeta	\etaη \eta	\thetaθ \theta\\
%\iotaι \iota	\kappaκ \kappa	\lambdaλ \lambda	\muμ \mu\\
%\nuν \nu	\xiξ \xi	\omicronο \omicron	\piπ \pi \\
%\rhoρ \rho	\sigmaσ \sigma	\tauτ \tau	\upsilonυ \upsilon\\
%\phiϕ \phi	\chiχ \chi	\psiψ \psi	\omegaω \omega\\
%\varepsilonε \varepsilon	\varkappaϰ \varkappa	\varthetaϑ \vartheta	\thetasymϑ \thetasym\\
%\varpiϖ \varpi	\varrhoϱ \varrho	\varsigmaς \varsigma	\varphiφ \varphi\\


Sometimes accents are put above or below symbols. The control words used for accents
in mathematics are different from those used for normal text. The normal text control words
may not be used for mathematics and vice-versa.\footnote{\texbook 135-136 }. See also
\href{mathmode.pdf}{http://www.tex.ac.uk/tex-archive/info/math/voss/mathmode/Mathmode.pdf}

\section{Fractions}

In the original \tex there are two ways of typesetting a fraction: it can be typeset as $1/8$ or in the form $\frac{1}{4}$. The first case is entered with no special control characters that is,  \verb+ $1/8$+. The second case is just entered with the control word \cmd{\over}.  Hence\verb+ ${1} \over {8}$+ gives ${1} \over {8}$. 
Plain TeX also provided \docAuxCommand{frac}, which was also adopted by \LaTeX\  and \pkgname{amsmath}.
The |\over| command led to numerous problems and its usage is frowned upon. So do not use it.

A more complex example,

\begin{texexample}{Fractions}{ex:fractions}
\[
\dfrac{a +\gamma}{\delta^2}
\]

\end{texexample}



One complication with using maths in-line with text is that of using different type of fonts. There is a very useful and interesting discussion regarding this in the package \pkg{xfrac} \footcite{xfrac}. 

\begin{latexquotation}
 One of the first exercises in \emph{The \TeX Book} is to design a
 macro for split level fractions. The solution presented is fairly
  simple, using a \emph{virgule} (a slash) for separating the two
  components. It looks okay because the text font and math font of
  Computer Modern look almost identical.\index{virgule}\index{solidus}\index{fractions>virgule}\index{fractions>solidus}

  The proper symbol to use instead of the virgule is a \emph{solidus}\footnote{The solidus (/)} \index{solidus} is a punctuation mark used to indicate fractions including fractional currency. It may also be called a shilling mark, an in-line fraction bar, or a fraction slash. Its Unicode encoding is \texttt{U+2044}.
\end{latexquotation}

The solidus is similar to another punctuation mark, the slash, which is found on standard keyboards; the slash is closer to being vertical than the solidus. These are two distinct symbols that traditionally have entirely different uses. However, many people no longer distinguish between them, and when there is no alternative it is acceptable to use the slash in place of the solidus.
Both the ISO and Unicode designate the solidus as \texttt{FRACTION SLASH U+2044} and the slash as \texttt{SOLIDUS U+002F}. This contradicts long-established English typesetting terminology (See Bringhurst).
  which does not exist in Computer Modern. It is however available in
  the European Computer Modern fonts, but I'll get back to that.

Wills also notes in the |xfrac| documentation package the limitations
of the |nicefrac| package:

\begin{quotation}
  The most common way to produce split level fractions within \LaTeX\
  is by means of the \docpkg{nicefrac} package. Part of the reason it
  has found widespread use is due to the strange design of the
  built-in text fractions of the EC fonts, which look like this:
  \textonehalf. 
\end{quotation}

The package is very simple to use but there are a few
issues:

 \begin{itemize}
  \item It uses the virgule instead of the solidus.
  \item Font size of numerator and denominator is bigger than in the
    built-in symbol. Compare Palatino: \switch{ppl}{\nicefrac{1}{2}}
    vs. \switch{ppl}{\textonehalf }. (\sfrac{1}{2})

  \item It doesn't correct for fonts using text figures such as in the
    \docpkg{eco} package. Compare \switch{cmor}{\nicefrac{1}{2}} and
    \switch{cmor}{\nicefrac{8}{9}}.
  \item In math mode, it doesn't always pick up the correct math
    alphabet.
 \end{itemize}

In short: \pkg{nicefrac} doesn't attempt to be the answer to
everything and so this is not a criticism of the package. It works
quite well for Computer Modern which was pretty much what was widely
available at the time it was developed. Users these days, however,
have a choice of many fonts when they write their documents.

\subsection{Inline fractions, changing fonts}

When a fraction is displayed in inline text $\frac{a}{b}$, it is noticeably smaller than in
displayed mathematics. The \cs{tfrac} and \cs{sfrac} force the use of the respective styles |\textstyle| and |\displaystyle| $\sfrac{a}{b}$ and $\tfrac{a}{b}$. 

With |xfrac| we can switch fonts easily

 ``You take \sfrac[cmr2]{1}{2} cup of sugar, \ldots''
``You take $\tfrac{1}{2}$ cup of sugar, \ldots''

This is more of an issue if you are going to use |XeLaTeX| and 
you are after specific fonts.

An early guide to the typography of fractions appeared in the Notices of the Royal Astronomical Society, Volume 8, Issue 6, 1909. 

\begin{quotation}
First, figures or letters of a smaller size than those to which they are appended have to be set as indices or suffixes; and consequently, except when the expressiosn are of such frequent occurence as to make it worthhwile
to have them cast upon type of the various bodies with which they are used, it becomes necessary to fit these smaller types in their proper positions by special methods. This process, which is called \enquote{justification,}
consists in filling up the difference between the bodies of the larger and smaller types with suitable pieces of metal.

The second difficulty
\end{quotation}

Some guidelines

Instead of $\dfrac{x}{3}$ write $\frac{1}{3}x$

Instead of \(\dfrac{a+b}{2}\) write \(\frac{1}{2}(a+b)\).

\section{Continued fractions}

At first glance nothing seems simpler than writing a number, for example $\frac{9}{7}$ in the form

\[ \frac{9}{7} = 1 + \frac{2}{7} = 1 + \frac{1}{\frac{7}{2}} = 1 + \frac{1}{3 + \frac{1}{2}}=1+\frac{1}{3+\frac{1}{1+\frac{1}{1}}}\]

It is not known when, and by whom continued fractions were first used, but the notion seems to be quite old. Euclid's algorithm for finding the greatest common divisor of two integers in effect converts a fraction into a terminating continued fraction. Continued fractions were used in India in the 12th century by Bhaskaracharya for solving the `Pell' equation. Rafael Bombelli (1526--1572) and Pietro Antonio Cataldi (1548--1626), both of Bologna (Italy), gave continuous fractions for $\sqrt{13}$ and $\sqrt{18}$ respectively. 

The most common notation for continued fractions was introduced in 1898 by Alfred Pringsheim but previously many other notations were used. We can write a continued fraction of this form using the \cs{cfrac} command from the \pkg{amsmath} package. 

\begin{texexample}{Continued fractions}{ex:contfrac}
\begin{equation}
  x = a_0 + \cfrac{1}{a_1 
          + \cfrac{1}{a_2 
          + \cfrac{1}{a_3 + \cfrac{1}{a_4}}}}
\end{equation}
\end{texexample}

\begin{texexample}{Continued Fractions}{ex:cfrac}
\begin{luacode}
function cfrac(a,b,finite)
  local b0,b1,b2,b3 = "b_0","b_1","b_2", "b_3" 
  if type(b)=="number" then 
    b0, b1, b2, b3 = tostring(b),tostring(b),tostring(b),tostring(b)
  end  
  local ddots="\\ddots"
  if finite then 
    ddots = "\\frac{1}{a_n}"
  end  
  local str = a..
    "_0 + \\cfrac{" .. b0 .. "}{"..
     a..
     "_1 + \\cfrac{" .. b1 .."}{" .. 
     a .. 
     "_2 + \\cfrac{" .. b2 .."}{" ..
     a..
     "_3 + \\cfrac{"..b3.."}{"..
     a..
     "_4 + " .. ddots .."}}}}"
  return str         
end
tex.print("\\begin{gather}")
tex.print(cfrac("a","b",true))
tex.print("\\end{gather}")
\end{luacode}
\end{texexample}

The real discoverer of continued fractions, the Italian mathematician Pietro  Cataldi\footnote{Bologna, 1548 - Bologna, 11.2.1626)} used, in 1613, the  notation

{\arraystretch{0}\setlength\arraycolsep{2pt}
\[
\begin{array}{llll}
4 & .  &               &\\
  & \& & \dfrac{2}{8.}  &\\
  &    &               & \& \dfrac{2}{8.}\\
\end{array}
\]
}
which for convenience, he modified to become

\[4.\&\frac{2}{8.}\&\frac{2}{8.}\]
The point signified that the following fraction is a fraction of the denominator. Later in his book, Cataldi placed the point on the same line as the sign \&. 

This can be seen in his approximation of \sqrt{18}.

{\def\arraystretch{3}
\def\temp{.\&\dfrac{2}{8}}
\[
\begin{array}{rl} 
\text{Di 18. la $R$ sia }\quad  & 4\temp\temp\temp \temp \temp\temp\\
\text{\`o vogliamo dire }\quad  & 4\temp\temp\temp\temp\temp.\&\dfrac{1}{4}\\
\text{cio\`e}\quad              & 4\temp\temp\temp\temp.\&\dfrac{8}{33}\\
\text{vogliamo dire}\quad       & 4\temp\temp\temp.\&\dfrac{1}{4}\dfrac{4}{33}\\
\text{che \`e}\quad             & 4\temp\temp\temp.\&\dfrac{33}{136}\\
\text{chio\`e}\quad             & 4\temp\temp.\&\dfrac{272}{1121}\\
\text{\`o vogliamo dire}\quad   & 4\temp.\&\dfrac{1}{4}\dfrac{136}{1121}\\
\text{che \`e}\quad             & 4\temp.\&\dfrac{1121}{4620}\\
\text{chio\`e}\quad             & 4.\&\dfrac{9240}{3801}.''
\end{array}
\]
}
Except for the \enquote{\&} in place of \enquote{+} \textsc{CATALDI}'s notation is quite similar to one of our modern notations.


In 1655, John Wallis used

\begin{gather}
\setlength\arraycolsep{1pt}
\sqrt{18} =  \begin{array}[c]{c}
\dfrac{a}{\alpha}\\ 
\end{array}
\begin{array}[c]{c}
 \\[1em] \dfrac{b}{\beta} \\ 
\end{array}
\begin{array}[c]{c}
 \\[2em] \dfrac{c}{\gamma}\\
\end{array}
\begin{array}[c]{c}
 \\[3em]  \dfrac{d}{\delta}\\
\end{array}
\begin{array}[c]{c}
 \\[4em] \dfrac{e}{\epsilon}\:\:\text{etc.}\\
\end{array}
\end{gather}

To typeset this form of a continuous fraction I have used the |array| environment. We could also replace the arrays with box commands or even use plainTeX |halign| etc.




Leibniz, in a letter to Johan I Bernoulli dated Decmeber 28, 1696 used
\begin{gather}
\setlength\arraycolsep{1pt}
a + \begin{array}[c]{c}
\dfrac{1}{b}
\end{array}
\begin{array}[c]{c}
\underset{\raisebox{-.6em}{+}}{}\\ 
\end{array}
\begin{array}[c]{c}
 \\ \dfrac{1}{c} \\ 
\end{array}
\begin{array}[c]{c}
\underset{\raisebox{-2em}{+}}{}\\ 
\end{array}
\begin{array}[c]{c}
 \\[1.5em] \dfrac{1}{d}\\
\end{array}
\begin{array}[c]{c}
\underset{\raisebox{-3.5em}{+}}{}\\ 
\end{array}
\begin{array}[c]{c}
 \\[3em]  \dfrac{1}{e}\\
\end{array}
\begin{array}[c]{c}
 \\[4.6em]  {+}\:\:\text{etc.}\\
\end{array}
\end{gather}

Christiaan Huygens wrote in a posthumous text published in 1698

\newlength\deltaplus
\newlength\deltaterm

\begin{gather}\label{eq:huygens}
\setlength\arraycolsep{1pt}\def\arraystretch{0}
\setlength\deltaplus{1.3em}
\setlength\deltaterm{1.1em}
\def\ARRPLUS{\begin{array}[c]{c}
\\[\the\deltaplus]{+}\\            %+1 em
\end{array}%
\addtolength\deltaplus{1em}}
\def\ARRTERM#1#2{%
   \ARRPLUS
  \begin{array}[c]{c}
   \\[\the\deltaterm] \dfrac{#1}{#2}  
  \end{array}
  \addtolength\deltaterm{1em}
}%
\def\ARRLASTTERM#1#2{%
  \ARRPLUS
  \begin{array}[c]{c}
   \\[\the\deltaterm] \dfrac{#1}{#2}\:\:\text{etc}  
  \end{array}
}%
%
%
\dfrac{77708431}{2640858} = 29 + \dfrac{1}{2}  
\ARRTERM{1}{2}
\ARRTERM{1}{2} 
\ARRTERM{1}{5}                             
\ARRTERM{1}{1}
\ARRLASTTERM{1}{4}
\end{gather}

In 1834, Maritz Abraham Stern designates the finite continued fraction

\def\cfracc#1#2{\dfrac{#1\vert}{\vert#2}}

\begin{gather}
a + \dfrac{b_1\vert}{\vert a_1} + \cfracc{b_2}{a_2} +\dots+ \cfracc{b_m}{am}
\end{gather}

This is one of the easiest notation to typeset with \tex. But there is one catch. We have a multitude of choices as to what to use as the vertical bar. We have |\vert|, |\mid|, |\lvert|, |\rvert|, |\lVert|, |\rVert|.
The |\vert| is defined in source2e whereas the rest by the amsmath or similar packages. If we read the amsldoc manual, by texdoc amsldoc, we read:

\begin{quote}
The amsmath package provides commands |\lvert|, |\rvert|, |\lVert|, |\rVert| (compare |\langle|, |\rangle|) to address the problem of overloading for the vert bar character $\vert$. This character is currently used in LaTeX documents to represent a wide variety of mathematical objects [\ldots]. The multiplicity of uses in itself is not so bad; what is bad, however, is that fact that not all of the uses take the same typographical treatment, and that the complex discriminatory powers of a knowledgeable reader cannot be replicated in computer processing of mathematical documents. It is recommended therefore that there should be a one-to-one correspondence in any given document between the vert bar character $\vert$ and a selected mathematical notation, and similarly for the double-bar command \cs{|}. This immediately rules out the use of $\vert$ and \cs{|} for delimiters, because left and right delimiters are distinct usages that do not relate in the same way to adjacent symbols; recommended practice is therefore to define suitable commands in the document preamble for any paired-delimiter use of vert bar symbols:
\end{quote}
In short the general advice is to create our own command.
In the next example I define the macro |\cfracc| to type it. The macro takes two parameters, one for the numerator and another for the denominator.\footnote{I have used the prefix \cs{cf} to prefix commands in this package as is a good mnemonic for continued fraction.}

\begin{texexample}{Stern's notation}{ex:stern}
\def\cfvertsymbol{\lvert}
\def\cfracc#1#2{\dfrac{#1\cfvertsymbol}{\cfvertsymbol#2}}
\[
a + \dfrac{b_1\vert}{\vert a_1} + \cfracc{b_2}{a_2} +\dots+ \cfracc{b_m}{am}
\]
\end{texexample}



\textsc{Knopff} in \emph{Theory and application of Infinite Series} used the notation for infinite continued fractions,
\newcommand{\cfK}{%
  \mathop{ % we want it to be an operator
    \mathchoice{\docfK\Huge}
               {\docfK\Huge}
               {\docfK\Huge}
               {\docfK\huge}
    }\displaylimits % not necessary, but added for clarity
}

\newcommand{\docfK}[1]{%
  \vcenter{#1\kern.2ex\hbox{$\mathrm{K}$}\kern.2ex}}
  
\begin{gather}
b_0 + \cfK_{n=1}^{\infty} \dfrac{a_n}{b_n}
\end{gather}

He wrote,

Here the sequence $(x_n)$ under examination is fomred by means of two other sequences $(a_1,a_2,\dots)$ and
$b_0,b_2,\dots$, by writing:

\[x_0=b_0, x_1=b_0 +\dfrac{a_1}{b_1}, \]

\[b_0 + \cfracc{a_1}{b_1}\]

An expression of the form
\begin{luacode}
tex.print("\\begin{gather}") 
local str = cfrac("a",1)
tex.print(str)
tex.print("\\end{gather}")
\end{luacode}
is called a \textit{continued fraction}. In general, the numbers $a_1,a_2,a_3,\ldots$,$b_1,b_2,b_3,\ldots$, may be any real or complex numbers, and the number of terms may be finite or infinite.

Here we will only deal with \textit{simple continued fractions.} These have the form
\begin{luacode}
tex.print("\\begin{gather}") 
local str = cfrac("a",1, true)
tex.print(str)
tex.print("\\end{gather}")
\end{luacode}

Some authors write continued fractions as 
\[ \frac{67}{29} = [2,3,4,2] \]

A more complicated way to write continued fractions is the old style found in some books. To use such a style
we need to use |\underset| and define a couple of commands for convenience.
\begin{teX}
\def\bottomplus{%
 \underset{\raisebox{.4ex}{ + }}{ }%
}
\def\bottomdots{%
 \underset{\raisebox{.35ex}{\ldots}}{ }%
}
\end{teX}

\def\bottomplus{%
 \underset{\raisebox{.4ex}{ + }}{ }%
}
\def\bottomdots{%
 \underset{\raisebox{.3ex}{\ldots}}{ }%
}


\begin{gather}
  \sqrt{18} = 4 + \frac{2}{8} \bottomplus \frac{2}{8} \bottomplus \frac{2}{8} \bottomplus \bottomdots
\end{gather}

Another method is using |\over|.

\begin{texexample}{Continued fraction notation}{ex:contfrac}
or in another related notation as

\[ x = a_0 + {1 \over a_1 + {}} {1 \over a_2 + {}} {1 \over a_3 {}}. \]

Sometimes angle brackets are used, like this:

\[ x = \left \langle a_0; a_1, a_2, a_3 \right \rangle. \]

\end{texexample}


\section{Square roots}

Symbols used for square roots go back to the time of the Egyptians. 

The principal symbolisms for the designation of roots, which have been developed since the influx of Arabic learning in Europe in the twelfth century, fall into four groups. 

The sign {\panunicode ℞} came to be used very extensively for \enquote{route} but occassionally it stood also for the first power of the unknown quantity, $x$.

\subsection*{Napier's line notation}

John Napier prepared a manuscript on algebra that was not printed until 1839. He made use of Stifel's notation for radicals, but at the same time devised a new scheme of his own. His notation was derived from this figure.

\[\arrayrulewidth1pt
\begin{array}{c|c|c}
1&2&3\\
\hline
4&5&6\\
\hline
7&8&9\\
\end{array}
\]


He took this simple combination
of equal \scalebox{0.5}{\begingroup\arrayrulewidth2pt$\begin{array}{c|c|c}
\Zi&\Zi&\Zi\\
\hline
\Zi&\Zi&\Zi\\
\hline
\Zi&\Zi&\Zi\\
\end{array}$\endgroup} intersecting each other at equal
intervals. In the nine compartments, which this figure
presents, he inserted the nine numerals,---for the sake, he
says, of assisting the memory, From the natural arrangement of the figures within it is easy to remember the number appertaining to each compartment. Separate the
compartments thus, \raisebox{-.35\height}{\includegraphics[scale=0.5]{napier-sqrt}} and still the memory will retain
the relation of each to the original form, even when the
numerals are withdrawn. By this simple process there is
actually obtained an equivalent for the nine significant digits
of Arithmetic, susceptible of the same combinations, yet perfectly
distinct in character.

Note that I have included an inline image in the above paragraph. In the Chapter for images you can get more details as to how to include images and adjust them relatively to the baseline. There are many methods, but perhaps the easiest is to include it in a tabular environment such as an |array| or |tabular| as they automatically center their content.
Back to our description of Napier's methods, if we are to progress further we need to define macros for the roots. 

\newcommand\napierroot{{\setlength\arraysep{0pt}
\renewcommand\arraystretch{1.5}
\arrayrulewidth1pt
\scriptsize
\mbox{\begin{array}{|c|}
\phantom{2}\\
\hline
\end{array}\:}
}}

\newcommand\napierrootv{{\setlength\arraysep{0pt}
\renewcommand\arraystretch{1.5}
\scriptsize
\mbox{\begin{array}{|c|}
\hline
\phantom{2}\\
\hline
\end{array}}
}}

Napier used $^2\napierroot\,\dfrac{22}{4}$ next to a number to indicate its root. The fifth root denoted by $\napierrootv x$.

We define a symbol to denote it $+5\mathcal{t}\mathcal{T}$.
\begin{texexample}{Napier's line symbolism}{ex:napierroot}
\def\napierrootv{{\setlength\arraysep{0pt}
\renewcommand\arraystretch{1.5}
\scriptsize
\mbox{\begin{array}[t]{|c|}
\hline
\phantom{2}\\
\hline
\end{array}}
}}
The fifth root using Napier's line symbolism $\napierrootv$
\end{texexample}

It is instructive to stop for a moment and review the various settings for an array environment. 


The symbol $\surd$ we use today, originated in Germany. Four manuscripts algebras have been available for the study of this. We can also use unicode symbols but they will be more difficult to match with fonts. {\panunicode √52}  


Another notation is 
$\begin{array}{c}
\mbox{\includegraphics[scale=0.5]{sqrt}}
\end{array}
$ and $\begin{array}{c}
\mbox{\includegraphics[scale=0.35]{radix}}
\end{array}
$

\subsection*{John Wallis (1656)}

John Wallis\footcite{wallis} used the symbol $\surd c$, $\surd qq$ for cube root, fourth root. Later in Proposition 73 he changes to the notation given as $\surd^3, \surd^4$


\begin{gather}
\begin{array}{@{}llll l l@{}}
\text{the series }          & \surd^2 0a,        &\surd^2 1a,         &\surd^2 2a,         &\surd^2 3a,           &\text{etc.}\\
\text{by the series }       & \surd^5 0b,        &\surd^5 1b,         &\surd^5 2b,         &\surd^5 3b,           &\text{etc.}\\
\text{that is, the series } & \surd^{10}0a^5,    & \surd^{10} 1a^5,   &\surd^{10}32a^5,    &\surd^{10} 243a^5,    &\text{etc.}\\
\text{by the series }       & \surd^{10}0b^2,    &\surd^{10} 1b^2,    &\surd^{10}4b^2,     &\surd^{10} 9b^2,      &\text{etc.}\\
\text{it will produce}      & \surd^{10}0a^5b^2, &\surd^{10} 1a^5b^2, &\surd^{10}128^5b^2, &\surd^{10}2187a^5b^2, &\text{etc.}\\ 
\end{array}
\end{gather}
And this holds similar in other multiplications of this kind.

\subsection*{John Kersey's notation (1673)}

A curious notation, was used by Kersey. He used $\surd(2)\!\colon\!\!\!\overline{\frac{1}{2}r - \sqrt{\frac{1}{4}rr-s}}\colon$  for 
$\sqrt{%
  \frac{1}{2}r-\sqrt{%
                     \frac{1}{4}r^2-s%
                    }%
      }$. 

We observe here the superposition of two notations for aggregation, the
Oughtredian colon placed before and after the binomial, and the vinculum. Either of these without the other would have been sufficient



The LaTeX/TeX for the |\sqrt|  is simple enough and intuitive. $\surd12 \sqrt{12}$.

\begin{texexample}{Square Roots}{}
$\sqrt{x^2+y^2}$
\end{texexample}




Notice that \tex takes care of the placement of
symbols and the height and length of the radical. To make cube or other roots, the control
words \cs{root} and \cs{of} are used. These two commands are \tex primitives. \latexe
\cs{sqrt} takes an optional argument for the root.

\begin{texexample}{nth roots}{ex:nroot}
   \[\root n \of  {1+x^n}\]
   
   \[\sqrt[n]{1+x^n}\]
\end{texexample}

\begin{docCommand}{surd}{}
 A possible alternative is to use the control word \cs{surd}; the input  \verb+ \( \surd 2 \)+ will
produce \(\surd 2\) instead of \(\sqrt{2}\). When typesetting square roots care should be taken, to use struts appropriately to get the sizing right. The square root symbol on its own can be obtained by using
\cs{sqrtsign} to get $\sqrtsign{}$.
\end{docCommand}

When typesetting roots, sometimes there are issues with heights. The following example
from \citetitle{mathmode}\footcite{mathmode} illustrates the point.

\begin{equation}
 \sqrt{a}\,%
 \sqrt{T}\,%
 \sqrt{2\alpha k_{B_1}T^i}\label{eq:root1}
\end{equation}

This can be corrected using \cs{vphantom}. 

\begin{texexample}{Correcting height issues}{ex:sqrtheights}
\begin{equation}\label{eq:root2}
 \sqrt{a\vphantom{k_{B_1}T^i}}\,%
 \sqrt{T\vphantom{k_{B_1}T^i}}\,%
 \sqrt{2\alpha k_{B_1}T^i}
\end{equation}

\begin{equation}
x = \sqrt[3]{6+\sqrt[3]{6+\sqrt[3]{6+\sqrt[3]{6+\cdots}}}}
\end{equation}
\end{texexample}

Using \pkg{amsmath} \docAuxCommand{smash} can be used for even better results when
using inline or displayed roots. It must be noted that \cs{smash} in \latexe is defined
without such an optional argument.

\makeatletter
\renewcommand{\smash}[1][tb]{%
\def\mb@t{\ht}\def\mb@b{\dp}\def\mb@tb{\ht\z@\z@\dp}%
\edef\finsm@sh{\csname mb@#1\endcsname\z@\z@ \box\z@}%
\ifmmode \@xp\mathpalette\@xp\mathsm@sh
\else \@xp\makesm@sh
\fi
}

\makeatother
This is a test $\sqrt{\lambda_{ki}}$ and $\smash[tb]{\sqrt{\lambda_{ki}}} $ 
\meaning\smash

\refCom{smash}{ \oarg{position}\marg{argument} }

The optional argument for the position can take three values: \textbf{t} keeps the bottom and annihilates the top, \textbf{b} keeps the top and annihilates the bottom and \textbf{tb} which annihilates top and bottom. The latter is the default.


The \pkgname{mathtools} interferes with some of these?

\subsection{Other spacing adjustments}

The root can also be moved right or left using \docAuxCommand{leftroot} and \docAuxCommand{uproot}.



\section{Trigonometric and other Functions}

There are several types of functions that appear frequently in mathematical text. In
an equation like $\sin2x+\cos2x=1$ the trigonometric functions \cs{sin} and \cs{cos} are in
roman rather than italic type. This is the usual mathematical convention to indicate that
it is a function being described and not the product of three variables. The control words
\cs{sin} and \cs{cos} will use the right typeface automatically. 
Here is a table of these and some other special functions:

\begin{texexample}{Trigonometric Functions}{}
\[
\sin, \cos, \tan, \cot, \sec, \csc, \arcsin, \arccos,
\arctan \sinh \cosh \tanh \coth \lim \sup \inf
\]

\begin{math}
\limsup \liminf \log \ln \lg \exp \det \deg
\dim \hom \ker \max \min \arg \gcd \Pr
\end{math}

\begin{math}
\cos(2\theta) = 2 \cos^{2}2 \theta-1
\end{math}
\end{texexample}

Functions that are missing from a basic installations can be either defined or one can use one of the many packages that supplement the above.

The distinction between algebra and geometry is an artificial one; both are parts of the same subject.

\subsection*{Bhaskara I sine formula}

In mathematics, Bhaskara I's sine approximation formula is a rational expression in one variable for the computation of the approximate values of the trigonometric sines discovered by Bhaskara~I (c. 600 – c. 680), a seventh-century Indian mathematician. This formula is given in his treatise titled Mahabhaskariya. It is not known how Bhaskara~I arrived at his approximation formula. However, several historians of mathematics have put forward different hypotheses as to the method Bhaskara might have used to arrive at his formula. The formula is elegant, simple and enables one to compute reasonably accurate values of trigonometric sines without using any geometry whatsoever.

In modern mathematical notations, for an angle $x$ in degrees, this formula gives

\begin{gather} \sin x^\circ \approx \frac{4 x (180-x)}{40500 - x(180-x)} \end{gather}


Bhaskara I's sine approximation formula can be expressed using the \emph{radian} measure of angles as follows.

\begin{gather}\sin x \approx \frac{16x (\pi - x)}{5\pi^2 - 4x (\pi - x)}.\end{gather}



Trigonometric ratios can be expressed in terms of each other:

\begin{alignat}{2}
\sin \theta &= \frac{MP}{OP}  &= \frac{s}{1}=s,        &                       \\
\cos \theta &= \frac{OM}{OP} &= \sqrt{1-s^2}           &=\sqrt{1-\sin^2\theta},\\
\tan \theta &= \frac{MP}{OM} &= \frac{s}\sqrt{1-s^2}   &=\frac{\sin \theta}{\sqrt{1-sin^2\theta}}\\
\cot \theta &= \frac{OM}{MP} & = \frac{\sqrt{1-s^2}}{s}&=\frac{\sqrt{1-\sin^2\theta}}{\sin\theta}\\
\operatorname{cosec}\theta  &= \frac{OP}{MP} & = \frac{1}{s}=\frac{1}{\sin\theta}, &
\end{alignat}

A variant environment alignat allows the horizontal space between equations
to be explicitly specified. This environment takes one argument, the number
of equation columns (the number of pairs of right-left aligned columns; the
argument is the number of pairs): count the maximum number of \&s in any row,
add 1 and divide by 2.

[expand on all environments]

[Analytical trigonometry]




Let $(a,b,c)$ be a Pythagorean triple. Dividing both sides of the defiing equation

\begin{gather}
  a^2 + b^2 = c^2
\end{gather}
by $c^2$ gives

\begin{gather}
(a/c)^2 + (b/c)^2 = 1,
\end{gather}
so that the triple gives an ordered pair of positive \emph{rational numbers}

\begin{lemma} Let (g,h) be a point other than (-1,0) lying on the unit circle, 
and let l be the line joining these two points. Then f has the equation y == 
t(x + 1), where t == h/(g + 1), 

\begin{align}
  g &= \frac{1-t^2}{1+t^2}\\
\intertext{and}  
 h  &= \frac{2t}{1+t^2}
\end{align}

\end{lemma}

Trigonometric functions first arose over 3000 years ago in relation to 
right triangles (the word trigonometry means \enquote{triangle measure}). 
Let $\triangle ABC$ be a right triangle with side lengths $a, b$ and $c$, and let $\alpha$ 
be one of its acute angles. 



\begin{Rule} Use \texttt{PGFPlots} for plotting functions.
\end{Rule}

\begin{Rule} For the degree symbol use the angle (|\ang|) command from the |siunitx| package. This is provides a semantic command.\footnote{See \protect\url{https://tex.stackexchange.com/questions/384873/what-is-the-degree-symbol} for a discussion.}
\end{Rule}

\begin{Exercise}
Plot $z = sin(x) \cdot sin(y)$ in the range $\ang{0}$ to $\ang{360}$
\end{Exercise}

\begin{tikzpicture}
\begin{axis}
\addplot3[
surf,
domain=0:360,
samples=40,
] {sin(x)*sin(y)};
\end{axis}
\end{tikzpicture}
\begin{tikzpicture}
\begin{axis}
\addplot3[
surf,
domain=0:360,
samples=40,
] {cos(x)*cos(y)};
\end{axis}
\end{tikzpicture}

\begin{tikzpicture}
\begin{axis}
\addplot3[
surf,
domain=0:360,
samples=40,
] {sin(x)+cos(y)};
\end{axis}
\end{tikzpicture}
\begin{tikzpicture}
\begin{axis}
\addplot3[
surf,
domain=0:180,
samples=40,
] {sin(x*x)+cos(y*y)};
\end{axis}
\end{tikzpicture}

\begin{tikzpicture}
\begin{axis}
\addplot gnuplot [
id=sin,
] {sin(x)};
\end{axis}
\end{tikzpicture}


\begin{tikzpicture}
\begin{axis}[
xmin=-2,
ymin=-2,
xlabel= $x$,
ylabel= $y$,
grid=major,
]
\addplot[
domain=-1.5:2,
samples=40,
] {e^x-1};
\end{axis}
\end{tikzpicture}

\begin{tikzpicture}
\begin{axis}[
axis line=center,
xmin=-5.5,
ymin=-4,
xlabel= $x$,x label style={right},
ylabel= $y$,y label style= {above},
grid=major,
]
\addplot[
domain=-5.5:3,
samples=100,
] {1+x+x^2/2+x^3/6+x^4/24};
\end{axis}
\end{tikzpicture}


\begin{tikzpicture}
\datavisualization [school book axes, visualize as smooth line]
data [format=function] {
var x : interval [-1.3:1.3];
func y = \value x*\value x*\value x;
};
\end{tikzpicture}


\section{Symbols, Shortcuts and Semantic Aliasing}

Although Journals recommend not to alias LaTeX commands the harsh reality is that each topic and paper has different needs for notations and things can get messy.

Consider papers written for computations of floating algorithms. We might find in preambles definitions like, 
{\parskip0pt\large
\begin{verbatim}
%% Floating-point machine operations.
\newcommand{\mop}{\boxcircle}
\newcommand{\madd}{\boxplus}
\newcommand{\msub}{\boxminus}
\newcommand{\mmul}{\boxdot}
\newcommand{\mdiv}{\boxdiag}
\end{verbatim}
}
\newcommand{\mop}{\boxcircle}
\newcommand{\madd}{\boxplus}
\newcommand{\msub}{\boxminus}
\newcommand{\mmul}{\boxdot}
\newcommand{\mdiv}{\boxdiag}

I consider aliasing of non-semantic commands to semantic commands, such as the machine operation |\mop| from |\boxcircle| as good practice. 

\begin{texexample}{Example with macro aliasing}{ex;aliasing}
\begin{Definition} \summary{(Absorption.)}
Let $x, y, z \in \Fset$ with $y, z \in \Rset$,
let $\mathord{\mop}$ be any IEEE~754 floating-point operator,
and let $x = y \mop z$.
Then $y \mop z$ gives rise to \emph{absorption} if
\begin{itemize}
\item
$\mathord{\mop} = \mathord{\madd}$
and either $x = y$ and $z \neq 0$, or $x = z$ and $y \neq 0$;
\item
$\mathord{\mop} = \mathord{\msub}$
and either $x = y$ and $z \neq 0$, or $x = -z$ and $y \neq 0$;
\item
$\mathord{\mop} = \mathord{\mmul}$
and either $x = \pm y$ and $z \neq \pm 1$, or $x = \pm z$ and $y \neq \pm 1$;
\item
$\mathord{\mop} = \mathord{\mdiv}$,
$x = \pm y$ and $z \neq \pm 1$.
\end{itemize}
\end{Definition}
\end{texexample}


The most obvious shortcuts should be for calligraphic or fraktur math alphabets.


\begin{texexample}{Calligraphic Alphabet}{ex:callalphabet}
\providecommand*{\cA}{\ensuremath{\mathcal{A}}}
\providecommand*{\cB}{\ensuremath{\mathcal{B}}}
\providecommand*{\cC}{\ensuremath{\mathcal{C}}}
\providecommand*{\cD}{\ensuremath{\mathcal{D}}}
\providecommand*{\cE}{\ensuremath{\mathcal{E}}}
\providecommand*{\cF}{\ensuremath{\mathcal{F}}}
\providecommand*{\cG}{\ensuremath{\mathcal{G}}}
\providecommand*{\cH}{\ensuremath{\mathcal{H}}}
\providecommand*{\cI}{\ensuremath{\mathcal{I}}}
\providecommand*{\cJ}{\ensuremath{\mathcal{J}}}
\providecommand*{\cK}{\ensuremath{\mathcal{K}}}
\providecommand*{\cL}{\ensuremath{\mathcal{L}}}
\providecommand*{\cM}{\ensuremath{\mathcal{M}}}
\providecommand*{\cN}{\ensuremath{\mathcal{N}}}
\providecommand*{\cO}{\ensuremath{\mathcal{O}}}
\providecommand*{\cP}{\ensuremath{\mathcal{P}}}
\providecommand*{\cQ}{\ensuremath{\mathcal{Q}}}
\providecommand*{\cR}{\ensuremath{\mathcal{R}}}
\providecommand*{\cS}{\ensuremath{\mathcal{S}}}
\providecommand*{\cT}{\ensuremath{\mathcal{T}}}
\providecommand*{\cU}{\ensuremath{\mathcal{U}}}
\providecommand*{\cV}{\ensuremath{\mathcal{V}}}
\providecommand*{\cW}{\ensuremath{\mathcal{W}}}
\providecommand*{\cX}{\ensuremath{\mathcal{X}}}
\providecommand*{\cY}{\ensuremath{\mathcal{Y}}}
\providecommand*{\cZ}{\ensuremath{\mathcal{Z}}}
\begin{luacode}
local alphabet = {"A","B","C","D","E","F","G","H","I","J","K","L",
                  "M","N","O","P","Q","R","S","T","U",
                  "V","W","X","Y","Z"}
for k,v in pairs(alphabet) do
	tex.print("\\c"..v..", ")
end
\end{luacode}
\end{texexample}


\section{Calculus}



\subsection*{Differentiation}
Leibnitz invented the transmutation theorem for finding the area under a curve. Finding areas beneath curves
was 


\subsection*{Integration}

\subsection*{Limits}

\marginpar{\includegraphics[width=3cm]{bolzano}
{\scriptsize\RaggedLeft Bolzano begins his work by explaining what he means by theory of science, and the relation between our knowledge, truths and sciences. Human knowledge, he states, is made of all truths (or true propositions) that men know or have known. This is, however, only a very small fraction of all the truths that exist, although still too much for one human being to comprehend. Therefore, our knowledge is divided into more accessible parts. Such a collection of truths is what Bolzano calls a science (Wissenschaft). It is important to note that not all true propositions of a science have to be known to men; hence, this is how we can make discoveries in a science.}}

\textbf{Bolzano} Although implicit in the development of calculus of the 17th and 18th centuries, the modern idea of the limit of a function goes back to Bolzano who, in 1817, introduced the basics of the epsilon-delta technique to define continuous functions. However, his work was not known during his lifetime.\footcite{coolidge} The first publication in English had to wait for almost 150 years and it was published by Coolidge in 1949 in his popular work \emph{The Mathematetics of Great Amateurs.} Grattan-Guiness\footcite{grattan-guiness} falls short though of accusing Cauchy of plagiarizing the work of Bolzano and other contemporaries.


\textbf{Cauchy} discussed variable quantities, infinitesimals, and limits and defined continuity of {$\displaystyle y=f(x)$} $y=f(x)$ by saying that an infinitesimal change in $x$ necessarily produces an infinitesimal change in $y$ in his 1821 book \emph{Cours d'analyse}, while (Grabiner 1983) claims that he only gave a verbal definition. 

\textbf{Weierstrass} first introduced the epsilon-delta definition of limit in the form it is usually written today. He also introduced the notations $\lim$ and $\lim x\rightarrow x_0$. The notation which has been used widely at the time in Europe was
$\operatorname{Lim}_{x=a}$, to express the \enquote{the limit as $x$ approaches $a$.} It is found in papers of Weierstrass, who in 1841 wrote $\lim$ and in 1854 \enquote{$\underset{n=\infty}{\operatorname{Lim.}}\:p_n = \infty $}

In later publications we find $\operatorname{Lim}$ without the point, but still capitalized. I particularly like the way the equations were grouped and the limit indicated by cases and shown in fig.~\ref{weis}.

\begin{figure}[htbp]
\centering
\includegraphics[width=0.8\textwidth]{weistrass}
\caption{Extract from Weierstrass publication.}
\label{weis}

\end{figure}

To create a new operator symbol we can use \cs{operatorname}. The command will take care of spacing, whereas if we use only
|\mathrm| it will not. If we were to use it frequently we could also define a macro using \cs{DeclareMathOperator} from amsmath. 

\begin{texexample}{operatorname}{ex:onames}

$$\operatorname{Lim.}p_n$$

$$\operatorname{Lim}.p_n$$

$$\mathrm{Lim.}p_n$$ 
\end{texexample}

By the early 1900's the notation started approaching more to what is commonly used in today's publications.

\textbf{Hardy} The modern notation of placing the arrow below the limit symbol is due to Hardy in his book \emph{A Course of Pure Mathematics} in 1908, however in the preface to the book he credits Leathem and Bromwich\footcite{bromwich}.\footnote{Hardy wrote ... there are two respects in which I have diverted ...} 


\begin{gather}
\begin{aligned}
f(a) &= f\left[\lim_{k\rightarrow\infty} x_k \right]=\lim_{k} f(x_k)\le 0 & \text{ and }\\
f(a) &= f\left[\lim_{k\rightarrow\infty} X_k \right]=\lim_{k} f(X_k)\ge 0. & \\  
\end{aligned}
\end{gather}

In Cauchy's words, these inequalities established that ``the quantity
$f(a)$ \ldots cannot differ from zero.'' He had thus proved the existence of a
number a between $x$ and $X$ for which $f(a) = O$. The general version of the
intermediate value theorem, namely that a continuous function takes all
values between $f(x_0)$ and $f(X)$, follows as an easy corollary.
This was a remarkable achievement. Cauchy had, for the most part,
succeeded in demonstrating a "self-evident" principle by analytic methods.


Apart from open intervals, limits can be defined for functions on arbitrary subsets of R, as follows.  Let $f$ be a real-valued function defined on a subset $S$ of the real line.  Let $p$ be a limit point of ''S'' that is, ''p'' is the limit of some sequence of elements of ''S'' distinct from p.  The limit of ''f'', as ''x'' approaches ''p'' from values in ''S'', is ''L'' if, for every {{nowrap|''ε'' > ''0''}}, there exists a δ > ''0'' such that {{nowrap|0 < {{abs|''x'' − ''p''}} < ''δ''}} and {{nowrap|''x'' ∈ ''S''}} implies {{nowrap|{{abs|''f''(''x'') − ''L''}} < $\epsilon$.

This limit is often written

\[
L = \underset{x\in S}{\lim_{x\to p}} f(x).
\]

The condition that $f$ be defined on $S$ is that $S$ be a subset of the domain of $f$.  This generalization includes as special cases limits on an interval, as well as left-handed limits of real-valued functions (e.g., by taking ''S'' to be an open interval of the form $(-\infty,a)$, and right-handed limits (e.g., by taking ''S'' to be an open interval of the form $(a,\infty)$. It also extends the notion of one-sided limits to the included endpoints of (half-)closed intervals, so the Square root function $f(x)=\sqrt{x}$ can have limit 0 as $x$ approaches 0 from above.




\section*{Fraktur letters}

Individual Fraktur letters are sometimes used in mathematics, which often denotes associated or parallel concepts by the same letter in different fonts. For example, a Lie group is often denoted by ''G'', while its associated Lie algebra is $\mathfrak{g}$. 
A ring ideal might be denoted by $\mathfrak{a}$ (or $\mathfrak{p}$ if a prime ideal) while an element is $a \in \mathfrak{a}$. The Fraktur $\mathfrak c$ is also sometimes used to denote the cardinality of the continuum, that is, the cardinality of the real line. In model theory, $\mathfrak{A}$ is used to denote an arbitrary model, with ''A'' as its universe. Fraktur is also used in other ways at the discretion of the author.


\begin{luacode}
local alphabet = {"A","B","C","D","E","F","G","H","I","J","K","L",
                  "M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"}
for k,v in pairs(alphabet) do
	tex.print("\\mathfrak{"..v.."}, ")
end
\end{luacode}

Special symbols such as dingbats loaded using the \pkg{pifont} package need to be enclosed within an \docAuxCommand{mbox} in order to be able to display the glyph properly.
\bigskip

\begin{texexample}{Using special dingbat symbols}{}
\label{e14}
 We start by showing that the function $f(x)=x^2$ is
continuous over the set $X_2$\label{p:X2} defined as the interval
$[0,1]$ where numerals $\frac{i}{\mbox{\ding{172}}}, 0 \le i \le
\mbox{\ding{172}},$ are used to express its points in units $\mu$.
First of all, note that the set $X_2$ is continuous in   $\mu$
because its points are equidistant with the distance
$d=\mbox{\ding{172}}^{-1}$. Since this function is strictly
increasing,  to show its continuity it is sufficient to check the
difference $f(x)-f(x^{-})$ at the point $x=1$. In this case,
$x^{-}=1-\mbox{\ding{172}}^{-1}$ and we have
\[
 f(1)-f(1-\mbox{\ding{172}}^{-1})=
 1-(1-\mbox{\ding{172}}^{-1})^2 =
 2\mbox{\ding{172}}^{-1}(-1)\mbox{\ding{172}}^{-2}.
\]
This number is infinitesimal, thus $f(x)=x^2$ is continuous over
the set $X_2$. \hfill $\Box$
\end{texexample}

\cs{Box}
Notice the use of the \docAuxCommand{Box} command to draw a square for  end of proof symbol. This is from the amsmath package. The box is placed at the end of the line using |\hfill $\Box$|.

%
%\begin{Rule}
%Alias common symbols to semantic macro names that follow their mathematical definitions.
%\end{Rule}
%
%\begin{Rule}
%Create shorcut commands with moderation for alphabets and algebras and alias if necessary. Good practice, sets etc.
%\end{Rule}



\section{Partial derivatives}

Partial derivatives can be typeset using the \latex{} command \cs{partial}

\begin{texexample}{Partial Derivatives}{ex:partial}
\[
dS = \frac{\partial S}{\partial x}\, dx
   + \frac{\partial S}{\partial y}\, dy
   = \left(y - \frac{2V}{x^2}\right) dx
   + \left(x - \frac{2V}{y^2}\right) dy.
\]
\meaning\partial
\end{texexample}


This is using a certain style. For other styles it maybe more difficult.

\section*{Binomial Coefficients}

To typeset binomial coefficients or similar structures, use the command
\cs{binom} from \pkg{amsmath}\index{amsmath>binom}

\begin{texexample}{Binomial}{ex:binomial0}
\[
\begin{align}
(x+y)^3 & = x^3 + 3x^2y + 3xy^2 + y^3, \\[8pt]
(x+y)^4 & = x^4 + 4x^3y + 6x^2y^2 + 4xy^3 + y^4, \\[8pt]
(x+y)^5 & = x^5 + 5x^4y + 10x^3y^2 + 10x^2y^3 + 5xy^4 + y^5, \\[8pt]
(x+y)^6 & = x^6 + 6x^5y + 15x^4y^2 + 20x^3y^3 + 15x^2y^4 + 6xy^5 + y^6, \\[8pt]
(x+y)^7 & = x^7 + 7x^6y + 21x^5y^2 + 35x^4y^3 + 35x^3y^4 + 21x^2y^5 + 7xy^6 + y^7.
\end{align}
\]
\end{texexample}


Pascal's rule can be typeset as:


\begin{texexample}{Binomial Distribution}{ex:binomial}
\[
\binom{n}{k} =\binom{n-1}{k}
+ \binom{n-1}{k-1}
\]
\end{texexample}



\section[Symbols and Abbreviations]{Symbols and Abreviations}
\label{math:abbreviations}

\label{abbr}\label{symbols}%

\begin{texexample}{Creating symbols}{ex:parallelogram}
\newlength{\dentwidth}\setlength{\dentwidth}{\textwidth}
\addtolength{\dentwidth}{-\parindent}

\makeatletter
\gdef\@parallelogram#1{%
  \textnormal{\setbox\z@\hbox{#1/}\dimen@\wd\z@
   \@tempdima 2.45\dimen@
   \vbox{\offinterlineskip
      \hbox{\kern.8\dimen@\vrule\@width\@tempdima\@height.4\p@}%
      \kern-.0\p@
      \hbox to\@tempdima{#1/\hfil\rlap/}%
      \kern-.5\p@
      \hbox{\kern.1\dimen@\vrule\@width\@tempdima\@height.4\p@}}}}
      
 \gdef\Par{%
   \mathchoice
      {\@parallelogram\scriptsize}%
      {\@parallelogram\scriptsize}%
      {\@parallelogram\tiny}%
      {\@parallelogram\tiny}}

            



\begin{tabular*}{\dentwidth}{rl@{\extracolsep{\fill}}l@{\extracolsep{0pt}}@{\dots}l}

$>$ & is (or are) greater than. & Def. & definition. \\
$<$ & is (or are) less than. & Ax. & axiom. \\
$\Bumpeq$ & is (or are) equivalent to. & Hyp. & hypothesis. \\
$\therefore$ & therefore. & Cor. & corollary. \\
$\perp$ & perpendicular. & Scho. & scholium. \\
$\perp_s$ & perpendiculars. & Ex. & exercise. \\
$\parallel$ & parallel.\qquad $\parallel_s$ parallels. & Adj. & adjacent. \\
$\angle$ & angle.\qquad $\angle_s$ angles. & Iden. & identical. \\
$\triangle$ & triangle.\qquad $\triangle_s$ triangles. & Const. & construction. \\
$\Par$ & parallelogram. & Sup. & supplementary. \\
$\Par_s$ & parallelograms. & Ext. & exterior. \\
$\odot$ & circle.\qquad $\odot_s$ circles. & Int. & interior. \\
rt. & right.\qquad  st.\ straight. & Alt. & alternate. \\
\end{tabular*}


\hbox{\qed\ stands for quod erat demonstrandum, \emph{which was to be proved}.\hss}

\newcommand{\qef}{\textsc{q.e.f.}}
\qef\ stands for quod erat faciendum, \emph{which was to be done.}

The signs $+$, $-$, $\times$, $\div$, $=$, have the same meaning as in Algebra.

\makeatother   
\end{texexample}
   
\section{Afixing symbols to other symbols}

\latex provides \docAuxCommand{stackrel} for placing a superscript above a binary relation. In the \pkg{amsmath} package there are somewhat more general commands \docAuxCommand{overset} and \docAuxCommand{underset}, that can be used to place one symbol above or below another symbol, whether is a relation or something else. Oberdiek's package \pkg{stackrel}\footcite{stackrel} extends the syntax by adding an optional argument for the subscript position. It follows the syntax of extensible arrows of the packages |amsmath| and |mathtools|.

\begin{docCommand}{stackrel}{\oarg{subscript}\marg{superscript}{\marg{rel}}}
  Typeset a subscript or superscript above a symbol.
\end{docCommand}

\ifSTACKREL
\begin{texexample}{Example of stackrel and stackbin}{ex:stackrel}
\[
 A \stackbin[\text{and}]{}{+} B \stackrel[x]{!}{=} C
\] 
\end{texexample}
\else
\begin{texcode}{Example of \cs{stackrel} and \cs{stackbin}}{ex:stackrel}
  Example cannot be shown as the package stackrel is not loaded.
\end{texcode}
\fi


\chapter{Matrices and Mathematical Environments}
\label{matrices}

\section{Matrices}

Matrices have a long history of application in solving linear equations but they were known as arrays until the 1800s. The Chinese text The Nine Chapters on the Mathematical Art written in 10th–2nd century BCE is the first example of the use of array methods to solve simultaneous equations,[102] including the concept of determinants. In 1545 Italian mathematician Gerolamo Cardano brought the method to Europe when he published Ars Magna.[103] The Japanese mathematician Seki used the same array methods to solve simultaneous equations in 1683.[104] 


The Dutch statesman and mathematician Johan (Jan) de Witt represented transformations resembling arrays in his 1659 book Elements of Curves (1659). He is also perhaps the second Mathematician to be lynched\footnote{Hypatia, was torn to bits by a lynching Christian mob in the streets of Alexandria in \textsc{AD} 415.} by a mob and had parts of their bodies eaten! [\ldots]The brothers were shot and then left to the mob. Their naked, mutilated bodies were strung up on the nearby public gibbet, while the Orangist mob partook of their roasted livers in a cannibalistic frenzy. Throughout it all, a remarkable discipline was maintained by the mob, according to contemporary observers, making one doubt the spontaneity of the event.\footcite{israel1995} \textit{Elementa Curvarum Linearum} has been described as the first textbook in analytic geometry.\footnote{The savage murder of a man that history has judged a highly competent leader is regarded by the Dutch as one of the most shameful episodes in their history.}


Between 1700 and 1710 Gottfried Wilhelm Leibniz publicized the use of arrays for recording information or solutions and experimented with over 50 different systems of arrays.[103] Cramer presented his rule in 1750.

The term "matrix" (Latin for "womb", derived from mater—mother[106]) was coined by James Joseph Sylvester in 1850,[107] who understood a matrix as an object giving rise to a number of determinants today called minors, that is to say, determinants of smaller matrices that derive from the original one by removing columns and rows. In an 1851 paper, Sylvester explains:

\begin{quote}
I have in previous papers defined a \enquote{Matrix} as a rectangular array of terms, out of which different systems of determinants may be engendered as from the womb of a common parent.[108]
\end{quote}

Arthur Cayley published a treatise on geometric transformations using matrices that were not rotated versions of the coefficients being investigated as had previously been done. Instead he defined operations such as addition, subtraction, multiplication, and division as transformations of those matrices and showed the associative and distributive properties held true. Cayley investigated and demonstrated the non-commutative property of matrix multiplication as well as the commutative property of matrix addition.[103] Early matrix theory had limited the use of arrays almost exclusively to determinants and Arthur Cayley's abstract matrix operations were revolutionary. He was instrumental in proposing a matrix concept independent of equation systems. In 1858 Cayley published his A memoir on the theory of matrices[109][110] in which he proposed and demonstrated the Cayley–Hamilton theorem.[103] Cayley introduced a particular notation for fencing the array as shown in fig~\ref{fig:cayley}, which used () for the first row and $\vert$ for subsequent rows.

\begin{figure}[htbp]
\centering
\includegraphics[width=0.6\textwidth]{cayley-notation}

\caption{Extract from Caley's paper \textit{A memoir on the theory of matrices.}}
\label{fig:cayley}

\end{figure}

An English mathematician named Cullis was the first to use modern bracket notation for matrices in 1913 and he simultaneously demonstrated the first significant use of the notation $A = [a_{i,j}]$ to represent a matrix where $a_{i,j}$ refers to the i$^$th row and the $j$th column.

Cayley's introductory paper in matrix theory was written in French and published in a German periodical. In this paper, matrices are introduced to simplify the notation which arises in simultaneous linear equations.  

\begin{gather}
\begin{aligned}
\xi  &= \alpha x + \beta y + \gamma z + \dots\\
\eta  &= \alpha' x + \beta' y + \gamma' z + \dots\\
\zeta &= \alpha'' x + \beta'' y + \gamma'' z + \dots
\end{aligned}
\end{gather}

The set of equations is written as:

\begin{gather}
(\xi, \eta, \zeta,\dots ) = (\alpha,\beta,\gamma,\dots)(x,y,z,\dots)
\end{gather}

The same article also introduces, although quite sketchily, the ideas of inverse matrix and of matrix multiplication, or \enquote{compounding} as Cayley called it. The above basic properties are expanded in a second expository article\footcite{fieldman1962} which
also lists many additional properties of matrices. In this important paper, Cayley works mostly with square matrices with
nine elements. He represents the zero matrix,\footcite[This is an interesting development]{fieldman1962}

\[
\begin{vmatrix}
0,0,0\\
0,0,0\\
0,0,0
\end{vmatrix}
\]
by \enquote{0} and the \enquote{matrix unity,}

\[
\begin{vmatrix}
1,0,0\\
0,1,0\\
0,0,1
\end{vmatrix}
\]
by \enquote{1}

Caley then introduces the algebra of matrices by defining the addition of two matrices by

\begin{gather}
(\begin{cayleymatrix}{3}
a&b&c\\
a' &b' & c'\\
a''&b'' & c''\\
a''' & b''' & c'''\\
\end{cayleymatrix}) +
(\begin{cayleymatrix}{3}
\alpha & \beta & \gamma\\
\alpha & \beta & \gamma\\
\alpha & \beta & \gamma\\
\end{cayleymatrix})\:\: = \:\:
(\begin{cayleymatrix}{3}
a+a  &b+b  &c+\gamma\\
a''+\alpha' & b'' + \beta'' & c'' +\gamma'' \\
a'''+\alpha''' & b''' + \beta''' & c''' +\gamma''' \\
\end{cayleymatrix})
\end{gather}
Caley stated but without proof, that matrices are commutative and associative under addition. Two types
of multiplication are exhibited. The first type is designated as \enquote{scalar multiplication,} that is

\[
m(\begin{cayleymatrix}{3}
a & b & c\\
a' & b' & c'\\
a'' & b'' & c''
\end{cayleymatrix}) 
= 
(\begin{cayleymatrix}{3}
ma & mb & mc\\
ma' & mb' & mc'\\
ma'' & mb'' & mc''
\end{cayleymatrix})
\]

The notation used for the matrix (\begin{cayleymatrix}{3}
a&b\\
c&d\\
e&f
\end{cayleymatrix}) is defined later on. It is a special environment.

The second type of multiplication is called \enquote{compounding,} according to the following scheme:

\begin{multline}
(\begin{cayleymatrix}{3}
a  &b &c\\
a' &b' &c'\\
a'' &b'' &c''
\end{cayleymatrix}\between \begin{cayleymatrix}{3}
\alpha & \beta & \gamma\\
\alpha'' & \beta'' & \gamma''\\
\alpha'' & \beta'' & \gamma''\\
\end{cayleymatrix})
\\=
 (\begin{cayleymatrix}{3} \bigl(a,b,c\between a, a',a''\bigr) & (a,b,c\between (\beta, \beta', \beta'') & (a,b,c\between \gamma, \gamma', \gamma'')\\
(a &b &c\\
(a &b &c
\end{cayleymatrix})\label{caleyprod}
\end{multline}

The product equation is complex to type, but very clear to understand its definition.\footnote{Uses multline environment.}


Later developments are described by Feldmann\footcite[This is the second paper that appeared in the \textit{The Mathematics Teacher relating to matrices.}][]{feldmann1963}. 

In the 1930s books on matrices written in English started to appear. The two leading ones were C.C. MacDuffee \textit{Theory of Matrices,} Springer (1933) and J. H. M. Wedderburn \textit{Lectures on Matrices}\footnote{The book was published by the American Mathematical Society and bears reseblance to a publication printed using TeX.} (1934). They both wrote matrices with double vertical lines as in

\[
\begin{Vmatrix}
a_{11} & a_{12} & \dots & a_{1n}\\
a_{11} & a_{12} & \dots & a_{1n}\\
\vdots & \vdots & \vdots & \vdots\\
a_{n1} & a_{n2} & \dots &a_{nn}
\end{Vmatrix}
\]
The use of double vertical lines was easy to typeset as well as to handwrite. It could also relate to the single vertical lines which are used to denote determinants.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%  TYPOGRAPHY %%%%%%%%%%%%%%%%%%%%%%%%
\section{Typography of Matrices}

Matrices are mostly typed the way tabular environements are types, i.e., you need to use the tabulator sign ``\&''.
Mathematical environments are provided both by \latexe as well as amsmath. The latter are to be preferred.

\begin{docEnvironment}{array}{\marg{specifier}}
\end{docEnvironment}

The |array| environment is a \latex2e provided environment and is identical to tabular, but works automatically with mathematics. It has to be enclosed in a mathematical environment.


\begin{texexample}{Matrices}{ex:matrices}
\[
\mathbf{X} = \left(
\begin{array}{ccc}
x_1 & x_2 & \ldots \\
x_3 & x_4 & \ldots \\
\vdots & \vdots & \ddots
\end{array} \right)
\]
\end{texexample}

\section{AMS Math matrices}

The \pkg{amsmath} package provides environments that go beyond the basic \docAuxEnvironment{array} of \latex2e. The \docAuxEnvironment{pmatrix}, \docAuxEnvironment{Bmatrix}, \docAuxEnvironment{vmatrix} and \docAuxEnvironment{Vmatrix}. 
There is also a \docAuxEnvironment{smallmatrix} that is more suitable for inline text display. 

\begin{texexample}{Using \textbackslash smallmatrix}{ex:smallmatrix}
This is a small matrix $\bigl(\begin{smallmatrix}
a&b\\
c&d\\
\end{smallmatrix}\bigr)$ environment. \lorem
\end{texexample}


\begin{docEnvironment}{bmatrix}{}
The example \ref{ex:bmatrix} illustrates the typesetting of a bracketted matrix hence \ul{b}matrix. If you want the matrix equation to be numbered enclose it withn an |equation| or |gather| environment. In this documentation we have let the |equation| environment to |gather| hence it will make no difference which ever is used. (amsmath)
\end{docEnvironment}

\begin{texexample}{Bmatrix}{ex:bmatrix}
\begin{equation}
\begin{matrix}
1 & 2 \\
3 & 4
\end{matrix} \qquad
\begin{bmatrix}
p_{11} & p_{12} & \ldots & p_{1n} \\
p_{21} & p_{22} & \ldots & p_{2n} \\
\vdots & \vdots & \ddots & \vdots \\
p_{m1} & p_{m2} & \ldots & p_{mn}
\end{bmatrix}
\end{equation}
\end{texexample}

The \refEnv{bmatrix} is from the amsmath package, see also \vref{bmatrix} and \nameref{bmatrix} and \pageref{bmatrix}. 


One issue to be aware is that the \refEnv{bmatrix} does not allow more than 10 tab stops. If you need to use more, you will have to \docCounter{MaxMatrixCols} to a higher number. The |phd| package sets this automatically at 20, so you will not have to worry about it.

\begin{teX}
\setcounter{MaxMatrixCols}{20}
\end{teX}

\begin{texexample}{Large Matrices}{ex:largematrices}
\[
\begin{bmatrix}
1 & 0 & 0 & -1 & 0  & 0  & 1 & -1 & 1  & -1 & 0 \\
0 & 1 & 0 & 0  & -1 & 0  & 1 & -1 & 0  & 1  & -1 \\
0 & 0 & 1 & 0  & 0  & -1 & 1 & -1 & -1 & 0  & 1 
\end{bmatrix}
\]
\end{texexample}



\section{vmatrix}

\begin{texexample}{vmatrix}{ex:vmatrix}

\begin{gather}
\begin{vmatrix}
aa' + bb' + cc' & ea' + fb' + gc' \\
ae' + bf' + cg' & ee' + ff' + gg'
\end{vmatrix}
{} = \begin{vmatrix}
a & b \\
e & f
\end{vmatrix}  \begin{vmatrix}
a' & b' \\
e' & f'
\end{vmatrix} + \begin{vmatrix}
a & c \\
e & g
\end{vmatrix}  \begin{vmatrix}
a' & c' \\
e' & g'
\end{vmatrix}.
\end{gather}
\end{texexample}





\section{Single equations that are too long}

In many cases equations need to be written over two or more lines. The \pkgname{amsmath} package, provides environments that are suitable for this:


\begin{texexample}{The multiline amsmath environment}{ex:multiline}
\begin{multline}
   a + b + c + d + e + f+ g + h + i  + k + l + m + n + o + p\\
              = j + k + l + m + n +\cos^{2}-1
\end{multline}
\end{texexample}



\section{array environment}

This is simply the same as the |eqnarray| environment only with the possibility of
variable rows and columns and the fact, that the whole formula has only one
equation number and that the array environment can only be part of another math
environment, like the equation environment or the displaymath environment. With
@{} before the first and after the last column the additional space |\arraycolsep| is
not used, which maybe important when using left aligned equations.

\begin{texexample}{array environment}{ex:array2}
\begin{eqnarray}
  a & = & b + c \\
    & = & d + e + f + g + h + i
               + j + k + l \nonumber \\
    &   & +\: m + n + o \\
    & = & p + q + r + s
\end{eqnarray}
\end{texexample}

The equations
to be aligned are entered with each one terminated by \cs{cr}. In each equation there should be
one alignment symbol \& to indicate where the alignment should take place. This is usually
done at the equal signs, although it is not necessary to do so. For example


\begin{texexample}{The array environment}{ex:array}
Thus to change $\frac34$ to a decimal divide $4$ into $3$
and we get $.75$ as a result, thus:
\[
\begin{array}{r@{}r@{}}
4 \; & \vline \; 3.00 \\\cline{2-2}
     &            .75
\end{array}
\]

To find the square root of a four-figure number
such as our example calls for, work it out in the
following manner:
\[
\arraycolsep=0em
\begin{array}{cccccccccccc}
\multicolumn{3}{c}{\text{2d pair}} &\qquad&\qquad&
\multicolumn{3}{c}{\text{1st pair}}&\qquad&\qquad&
\multicolumn{2}{c}{\text{square root}}\\
 & \overbrace{\quad}&\ZZZ&&&\ZZZ&\overbrace{\quad}&\ZZZ\\
 & 42 &&&&& 25 &&&&\vline\;65&(answer)\\\cline{11-11}
 & 36 &&&&& \\\cline{2-2}
\multirow{2}{*}{125\:} & \vline\hfill \Zi6 \hfill&&&&& 25\\
 & \vline\hfill \Zi6 \hfill&&&&& 25\\\cline{2-7}
\end{array}
\]
\end{texexample}


\subsection{Array environment in game theory}

This example \ref{ex:gamearray} is from \footnote{From determinacy to Nash equilibrium,St\'ephane Le Roux, TU Darmstadt }

\begin{texexample}{array environment in game theory}{ex:gamearray}
The game $\langle\{a,b,c\},\{1,2,3,4\}^3,\{0,1,2,3,4\},v,(<_d)_{d\in\{a,b,c\}}
\rangle$ is represented below, where player $a$ chooses the row, $b$ the column, and $c$ the array. 
\[\begin{array}{c@{\hspace{1cm}}c@{\hspace{1cm}}c@{\hspace{1cm}}c}
\begin{array}{|c|c|c|c|}
\hline 1 & 1 & 1 & 1\\
\hline 1 & 1 & 1 & 1\\
\hline 1 & 1 & 1 & 1\\
\hline 4 & 1 & 1 & 1\\
\hline
\end{array}
&
\begin{array}{|c|c|c|c|}
\hline 1 & 2 & 1 & 1\\
\hline 2 & 2 & 2 & 2\\
\hline 1 & 2 & 1 & 1\\
\hline 4 & 2 & 1 & 1\\
\hline
\end{array}
&
\begin{array}{|c|c|c|c|}
\hline 1 & 1 & 3 & 1\\
\hline 1 & 1 & 3 & 1\\
\hline 3 & 3 & 3 & 3\\
\hline 4 & 1 & 3 & 1\\
\hline
\end{array}
&
\begin{array}{|c|c|c|c|}
\hline 2 & 4 & 4 & 4\\
\hline 4 & 3 & 4 & 4\\
\hline 4 & 4 & 4 & 4\\
\hline 0 & 0 & 0 & 0\\
\hline
\end{array}
\end{array}
\]
Let us show that the game $\langle\{a,b,c\},\{1,\dots,n\}^3,\{0,\dots,n\},v,(<_d)_{d\in\{a,b,c\}}
\rangle$ witnesses the claim. First, the preferences are linear orders indeed. Second, let us show that there is no Nash equilibrium by case-splitting below. 
\end{texexample}



\section{The AMSmath Package}

\index{maths environment>align}
\index{maths environment>align}
\index{maths environments}{falign}
\index{maths environments}{xalignat}
\index{maths environments}{xxalignat}
\index{maths environments}{eqnarray}

The \pkg{amsmath} package offers five different align environments, |align|, |alignat|, |falign|, |xalignat| and |xxalignat|. 

In difference to the \refEnv{eqnarray} environment from standard \latex the ``three'' parts of one equation expr.-symbol-expr. are divided by only one ampersand in two parts. In general the ampersand should be before the symbol to get the right spacing, for example y \&= x. 

\subsection{The align environment}

The |align| environment is considered an improvement over \latex's |eqnarray| environment. It is very similar to a tabular
environment and is aligned at the |&|. 
It requires one |&| less and produces a tighter equation. Mathematicians 
are very particular in not using |eqnarray| and the package 
\pkgname{onlyamsomath} if used will warn if it finds that it has been used in the document. 
\index{eqnarray (environment)>spacing}
\index{eqnarray (environment)>alternatives}
\index{math environments>align}
\index{math environmenta>eqnarray}


\begin{texexample}{Comparison between |align| and |eqnarray|}{ex:eqnarraycomp}
% First example with eqnarray
\begin{eqnarray}
a & = & b + c \\
  & = & d + e + f + g + h + i
        + j + k + l \nonumber \\
  &   & +\: m + n + o \\
  & = & p + q + r + s
\end{eqnarray}

% Second example with align
\begin{align}
a & =  b + c \\
  & =  d + e + f + g + h + i
       + j + k + l \nonumber \\
  & +\: m + n + o \\
  & =  p + q + r + s
\end{align}
\end{texexample}


You can observe in Example~\ref{eqnarraycomp} the essential differences between the two, which we re-iterate, it requires one less |&| and produces a tighter display.

\begin{texexample}{The align environment}{ex:align}
\begin{align}
         y & = d\label{eq:IntoSection}\\
         y & = cx+d\\
    y_{12} & = bx^{2}+cx+d\\
     y(x)  & = ax^{3}+bx^{2}+cx+d
 \end{align}

%\begin{align*}
%\therefore (13 - x_1) + (13 - x_2) + \dotsb + (13 - x_p) + r &= 52\,,\\
%\therefore 13p - (x_1 + x_2 + \dotsb + x_p) + r              &= 52\,,\\
%\therefore x_1 + x_2 + \dotsb + x_p                          &= 13p - 52 + r\\
%                                                          &= 13 (p - 4) + r\,.
%\end{align*}

whence we conclude that $\gamma$ is a primitive root modulo $p$. But
\begin{align*}
\gamma^{p-1}-1 &=
     g^{p-1} - 1 + \frac{p-1}{1!}g^{p-2}xp +
        \frac{(p-1)(p-2)}{2!}g^{p-3}x^2p^2 + \ldots \\
  &= p\left(kp + \frac{p-1}{1!}g^{p-2}x +
        \frac{(p-1)(p-2)}{2!}g^{p-3}x^2p + \ldots\right).
\end{align*}
\end{texexample}

As you can observe from example\ref{ex:align}, each line is numbered if the unstarred version of the command is used. The |aligned| environment remedies this.
 


\subsection{The aligned environment}

The aligned environment allows more than one horizontal alignment but has only one equation number.

%\newcommand{\dotsbsmall}{\ldot\!\ldot\!\ldot}
%\newcommand{\ldot}{\mathbin{.}}			% dot with math spacing
%\newcommand{\nobf}[1]{\no \textbf{#1}}		% no with bold number
%
%\begin{texexample}{aligned environment example}{}
%\begin{equation}
%\begin{aligned}
%  &\:C_1x^{r_1}\,[\varphi_{r_1 0} \,+ \varphi_{r_1 1}\log x \,+ \dotsb + \varphi_{r_1 \alpha_1}(\log x)^{\alpha_1}]\\
%+ &\:C_2x^{r_2}\,[\varphi_{r_2 0} \,+ \varphi_{r_2 1}\log x \,+ \dotsb + \varphi_{r_2 \alpha_2}(\log x)^{\alpha_2}]\\
%+ &\multispan{1}{\:\dotfill}\\
%+ &\:C_nx^{r_n}[\varphi_{r_n 0} + \varphi_{r_n 1}\log x + \dotsb + \varphi_{r_n \alpha_n}(\log x)^{\alpha_n}],
%\end{aligned}
%\end{equation}
%
%\[
%\tag{98}
%\left\{\qquad
%\begin{aligned}
%T_1 &= T_2 = T_3 (=T)\\
%p_1 &= p_2 = p_3\\
%s_1-s_2 &= \frac{(u_1-u_2)+p_1(v_1-v_2)}{T}\\
%s_2-s_3 &= \frac{(u_2-u_3)+p_2(v_2-v_3)}{T}.
%\end{aligned}
%\right.
%\]
%\end{texexample}
 




\subsection{How to interrupt a display}

\begin{docCommand}{intertext}{}
 In many instances you will want to interrupt a display with some text. This can be accomplished using the control sequence |\intertext|.
 \end{docCommand}
 
 

\begin{texexample}{Using \cs{intertext}}{ex:intertext}
\begin{gather}
\begin{aligned}
U &= M u = M(c_v T + b)\\
S &= M(c_v  \log T + \frac{R}{m}  \log v + a),\\
\intertext{and } 
F &= M \left\{T(c_v - a - c_v \log T) - \frac{RT}{m} \log v + b \right\}.
\end{aligned}
\end{gather}
\end{texexample}

As the command \docAuxCommand{intertext} can only come after a |\\|  command we place it accordingly at {1}. Its function is to preserve the alignment after the text is typeset. This is a common requirement in many mathematical 
structures and the command can be used in all of amsmath aligning environments.







\subsection{The alignat environment}

\begin{docEnvironment}{alignat}{}
The alignat environment means \emph{align at} and can be used to align a set of equations vertically at more than one place. The star version of the environment omits the equation numbering.
\end{docEnvironment}


%\begin{texexample}{The alignat environment}{}
%\renewcommand{\dotsb}{\ldots}			% use lower dots after +-
%\renewcommand{\dotsbsmall}{\ldot\!\ldot\!\ldot}
%\renewcommand{\ldot}{\mathbin{.}}			% dot with math spacing
%\renewcommand{\nobf}[1]{\no \textbf{#1}}	
%
%\begin{alignat*}{5}
%  &p_{i+1}\dfrac{d^{m-i-1}y_1}{dx^{m-i-1}} &&+ \dotsbsmall +p_{m}y_1
%  && = -\Big(\dfrac{d^{m}y_1}{dx^{m}} &&+p_1\dfrac{d^{m-1}y_1}{dx^{m-1}}
%  &&+ \dotsbsmall +p_{i}\dfrac{d^{m-i}y_1}{dx^{m-i}}\Big), \\
%\multispan{10}{\makebox[36em]{\dotfill},}\\
% &p_{i+1}\dfrac{d^{m-i-1}y_{m-i}}{dx^{m-i-1}} &&+ \dotsbsmall +p_{m}y_{m-i}\!
% &&= -\Big(\dfrac{d^{m}y_{m-i}}{dx^{m}} &&+ p_1\dfrac{d^{m-1}y_{m-i}}{dx^{m-1}}
% &&+ \dotsbsmall +p_{i}\dfrac{d^{m-i}y_{m-i}}{dx^{m-i}}\Big).
%\end{alignat*}
%\end{texexample}



Remember that when using one of the align environments, there should be no |\\| at the end of the
last line, otherwise you will get another equation number for this ``empty''  line.


\subsection{Multline}

\begin{docEnvironment}{multline}{\meta{contents}}
\end{docEnvironment}
The |multline| environment is another attempt at displaying long equations. It will set the first line flush left and the last one flush right. It can be quite useful when one has very long equations. The line break is marked with |\\|. It is good typographical practice to have the first line shorter than the last line and not the other way around.

\begin{texexample}{Multiline Equations}{mult}
Example unumbered
\begin{multline*}
x^{\rho}f(x, \rho) = x^{\rho} \Big [ u_{m}x^{m}\frac{\rho(\rho-1)\ldots (\rho-m+1)}{x^{m}} \\
                   + u_{m-1}x^{m-1}\frac{\rho(\rho-1)\ldots (\rho-m+2)}{x^{m-1}}+ \ldots
                   + u_{2}x^{2}\frac{\rho(\rho-1)}{x^2}+u_{1}x\frac{\rho}{x}+u_0 \Big ].
\end{multline*}
Example  numbered
\begin{multline}
M \left[\delta u - \left(T_1\, \frac{dp_{12}}{dT_{12}} - p_1\right) \delta v\right] \\
= \delta T_{12} \left[M_{12}\, \frac{du_{12}}{dT_{12}} + M_{21}\, \frac{du_{21}}{dT_{12}}
  - \left(T_1\, \frac{dp_{12}}{dT_{12}} - p_1\right)
    \left(M_{12}\, \frac{dv_{12}}{dT_{12}}
        + M_{21}\, \frac{dv_{21}}{dT_{12}}\right)\right].
\end{multline}
\end{texexample}



\section{gathered}

The |gathered| environment is like the |aligned| or |alignat| environment. They use
only so much horizontal space as the widest line needs. In difference to the gather
environment it must be itself inside math mode.

\begin{docEnvironment}{gathered}{\meta{contents}}
\end{docEnvironment}

\emphasize{cases}
\begin{texexample}{The gathered environment}{exe:gathered}
\[
  \left .
   \begin{gathered}
    \left [ \frac{\alpha}{p} \right ] +
    \left [ \frac{\alpha}{p^2} \right ] +
    \left [ \frac{\alpha}{p^3} \right ] +
    \ldots \\
    \left [ \frac{\beta}{p} \right ] +
    \left [ \frac{\beta}{p^2} \right ] +
    \left [ \frac{\beta}{p^3} \right ] +
    \ldots \\
      \vdots \\
    \left [ \frac{\lambda}{p} \right ] +
    \left [ \frac{\lambda}{p^2} \right ] +
    \left [ \frac{\lambda}{p^3} \right ] +
    \ldots
   \end{gathered}
  \right \} \tag{B}
\]
\end{texexample}

\section{The cases environment}

The \refEnv{cases} environment renders multiple lines with an extensible left curly-brace. It can be used for piecewise-defined functions. For this to work, you must have |\usepackage{amsmath}| in the preamble.

\newlength{\boxla}
\newlength{\boxlb}
\newlength{\boxlc}
\setlength{\boxla}{1.15in}
\setlength{\boxlb}{1.7in}
\setlength{\boxlc}{1.6in}
\newcommand{\boxa}[1]{\makebox[\boxla]{\small #1\dotfill}}
\newcommand{\boxb}[1]{\makebox[\boxlb]{\small #1\dotfill}}

\begin{docEnvironment}{cases}{}
\end{docEnvironment}


\begin{texexample}{The cases environment}{ex:cases}
\begin{align*}
\boxa{DOYEN} & \quad
\parbox{3.4in}{\small MM. \\
MILNE EDWARDS, Professeur. Zoologie, Anatomie, \\
\hspace*{1.5in} Physiologie compare.}
\\
\parbox[b]{\boxla}{\small PROFESSEURS\\HONORAIRES\dotfill} &
\begin{cases}
\text{\small DUMAS.}\\
\text{\small PASTEUR.}
\end{cases}
\\
\boxa{PROFESSEURS} &
\begin{cases}
\boxb{CHASLES}\text{\small Gomtrie suprieure.} \\
\boxb{P. DESAINS}\text{\small Physique.} \\
\boxb{PUISEUX}\text{\small Astronomie.} \\
\boxb{JAMIN}\text{\small Physique.} \\
\boxb{O. BONNET}\text{\small Astronomie.}
\end{cases}
\\
\boxa{AGROGES} &
\begin{cases}
\parbox{\boxlb}{%
\small BERTRAND\dotfill\\
J. VIEILLE\dotfill}\bigg\} \text{\small Sciences mathematiques.} \\
\boxb{PELIGOT}\text{\small Sciences physiques.}
\end{cases}\\
\boxa{SECRETAIRE} & \quad \text{\small PHILIPPON.}
\end{align*}
\end{texexample}


\begin{texexample}{}{}
non plus orthogonale mais telle que
\[
{\sum_{i}}' a_{pi} a_{qi}
  = \begin{cases}
    0 & \text{ si } p \gtrless q \\
    1 & \text{ si } p = q
    \end{cases}
\]
alors on a aussi
\[
{\sum_{i}}' a_{pi} a_{iq}
  = \begin{cases}
    0 & \text{ si } p \gtrless q \\
    1 & \text{ si } p = q
    \end{cases}
\]
\end{texexample}



\section{flalign}

\emphasize{falign}
\begin{docEnvironment}{falign}{\meta{contents}}
\end{docEnvironment}

%\cxset{
%         tag left bracket =[,
%         tag right bracket =],
%         tag font-weight=\textbf,
%      } 
%\newtagform{squarebrackets}{[}{]}
%\usetagform{squarebrackets}

\begin{texexample}{flalign}{ex:flalign}
\begin{flalign}
&&
\chi\omega  &= \omega - S \omega\, \nabla \centerdot \sigma\, dt, &&\\
&\text{whence}&
\chi'^{-1} \omega &= \omega + \nabla_1 S \omega \sigma_1\, dt, &&
\end{flalign}
\end{texexample}
%\newtagform{roundbrackets}{(}{)}
%\usetagform{roundbrackets}



\section{Sums}

\newcommand\reverseprop{\rotatebox[origin=c]{180}{$\propto$}}

Of the various special kinds of numbers used in analysis, there is hardly a species that 
that is so important and so generally applicable as the Bernoulli  
Numbers. Their numerous properties and applications have caused the creation 
of an extensive literature on the subject which still continues to attract the 
attention of scholars. The first statement of the properties of these numbers 
was given to the world by their inventor Jacques (1) Bernoulli (1654-1705) in 
his posthumously printed work, \emph{Ars Conjectandi} (Basel, 1713), pages 95 to 
98. 

Earlier scholars produced similar results the most important being Faulhaber and Remmelin of Ulm, Wallis, Mercator, in his \emph{Logarithmotechnia} and others.

Bernoulli's original notation is unfamiliar to modern mathematics. He used three notations, first the
summation symbol he used was $\smallint$ which followed Leibnitz. He also used 2 dots to indicate 
grouping. For \ldots he use an {\panunicode Ӿ}  with a bar in the middle. 
Note that Bernoulli writes $n.n-1$ where we would write $n(n-1)$. he also uses Descartes equality symbol, which in our modern notation is a mirrored proportionality symbol \(\reverseprop\) that indicates the equal sign.%
\footnote{This equality symbol was widely used in France and Holland during the latter part of the seventeeth and early eighteenth centuries, but it never attained a substantial foothold in other countries.} His use of $nn$ instead of $n^2$ should also be noted.

\def\xellipsis{\begingroup\mkern\thinmuskip \mbox{\panunicode Ӿ}\mkern\thinmuskip\endgroup}
\begin{longtable}{lll}
\smallint    & |\smallint| & Summation (modern notation  $\sum$)\\
\reverseprop & |\reverseprop| & Equality sign i.e, $=$\\
$\xellipsis$   & |\xellipsis|   & Ellipsis i.e., \ldots\\
  $n.n$        & |n.n-1|          & brackets $n(n-1)$\\
\end{longtable}

\[\smallint \overline{n-1}\]



\[\frac{n.n-1}{1.2} = \frac{nn-n}{2}\]

{\def\arraystretch{1.5}
\setlength\arraysep{3.5pt}
\begin{align}
\smallint\! n   = & \frac{1}{2}nn + \frac{1}{2}n,\\
\smallint\! nn  = & \frac{1}{3}n^3 + \frac{1}{2} nn + \frac{1}{6}n,\\
\smallint\! n^3 = & \frac{1}{4}n^4 + \frac{1}{2} n^3 + \frac{1}{4}nn,\\
\smallint\! n^4 = & \\
\smallint\! n^5 = & \frac{1}{5}n + \frac{1}{2}n^5 + \frac{5}{12}n^4 \xellipsis - \frac{1}{12}nn\\
\smallint\! n^6 = & \\
\smallint\! n^7 = & \\
\smallint\! n^8 = & \\
\smallint\! n^9 = & \\
\smallint\! n^{10} =& \frac{1}{11}n^{11} + \frac{1}{2}n^{10}+\frac{5}{6}n^9 \xellipsis -1n^7 \xellipsis 1n^5 \xellipsis -\frac{1}{2}n^3 \xellipsis  \frac{5}{66}n
\end{align}
}



\[a_1 + a_2 + \dots +a_n,\]
where each $a_k$ is a number that has been defined somehow. 
Each element $a_k$ of a sum is called a \emph{term}. 

The threedots notation has many uses, but it can be ambiguous and a bit long-winded. Another alternative, is the delimited form.

\begin{gather}
\sum_{k=1}^n a_k,
\end{gather}
which is called the Sigma-notation because it uses the upper case Greek letter sigma $\Sigma$.



\begin{equation*}
P = \frac{\displaystyle{
\sum_{i=1}^n (x_i- x)
(y_i- y)}}
{\displaystyle{\left[
\sum_{i=1}^n(x_i-x)^2
\sum_{i=1}^n(y_i- y)^2
\right]^{1/2}}}
\end{equation*}


\section{Math accents}

Mathematical accents are a bit different that the ones used for normal text in order to cater, firstly for the exotic taste in diagritics taste by mathematicians and secondly to cater for the fact that mathematics is styled in italics.
This is a short summary of what is available. 
\bigskip

%\begin{tabular}{llllll}
%\toprule
%$\hat{a}$    & \docCommand{hat\{a\}} & $\check{a}$ & \docCommand{check\{a\}} &$\tilde{a}$&\docCommand{tilde\{a\}}\\
%$\grave{a}$ &\docCommand{grave\{a\}}    & $\dot{a}$ &\docCommand{dot\{a\}} &$\ddot{a}$ &\docCommand{ddot\{a\}}\\
% $\bar{a}$ &\docCommand{bar\{a\}} & $\vec{a}$ &\docCommand{vec\{a\}} & $\widehat{AAA}$ &\docCommand{widehat\{AAA\}}\\
%$\acute{a}$ &\docCommand{acute\{a\}} &$\breve{a}$  &\docCommand{breve\{a\}} &$\widetilde{AAA}$ &\docCommand{widetilde\{AAA\}}\\
% & & & & &\\%CHEXK mathring gives problems
%\bottomrule
%\end{tabular}

\section{Binary Relations}


%\begin{tabular}{llllll}
%\toprule
%$<$ &$<$  &$>$ &$>$ &$=$ &$=$\\
%$\le$  &\docCommand{leq} or \docCommand{le}  &$\geq$ &\docCommand{geq} or \docCommand{ge} &$\equiv$ &\docCommand{equiv}\\
%$\ll$  &\docCommand{ll}   &$\gg$  &\docCommand{gg}   &$\doteq$  &\docCommand{doteq} \\
%$\prec$ &\docCommand{prec} &$\succ$  &\docCommand{succ} &$\sim$ &\docCommand{sim}\\
%$\preceq$ &\docCommand{preceq} &$\succeq$  &\docCommand{succeq} &$\simeq$ &\docCommand{simeq}\\
%$\subset$ &\docCommand{subset}  &$\supset$ &\docCommand{supset} &$\approx$ &\docCommand{approx}\\
%$\subseteq$ &\docCommand{subseteq} &$\supseteq$  &\docCommand{supseteq} &$\cong$  &\docCommand{cong} \\
%$\sqsubset$  &\docCommand{sqsubset}  &$\sqsupset$  &\docCommand{sqsupset}  &$\Join$  &\docCommand{Join}\\
%$\sqsubseteq$   &\docCommand{sqsubseteq}   &$\sqsupseteq$ &\docCommand{sqsupseteq}   &$\bowtie$ &\docCommand{bowtie} \\
%$\in$ &\docCommand{in}  &$\ni$ &\docCommand{ni}, \docCommand{owns} &$\propto$ &\docCommand{propto}\\
%$\vdash$ &\docCommand{vdash}  &$\dashv$ &\docCommand{dashv} &$\models$ &\docCommand{models}\\
%
%\bottomrule
%\end{tabular}



\section{Brackets, braces and parentheses}

In addition  to the previous commands \cmd{Bigg} and \cmd{Biggm} can be used to add a bit more horizontal space.

\[3\Big\downarrow 
\Big\Downarrow\]


\[3\Big\updownarrow
\Big\Updownarrow\]

Another way to typeset the big separators is to split them over a line as shown below

{\arraycolsep=2pt
 \begin{equation}
 \begin{array}{rcl}
 \frac{1}{2}\Delta(f_{ij}f^{ij}) & = & 2\Bigg({\displaystyle
 \sum_{i<j}}\chi_{ij}(\sigma_{i}-\sigma_{j})^{2}+f^{ij}%
 \nabla_{j}\nabla_{i}(\Delta f)+\\
 & & +\nabla_{k}f_{ij}\nabla^{k}f^{ij}+f^{ij}f^{k}[2
 \nabla_{i}R_{jk}-\nabla_{k}R_{ij}]\Bigg)
 \end{array}
 \end{equation}

This is achieved by typing

\begin{teX}
{\arraycolsep=2pt
 \begin{equation}
 \begin{array}{rcl}
 \frac{1}{2}\Delta(f_{ij}f^{ij}) & = & 2\Bigg({\displaystyle
 \sum_{i<j}}\chi_{ij}(\sigma_{i}-\sigma_{j})^{2}+f^{ij}%
 \nabla_{j}\nabla_{i}(\Delta f)+\\
 & & +\nabla_{k}f_{ij}\nabla^{k}f^{ij}+f^{ij}f^{k}[2
 \nabla_{i}R_{jk}-\nabla_{k}R_{ij}]\Bigg)
 \end{array}
 \end{equation}

\end{teX}



\chapter{Maths Typography}

\texttt{
Handbook of Typography for the\\
Mathematical Sciences\\
Steven G. Krantz\\
January 21, 2003}\par

\url{http://www.faqorama.net/tecno/[LaTeX]%20Handbook%20of%20Typography%20for%20the%20Mathematical%20Sciences%20-%20S.G.Krantz%20(2003).pdf}


Ellen Swanson’s book Mathematics into Type is a unique and important contribution to the literature of technical typesetting. It set a
standard for how mathematics should be translated from a handwritten
manuscript to a printed book or document. While Swanson’s book was
intended primarily as a resource for technical typesetters, it was also important to mathematical and other technical authors who wanted to take
an active role in ensuring that their work reached print in an attractive
and accurate form.
The landscape has now changed considerably. With the advent and
wide availability of \tex,
most mathematicians can take a more active
role in producing typeset versions of their work. Indeed, many mathematicians currently use TEX to write preliminary versions of their work
that are very similar (in many respects) to what will ultimately appear
in print.

While the output from \tex has a more typeset appearance than that
from most word processors, the TEX product is not automatically (without human intervention) \enquote{ready to go to press}. There are still \enquote{post processing} typesetting issues that must be addressed before a work
actually appears in print. 

The style and format of running heads, section headings and other titles, the formatting of theorems and other
enunciations, the text at the bottom of the page, page break issues, and
the fonts and spacing used in all of these go under the name of “page design”. These are often customized for a particular book or journal. The
index and table of contents must be designed and typeset. Graphics,
and sometimes new fonts, must be integrated. Additional questions of
style in the formatting of equations and superscripts and subscripts can
also arise. Most TEX users do not know how to handle the questions just
listed, which is why most publishers currently send \tex documents for
books or journal articles to a third-party \tex consultant. The purpose
of the present work is to serve as a touchstone for those who want to
learn to make typesetting decisions themselves.


\def\smsqr#1#2{\sqrt{{#1}^2 + {#2}^2} + \frac{1}{{#1}^2 + {#2}^2}}

\[ \smsqr{a}{c} \]

There are other aspects of consistency about which many authors
are blissfully unaware: spacing above and below a displayed equation,
spacing above and below a theorem,6
space after a proof, the mark at
the end of a proof (QED, or the Halmos "tombstone" |\qed|, for example).\footnote{ "The symbol is definitely not my invention — it appeared in popular magazines (not mathematical ones) before I adopted it, but, once again, I seem to have introduced it into mathematics. It is the symbol that sometimes looks like \(\boxed{\thinspace}\), and is used to indicate an end, usually the end of a proof. It is most frequently called the 'tombstone', but at least one generous author referred to it as the 'halmos'.", Paul R. Halmos, I Want to Be a Mathematician: An Automathography, 1985, p. 403.}

Again, a good macro can be invaluable in addressing these issues; but
awareness of the problem is also a great asset.

\begin{latexquotation}
You make everyone's
life easier if you eschew the eccentric and stick to the most basic constructions. This advice is valid for the Plain \tex user, for the \latex
user, for the Microsoft Word user, and for every other user of electronic
tools.
\end{latexquotation}



\section{Choose your notation carefully}
\index{maths>typography>notation}

Some believe that mathematics is created others that it is discovered, \emph{notation} is certainly created and
a matter that has occupied the minds of many mathematicians. Peterson\footcite{peterson2009} \footcite{peterson2009}  went as far as to claim  `that notation can direct the course of mathematics’ and perhaps rightly so.

Bad notation can make good exposition bad and bad exposition worse; ad hoc decisions about notation, made mid-sentence in the heat of composition, are almost certain to result in bad notation. Good notation has a kind of alphabetical harmony and avoids dissonance.

Leibniz had a lading role in the development of mathematical notations. He made a prolonged study of matters of notation: 
(538)

Leonhard Euler was one of the most prolific mathematicians in history, and also a prolific inventor of canonical notation. His contributions include his use of e to represent the base of natural logarithms. It is not known exactly why {$\displaystyle e$} e was chosen, but it was probably because the four letters of the alphabet were already commonly used to represent variables and other constants. Euler used {$\displaystyle \pi$ }  to represent pi consistently. The use of {$\displaystyle \pi$ }   was suggested by William Jones, who used it as shorthand for perimeter. Euler used {$\displaystyle i$}  to represent the square root of negative one,[note 41] although he earlier used it as an infinite number. [note 42][note 43] For summation, Euler used sigma, Σ.[note 44] For functions, Euler used the notation {$\displaystyle f(x)$}  to represent a function of {$\displaystyle x$} . In 1730, Euler wrote the gamma function.[note 45] In 1736, Euler produces his paper on the Seven Bridges of Königsberg[72] initiating the study of graph theory.


\begin{figure}[htbp]
\includegraphics[width=\textwidth]{shot8}
\caption{The equation of love from \emph{Rites of Love and Math}. The equation which has been shown as a tatoo  on Kayshonne Insixieng May, first appeared in a 100-page paper \emph{Instantons Beyond Topological Theory I} \cite{frenkel2012,FLN}}
\end{figure}


\subsection{One symbol, one letter}
\index{maths>typography>symbols}

A mathematical symbol is usually indicated by \emph{one} letter, not two or three. If for example we want to suggest that the \textit{factor of safety} is equal to three, we should write
\[F_{\mathrm{s}}=3\]
and not
\[F_{\mathrm{safetyfactor}}=3\]
or worse
\[F_{\mathrm{sf}}=3\]
typesetting the subscript in \textit{italic} font is also wrong
\[F_{s}=3\]
as it does not represent a mathematical symbol, but is just an abbreviation for safety factor.

Sometimes the use of the one symbol one letter rule cannot be applied, without the notation becoming complex
\medskip

{
\narrower\narrower
The static friction force \(F_{\mathrm{sf}}\) will exactly oppose forces applied to an object parallel to a surface contact up to the limit specified by the [[coefficient of static friction]] \(\mu_{\mathrm{sf}}\) multiplied by the normal force \(F_N\). In other words the magnitude of the static friction force satisfies the inequality:

\[ \le F_{\mathrm{sf}} \le \mu_{\mathrm{sf}} F_\mathrm{N}. \]

The kinetic friction force \(F_{\mathrm{kf}}\) is independent of both the forces applied and the movement of the object. Thus, the magnitude of the force equals:

\[F_{\mathrm{kf}} = \mu_{\mathrm{kf}} F_\mathrm{N}\]

where \(\mu_{\mathrm{kf}}\) is the coefficient of kinetic friction.
}




\newthought{Do not start a sentence with an equation}

\newthought{Display math}

In general mathematics typeset better when they are displayed. Use in-line maths only for the simplest of equations and for explanations of symbols and the like. Watch out for inconsistent spacing before and after displayed math.

\subsection{Correct badly sized math}

Briggs worked out the table from scratch. Starting with $\log 10 = 1$, he calculated
successively $\sqrt{10}$, $\sqrt{\sqrt{10}}$, $\sqrt{\sqrt{\sqrt{10}}}$, $\cramped{\sqrt{\sqrt{\sqrt{\sqrt{10}}}}}$ \ldots , until after 54 such root extractions he reached a number very close to 1.


$\sqrtsign{a12}$

\meaning\sqrtsign


\begin{quote}
The 2005 Euro\TeX{} ... 16th ($\cramped{2^{2^2}}$)($2^{2^2}$) ...
\end{quote}

Some \tex constructions typeset rather badly, consider for example this:

\[
\sqrt{\frac{\beta}{\gamma}} = \sqrt{X} + \sqrt{y}
\]

\noindent or this,

\[
\surd{\frac{\beta}{\gamma}} = \surd{X} + \surd{y}
\]


You can remedy this by using a \cs{mathstrut}.


\begin{texexample} {Correcting square roots} {ex:sqroot}
\[
\sqrt{\mathstrut a}=\sqrt{\mathstrut X}+\sqrt{\mathstrut y}
\sqrt{\mathstrut a}=\sqrt{\mathstrut X}+\sqrt{\mathstrut y_{i,j}}
\]
\end{texexample}



\newthought{Multiplication}

One of the most common errors is to use the ``dot'' to indicate multiplication between scalars\footnote{\url{http://www.tug.org/TUGboat/Articles/tb29-2/tb92guiggiani.pdf}}. For example the folowing formul\ae
\[a\cdot x^2+b\cdot x+c=0\]
should be written as
\[ax^2+bx+c=0\]

In fact, for the the sake of simplicity, the standard multiplication between letters, or between letters, or between a number and a letter, does not require any symbol. If, on the other hand, the multiplication is between two numbers, the $\times$ or $\cdot$ symbols are required to avoid ambiguity.
For example you should write

\[2\times 3=6 \text{ and not } 2\thickspace 3=6 \]


\paragraph{Using the right font}

Matching the text font with the mathematical font is the job of the class and
style designer. Ideally these should be selected by a specialist at the publisher.

This is now complicated a bit in that there are a limited number of unicode fonts, as well as unicode defined symbols. Nevertheless at least the \docFont{stix} family of fonts is a good start.

The Euler equation involves the five most important mathematical constants. First we typeset it with no space corrections\footnote{\texttt{\textbackslash eu\^\,\{\textbackslash iu\textbackslash pi\}}},
% The number `e'
\providecommand*{\eu}%
{\ensuremath{\mathrm{e}}}
% The imaginary unit
\providecommand*{\iu}%
{\ensuremath{\mathrm{j}}}
\[\scalebox{3}{$\eu^{\iu\pi}$}\]
a small correction to the space should be added

\[\scalebox{3}{$\eu^{\,\iu\pi}$}\]

\subsection{Differential operators}
A peculiar defnition is required to properly
write the differential symbol. It is in fact an operator that has a space only on its left. In Beccari (2007b) the following solution is proposed:

\bigskip


\clearpage
\section{tikz}
\begin{texexample}{Using TikZ with Maths}{ex:tikzmaths}
because of the periodicity of the Jacobi theta functions involved in the construction of the vectors.
The height difference between starting point and endpoint of the path is thus $Lp$ as shown in figure \ref{fig:path}. Moreover, because of the periodicity of the theta functions it is sufficient to restrict the initial height to $\ell_1=0,1,\dots,L-1$ in this case.

{  \centering
  \begin{tikzpicture}[>=stealth]
     \draw[scale=0.5,thick] (0,0)--(2,2)--(3,1)--(5,3)--(6,2)--(7,3);
           
     \draw[<->] (0,2) -- (0,-0.5) -- (4,-0.5);
     \foreach \x in {0.25,0.75,...,3.25}
       \draw[xshift=\x cm,yshift=-0.5cm] (0,-0.075)--(0,0.075);
     
    \foreach \y in {-0.5,0,...,1.5}
       \draw[yshift=\y cm] (-0.075,0)--(0.075,0);
 
    \draw (0.25,-0.5) node[below] {$1$};
    \draw (0.75,-0.5) node[below] {$2$};
    \draw (2,-0.5) node[below] {$\cdots$};
    \draw (3.25,-0.5) node[below] {$N$};
    \draw (4,-0.5) node[below] {$j$};
    \draw (0,0) node [left] {$\ell$};
    \draw (0,1.5) node [left] {$\ell+Lp$};
    \draw (0,2) node [right] {$\ell_j$};
    \clip[scale=0.5] (0,-1.5) rectangle (7.5,3.5);
    \draw[scale=0.5,dotted] (-1,-2) grid (8,5);
  \end{tikzpicture}
}
  
\end{texexample}




%\begin{texexample}{Example}{}
%\newcommand{\ud}{\ensuremath \mathop{}\!\mathrm{d}}
%\(z=2\sin x\mathrm{d}x\) and \(z=2\sin x\ud x\)
%
%
%\newcommand{\ud}{\mathop{}\!\mathrm{d}}
%\bigskip
%
%It uses an empty operator and eliminates the space
%on its left with |\!|.
%
%Note the difference between
%
%\[z=2\sin x\mathrm{d}x  \]
%
%\[z=2\sin x\ud x\]
%
%where the diffrential is obtained respectively with
%|\mathrm{d}| and |\ud|.
%\end{texexample}




\subsubsection{God is in the details}

Sometimes you will be faced with small decisions for which the Journal style manual might not have an answer for you or the journal Editor might have a different opinion to yours. One such question is if one needs to insert the thousand separator in coefficients.

\[
\operatorname{erf}^{-1}(z)=\tfrac{1}{2}\sqrt{\pi}\left (z+\frac{\pi}{12}z^3+\frac{7\pi^2}{480}z^5+\frac{127\pi^3}{40320}z^7+\frac{4369\pi^4}{5806080}z^9+\frac{34807\pi^5}{182476800}z^{11}+\cdots\right )
\]


\[
\operatorname{erf}^{-1}(z)=\tfrac{1}{2}\sqrt{\pi}\left (z+\frac{\pi}{12}z^3+\frac{7\pi^2}{480}z^5+\frac{127\pi^3}{40,320}z^7+\frac{4,369\pi^4}{5,806,080}z^9+\frac{34,807\pi^5}{182{,}476,800}z^{11}+\cdots\right )
\]

\[
\operatorname{erf}^{-1}(z)=\tfrac{1}{2}\sqrt{\pi}\left (z+\frac{\pi}{12}z^3+\frac{7\pi^2}{480}z^5+\frac{127\pi^3}{40{,}320}z^7+\frac{4{,}369\pi^4}{5{,}806{,}080}z^9+\frac{34{,}807\pi^5}{182{,}476{,}800}z^{11}+\cdots\right )
\]



\[
\operatorname{erf}^{-1}(z)=\tfrac{1}{2}\sqrt{\pi}\left (z+\frac{\pi}{12}z^3+\frac{7\pi^2}{480}z^5+\frac{127\pi^3}{40\thinspace 320}z^7+\frac{4\thinspace 369\pi^4}{5\thinspace 806\thinspace 080}z^9+\frac{34\thinspace 807\pi^5}{182\thinspace 476\thinspace 800}z^{11}+\cdots\right )
\]


If you type the commas watch out to put them in |{,}| otherwise \tex's algorithm will leave a space. See the difference below:

\[182{,}476{,}800 \]
\[182,476,800\]

It is interesting to note that Knuth believes that in equations this is unnecessary.
He is quoted in Typesetting Mathematics.


\begin{quotation}
But where Don wrote 1000000 they substituted
1,000,000. Don objected that although this might be justifed in text, his use is perfectly OK in a formula. Well then, they replied, write \(10^6\).
Fine, said, Don, but what do I do 
when the number is 1234567? The IEEE standard here is to insert spaces, thus: 1 234 567.
Don doesn't like this in formulae, but agrees that it may be useful in a high precision context, such as numerical tables. 
\end{quotation}



The following are extracts from his paper \textit{Johann Faulhaber and Sums of Powers}:\footnote{\url{http://www-cs-faculty.stanford.edu/~uno/papers/jfsp.tex.gz}}

{
\[\vcenter{\halign{$#$\hfil\ &$#$\hfil\cr
\Sigma n^{11}&=39916800{n+6\choose 12}+
19958400{n+5\choose 10}+3160080{n+4\choose 8}
+168960{n+3\choose 6}\cr
\noalign{\smallskip}
&\qquad\null+2046{n+2\choose 4}+{n+1\choose 2}\,;\cr
\noalign{\smallskip}
\Sigma n^{13}&=6227020800{n+7\choose 14}+3632428800{n+6\choose 12}+
726485760{n+5\choose 10}\cr
\noalign{\smallskip}
&\qquad\null+57657600{n+4\choose 8}
+1561560{n+3\choose 6}+8190{n+2\choose 4}+\binom{n+1}{2}\,.\cr}}\]
}

Also, note in the last equation the use of a period at the end. 
This is something that evokes strong opinions and flaming wars in fora. 
I am not too sure if I agree on the last one, but the way that Knuth writes 
is very clear and his equations in a way are paragraphs. 
In this case the use of a period is recommended.


\subsection{Punctuation}
\index{maths>typography>punctuation}

There are two schools of thought when it comes to punctuation, that is punctuation in display style formulae. Some authors (Beccari, 2007) argue it is not necessary, others that it is necessary and essential \footcite{guiggiani2008}. Mermin \footcite{mermin89} strongly argued in his third rule that:  `The
Math Is Prose rule simply says: End
a displayed equation with a punctuation
mark. It is implicit in this
statement that the absence of a punctuation
mark is itself a degenerate
form of punctuation that, like periods,
commas or semicolons, can be used
provided it makes sense.''

The authors of this article believe that equations, both in display and text style, are part of the argumentation
and so punctuation should be used to help the reader. An example of good use of punctuation is:


Since
\[ a=b \]
and
\[ b=c,\]
it is proven that
\[ a =c. \]

It is extremely unusual to find an equation end with a question mark but here is one. What is 
\[ a = d^2\mathrm{?} \]

If you do put a question mark or an exclamation mark and you are using unicode fonts,
you will need to use |\mathrm{?}| not to confuse it with the relevant symbols.

Most journals require that equations be punctuated, like normal text. Even if the author of the manuscript disagrees, probably the journal editor will add the punctuation.

Read your mathematical text aloud and introduce punctuation as if it was spelled in words rather than mathematical symbols. 

\subsection{Numbering Equations}
\index{maths>typography>equation numbering}

One question that you may face is the numbering of display equations. Early books used numbering sparingly, whereas many authors go overboard and number all the equations.

According to Knuth et al:\footnote{\url{http://tex.loria.fr/typographie/mathwriting.pdf}}
Numbering all displayed formulas is usually a bad idea; number the important ones only.

Halmos\footnote{\url{http://www.math.uh.edu/~tomforde/Books/Halmos-How-To-Write.pdf}} offers pretty much the same good advice,

\begin{latexquotation}
What about ``inequality (*)", or ``equation (7)", or ``formula (iii)"; should all displays be labelled or numbered? My answer is no. Reason: just as you shouldn't mention irrelevant assumptions or name irrelevant concepts, you also shouldn't attach irrelevant labels. Some small part of the reader's attention is attracted to the label, and some small part of his mind will wonder why the label is there. If there is a reason, then the wonder serves a healthy purpose by way of preparation, with no fuss, for a future reference to the same idea; if there is no reason, then the attention and the wonder were wasted.
\end{latexquotation}

Mermin's argues in his Good samaritan Rule: that it is distressing to having to hunt for an equation back in a manuscript for Eq. (2.46) not because your subsequent progress requires
you to inspect it in detail, but merely to find out what it is about so
you may know the principles that go into the construction of Eq. (7.38).
The Good Samaritan rule says: When referring to an equation identify it by
a phrase as well as a number. No compassionate and helpful person
would herald the arrival of Eq. (7.38) by saying "inserting (2.47) and (3.51)
into (5.13)..." when it is possible to say "inserting the form (2.47) of the
electric field $E$ and the Lindhard form (3.51) of the dielectric function $e$ into
the constitutive equation (5.13). To be sure, it's longer this way but much 
clearer\ldots'

For those that want only the equations that are referenced numbered the package \pkgname{autoref} can automate this. This is not included in this package due to conflicts with \pkgname{mathtools} and \pkgname{amsmath}.
\footnote{See also discussion at \protect\url{http://tex.stackexchange.com/questions/29267/which-equations-should-be numbered/49080\#49080}}

Now if you wish to argue about this is fine.

\section{Mathmode}

\tex is in \textit{mathmode} when it is reading mathematics. The |ifmmode| can be used to find out if \tex is in math mode. It denotes the start of an if-then-else control structure that tests whether \tex is currently in either math mode or display math mode. The |\else| part is optional. <TeX code 1> is processed if TeX is in one of the math modes, otherwise it is ignored. 
If the |\else| section is included and TeX is not in one of the math modes then \meta{TeX code 2} is processed; otherwise it is ignored.


\begin{texexample}{Calligraphic fonts}{ex:cal}

\newcommand{\Acal}{\ifmmode \mathcal{Acal} \else \(\mathcal{Acal}\) \fi}
The commandd efines a macro |\Acal| that can be used both in and out of math mode to typeset a calligraphy script A. 

This is a calligraphic {\Acal} or ({\Acal}).
\end{texexample}


\section{Useful packages}

Besides the main packages that we have discussed so far and which should be in everyone's toolbox, there are a number of other packages that you may find useful. One such package is the \pkgname{multienum}, which although not really a packaged specializing in mathematical typesetting, it provides an environment to set multiple equations, as in an exercise or exam.



\subsection{the multienum package}

The \docpkg{multienum} enables  the typestting of multiple equations on one line and numbering them, either with roman, arabic or alpha letters.

\emphasis{usepackage, multienum,begin,end,multienumerate}
\begin{teXXX}
\documentclass{article}
\usepackage{multienum}
\renewcommand{\regularlisti}{\setcounter{multienumi}{0}%
  \renewcommand{\labelenumi}%
  {\addtocounter{multienumi}{1}\alph{multienumi})}}
\begin{document}
\begin{multienumerate}[oddlist]
\mitemxxx{\(x^2 + y^2 = 1\)}{\(a + b = c\)}{\(r-x = y+z\)}
\mitemxxx{\(f - y = z\)}{\(a - b = 2d\)}{\(r+x = 2y-3z\)}
\end{multienumerate}
\end{document}
\end{teXXX}


\begin{multienumerate}[oddlist]
\mitemxxx{\(x^2 + y^2 = 1\)}{\(a + b = c\)}{\(r-x = y+z\)}
\end{multienumerate}
\begin{multienumerate}[evenlist]
\mitemxxx{\(f - y = z\)}{\(a - b = 2d\)}{\(r+x = 2y-3z\)}
\end{multienumerate}


\hrule

\bigskip

We can also enumerate the items using an even-only or odd only
counter.
\subsection*{Answers to Even-Numbered Exercises}
\begin{multienumerate}[evenlist]
\mitemxxxx{Not}{Linear}{Not}{Quadratic}
\mitemxxxo{Not}{Linear}{No; if $x=3$, then $y=-2$.}
\mitemxx{$(x_1,x_2)=(2+\frac{1}{3}t,t)$ or
$(s,3s-6)$}{$(x_1,x_2,x_3)=(2+\frac{5}{2}s-3t,s,t)$}
\mitemx{$(x_1,x_2,x_3,x_4)= (\frac{1}{4}+\frac{5}{4}s+\frac{3}{4}t-u,s,t,u)$
or $(s,t,u,\frac{1}{4}-s+\frac{5}{4}t+\frac{3}{4}u)$}
\mitemxxxx{$(2,-1,3)$}{None}{$(2,1,0,1)$}{$(0,0,0,0)$}
\end{multienumerate}
\bigskip



\newcommand\thecasestudylabel{Case Study}
\newenvironment{casestudy}[2][]{%
   \clearpage\par\leavevmode
   \addcontentsline{toc}{section}{\thecasestudylabel:  #1}
    \topline\vskip1.5pt
   {\noindent\large CASE STUDY\par}\vspace{3.5pt}
   \noindent\textsc{\large#1}\par
   \bigskip
   {#2}
   \medskip
   \topline
}{%
\vfill\bottomline}

\begin{casestudy}[The Riemann hypothesis.]{%
Typeset the text and the equations, shown below. Use a standard minimal to achieve it. Note the fraktur fonts. Text must all be as one paragraph.}

It is well known that the Riemann zeta function $\zeta(s)$ of a complex variable $s=\sigma+it$ is defined by
\[
\zeta(s)=\sum_{n=1}^{\infty}\frac{1}{n^{s}}
\]
for the real part $\mathfrak{R}(s)>1$ and its analytic continuation in the half plane $\sigma>0$ is
\begin{equation}\label{func:zeta}
\zeta(s)=\sum_{n=1}^{N}\frac{1}{n^{s}}-\frac{N^{1-s}}{1-s}-\frac{1}{2}N^{-s}
+s\int_{N}^{\infty}\frac{\frac{1}{2}-\{x\}}{x^{s+1}}dx
\end{equation}
for any integer $N\geq1$ and $\mathfrak{R}(s)>0$.
It extends to an analytic function in the whole complex plane except for having a simple pole at $s=1$. Trivially, $\zeta(-2n)=0$ for all positive integers. All other zeros of the Riemann zeta functions are called its nontrivial zeros.
\bottomline

\begin{teX}
It is well known that the Riemann zeta function $\zeta(s)$ of a complex variable $s=\sigma+it$ is defined by
\[
\zeta(s)=\sum_{n=1}^{\infty}\frac{1}{n^{s}}
\]
for the real part $\mathfrak{R}(s)>1$ and its analytic continuation in the half plane $\sigma>0$ is
\begin{equation}\label{func:zeta}
\zeta(s)=\sum_{n=1}^{N}\frac{1}{n^{s}}-\frac{N^{1-s}}{1-s}-\frac{1}{2}N^{-s}
+s\int_{N}^{\infty}\frac{\frac{1}{2}-\{x\}}{x^{s+1}}dx
\end{equation}
for any integer $N\geq1$ and $\mathfrak{R}(s)>0$.
It extends to an analytic function in the whole complex plane except for having a simple pole at $s=1$. Trivially, $\zeta(-2n)=0$ for all positive integers. All other zeros of the Riemann zeta functions are called its nontrivial zeros.
\end{teX}

Please note that the maths and the text, are typed as a single block. Do not leave any spaces in between. We have used |\mathfrak| for the fraktur font. We have also used $it$ for the imaginary part. This would depend on the style used in your field. 
\end{casestudy}

\clearpage
\section{Gather}

\begin{docEnvironment}{gather}{}
This is like a multi line environment with no special horizontal alignment. All rows
are centered and can have an own equation number:
\end{docEnvironment}

\begin{texexample}{Gather}{ex:gather}
\begingroup
\def\O{\mathcal{O}}
\begin{gather}
 \O,\O(E_4),\O(E_2),\O(H-E_3-E_5),\O(H-E_3),\O(H-E_5),\\ 
\O(2H-E_1-E_3-E_5-E_6),\O(2H-E_1-E_3-E_5),\O(2H-E_3-E_5-E_6).
\end{gather}

So lautet der Beweis des Satzes $2 \times 2 = 4$:
\begin{gather}
(\Omega^{\nu})^{\mu}{}'x = \Omega^{\nu \times \mu}{}'x \text{ Def.}\\
%\begin{split}
\Omega^{2 \times 2}{}'x = (\Omega^{2})^{2}{}'x = (\Omega^{2})^{1 + 1}{}'x = \Omega^{2}{}'\Omega^{2}{}'x = \Omega^{1 + 1}{}'\Omega^{1 + 1}{}'x\nonumber \\
= (\Omega'\Omega)'(\Omega'\Omega)'x = \Omega'\Omega'\Omega'\Omega'x = \Omega^{1 + 1 + 1 + 1}{}'x = \Omega^{4}{}'x.
%\end{split}
\end{gather}


\begin{gather*}
  x = \Omega^{0}{}' x \text{ Def.\ and}\\
  \Omega'\Omega^{\nu}{}'x = \Omega^{\nu+1}{}'x \text{ Def.}
\end{gather*}
\begin{equation}
  x = \Omega^{0}{}' x \text{ Def.\ and}\\
\Omega'\Omega^{\nu}{}'x = \Omega^{\nu+1}{}'x \text{ Def.}
\end{equation}
\endgroup
\end{texexample}


\section{How to number equations either to the left or right?}
\label{eqnochange}

\latexe uses Plain TeX \docAuxCommand{eqno} and \docAuxCommand{leqno} to place the equation number either to the left or the right of the equation. The placement is done automatically and the recommended way is to set this through the documentclass declaration at the start of the document. This can also be set manually later on through the above control sequences, as shown in the Example~\ref{ex:eqno}.

\begin{texexample}{Left or right numbering}{ex:eqno}
\makeatletter
\[ a = b + x^2 \eqno \@eqnnum \]
or at left
\[ a = b + x^2 \leqno \@eqnnum \]
\makeatother
\end{texexample}


%\meaning\text

%\input{./sections/unicodemath}


