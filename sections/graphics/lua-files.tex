\documentclass{article}
\usepackage[utf8]{luainputenc}
\usepackage{url,verbatim,graphicx}
\begin{document}

%\def\Z#1{\directlua{%
%require "lfs"
%function length_of_file(filename)
%  local fh = assert(io.open(filename, "rb"))
%  local len = assert(fh:seek("end"))
%  fh:close()
%  tex.print(len)
%end
%t=length_of_file("#1")}
%}
%
%\Z{small.ini}



%% Function to find a file ...
\gdef\FindFile#1{%
\directlua{local function find_file(...)
    return kpse.find_file(...) or ""
end 
tex.sprint(find_file("#1"))}}
\def\z{\FindFile{che.jpg}}

\includegraphics[width=8cm]{\z}
\end{document}


\verbatiminput{small.ini}
%



\def\Z{%
\directlua { require ("inilazy")
   local tt = assert (inilazy.get"small.ini")
   for k,v in pairs(tt['graphicx']['keys']) do
     tex.print(k)
   end
   tex.print("\par")
   for k,v in pairs(tt) do
     tex.print(k.."\par")
   end
 }
}

\Z


\begin{luacode}
Squares = {}
 for I = 1, 5 do
 Squares[I] = I \string^ 2
 end
 for I = 1, \string#Squares do
 tex.print(I .. "squared is " .. Squares[I].."\par")
 end
\end{luacode}


before\directlua{tex.sprint("\relax")tex.sprint("inbetween")}after

\directlua{t=tex.extraprimitives() 
tex.print("test "..tex.eTeXVersion)

%tex.print(t)
}

\directlua{tex.print(pdf.h.."   "..pdf.v)}

\directlua{info=status.list()
 tex.print(status.luatex_svn)
 tex.print(status.log_name)
 tex.print("\par")
 tex.print("binoppenalty"..tex.binoppenalty.."\par")
 tex.print(tex.pdflastxpos)

 t=tex.primitives()
 }

\end{document}

Try running the following LuaLaTeX code replacing the filename with a file
in your directory


















