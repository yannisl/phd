-- returns a tex string
-- with a font command to print
-- hieroglyphics

 local hiero  = hiero or {}
 local inlinemath      = "$"

 local function getglyph(cmd, codepoint)
 local texstring = "\\Large\\"..cmd.." \\char".."\""..codepoint
  return texstring
end

function getglyphRL(cmd, codepoint)
  local texstring = "\\scalebox{-1}[1]{\\"..cmd.." \\char".."\""..codepoint.."}"
  return texstring
end

function printglyphRL(cmd, codepoint)
  tex.print(getglyphRL(cmd,codepoint))
end

local printhierochar = function (cmd, unicode, options)
-- prints single hieroglyph
   -- formatting commands are set via options
   -- @cmd = font family command

   local tx = "\\"..cmd.." \\char\""..unicode..""
   local direction, size, color
   direction = "LR"

   if options.size then size = options.size
   else
     size = ""
   end
   if options.color then color = "\\color{"..options.color.."} "
   else
     color = ""
   end

   local scale
   if options.scale then scale = options.scale
   else
      scale = 1
   end

   local texcmds = size..color

   if options.direction then direction = options.direction end
   if direction == "RL" then
      tx = "{\\scalebox{"..-1*scale.."}["..scale.."]{"..texcmds.." "..tx.."}}"
   else
tx = "{\\scalebox{"..1*scale.."}["..scale.."]{"..texcmds.." "..tx.."}}"
   end
   return tex.print(tx)
end

function stackrelf(a,b,c)
  return ""..inlinemath.."\\stackrel{\\mbox{"..a.."}}{\\mbox{"..b.."}}"..inlinemath..""
end

--[[
We define a local table to hold data for glyphs
@t : table
--]]

local t = t or {}

--- returns a number of transformations and data
-- to the table holding codepoints for Gardiner lists
---

local function f(codepoint, gardiner, mnemonic,
                 description, determinant)

     local theglyph=""  -- typeset glyph
     local glyphslot
  if gardiner==nil or gardiner=="" then gardiner="empty" end
     if mnemonic==nil or mnemonic=="" then mnemonic="\\phantom{z}" end
     if description==nil then description="no description" end

-- stackengine
   local hook = "\\color{blue}\\huge\\hiero"
   local stackrel = stackrelf(hook.."\\char\""..codepoint.." ","\\footnotesize 0x"..codepoint)
   stackrel = stackrelf(stackrel,"\\footnotesize"..tonumber(codepoint, 16))
   stackrel = stackrelf(stackrel,"\\footnotesize \\arial ".. gardiner)
   stackrel = stackrelf(stackrel,"\\footnotesize \\arial ".. mnemonic)

   theglyph = "\\scalebox{-1}[1]{\\hiero\\char\""..codepoint.."\\hskip0pt }"
   glyphslot = codepoint

return {  fullblock     = "\\scalebox{1}[1]{"..stackrel.."}",
          unicode       = codepoint, --
          gardiner      = gardiner,
          mnemonic      = mnemonic,
          description   = description,
          theglyph      = theglyph,
          glyphslot     = codepoint}
end

-- The Gardiner classification table
-- and mnemonics as per MdC1988
--

t = {
   ["A1"    ]       =  f(13000,"A1","",
                         "kneeling man",
                          "Det.I (Masculine) (paeu)"),
   ["A2"    ]  =  f(13001,"A2"),
   ["A3"    ]  =  f(13002,"A3"),
   ["A4"    ]  =  f(13003,"A4"),
   ["A5"    ] =  f(13004,"A5"),
   ["A5a"   ]  =  f(13005,"A5a"),
   ["A6"    ] =  f(13006,"A6"),
   ["A6a"   ] =  f(13007,"A6a"),
   ["A6b"   ] =  f(13008,"A6b"),
   ["A7"    ]  =  f(13009,"A7"),
   ["A8"    ]  =  f("1300A","A8"),
   ["A9"    ]  =  f("1300B","A9"),
   ["A10"   ]  =  f("1300C","A10"),
   ["A11"   ]  =  f("1300D","A11"),
   ["A12"   ]  =  f("1300E","A12","mSa"),
   ["A13"   ]  =  f("1300F","A13"),
   ["A14"   ]  =  f("13010","A14"),
   ["A14a"  ]  =  f("13011","A14a"),
   ["A15"   ] =  f(13012,"A15","xr"),
   ["A16"   ]  =  f(13013,"A16"),
   ["A17"   ]  =  f(13014,"A17","Xrd"),
   ["A17a"  ]  =  f(13015,"A17a"),
   ["A18"   ]  =  f(13016,"A18"),
   ["A19"   ]  =  f(13017,"A19"),
   ["A20"   ]  =  f(13018,"A20"),
   ["A21"   ]  =  f("13019","A21","sr"),
   ["A22"   ]  =  f("1301A","A22"),
   ["A23"   ]  =  f("1301B","A23"),
   ["A24"   ]  =  f("1301C","A24"),
   ["A25"   ]  =  f("1301D","A25"),
   ["A26"   ]  =  f("1301E","A26"),
   ["A27"   ]  =  f("1301F","A27"),
   ["A28"   ]  =  f("13020","A28"),
   ["A29"   ]  =  f("13021","A29"),
   ["A30"   ]  =  f("13022","A30"),
   ["A31"   ]  =  f("13023","A31"),
   ["A32"   ]  =  f("13024","A32"),
   ["A32a"  ]  =  f("13025","A32a"),
   ["A33"   ]  =  f(13026,"A33","mniw"),
   ["A34"   ]  =  f("13027","A34"),
   ["A35"   ]  =  f("13028","A35"),
   ["A36"   ]  =  f("13029","A36"),
   ["A37"   ]  =  f("1302A","A37"),
   ["A38"   ]  =  f("1302B","A38","qiz"),
   ["A39"   ]  =  f("1302C","A39"),
   ["A40"   ]  =  f("1302D","A40"),
   ["A40a"  ]  =  f("1302E","A40a"),
   ["A41"   ]  =  f("1302F","A41"),
   ["A42"   ]  =  f("13030","A42"),
   ["A42a"  ]  =  f("13031","A42a"),
   ["A43"   ]  =  f("13032","A43"),
   ["A43a"  ]  =  f("13033","A43a"),
   ["A44"   ]  =  f("13034","A44"),
   ["A45"   ]  =  f("13035","A45"),
   ["A45a"  ]  =  f("13036","A45a"),
   ["A46"   ]  =  f("13037","A46"),
   ["A47"   ]  =  f(13038,"A47","iry"),
   ["A48"   ]  =  f("13039","A48"),
   ["A49"   ]  =  f("1303A","A49"),
   ["A50"   ]  =  f("1303B","A50","Sps"),
   ["A51"   ]  =  f("1303C","Spsi"),
   ["A52"   ]  =  f("1303D","A52"),
   ["A53"   ]  =  f("1303E","A53"),
   ["A54"   ]  =  f("1303F","A54"),
   ["A55"   ]  =  f("13040","A55"),
   ["A56"   ]  =  f("13041","A56"),
   ["A57"   ]  =  f("13042","A57"),
   ["A58"   ]  =  f("13043","A58"),
   ["A59"   ]       =  f("13044","A59"),
   ["A60"   ]  =  f("13045","A60"),
   ["A61"   ]  =  f("13046","A61"),
   ["A62"   ]       =  f("13047","A62"),
   ["A63"   ]  =  f("13048","A63"),
   ["A64"   ]  =  f("13049","A64"),
   ["A65"   ]  =  f("1304A","A65"),
   ["A66"   ]  =  f("1304B","A66"),
   ["A67"   ]  =  f("1304C","A67"),
   ["A68"   ]  =  f("1304D","A68"),
   ["A69"   ]  =  f("1304E","A69"),
   ["A70"   ]  =  f("1304F","A70"),

-- Woman and her occupations
-- Unicode points

["B1"   ]  = f("13050","B1"),
["B2"   ]  = f("13051","B2"),
["B3"   ]  = f(13052, "B3", "msi"),
["B4"   ]  = f("13053","B4"),
["B5"   ]  = f("13054","B5"),
["B5a"  ] = f("13055","B5a"),
["B6"   ]  = f("13056","B6"),
["B7"   ]  = f("13057","B7"),
["B8"   ]  = f("13058","B8"),
["B9"   ]  = f("13059","B9"),

-- C series

["C1"   ]  = f("1305A","C1"),
["C2"   ]  = f("1305B","C2"),
["C2a"  ]  = f("1305C","C2a"),
["C2b"  ]  = f("1305D","C2b"),
["C2c"  ]  = f("1305E","C2c"),
["C3"   ]  = f("1305F","DHwty"),
["C4"   ]  = f(13060,"Xnmw"),
["C5"   ]  = f(13061,"Xnmw"),
["C6"   ]  = f(13062,"inpw"),
["C7"   ]  = f(13063,"stX"),
["C8"   ]  = f(13064,"mnw"),
    ["C9"   ]   = f(13065,"C9"),
["C10"  ]  = f(13066,"mAat"),
["C10a" ]  = f(13067,"C10a"),
["C11"  ]  = f(13068,"HH"),
["C12"  ]  = f(13069,"C12"),
["C13"  ]  = f("1306A","C13"),
["C14"  ]  = f("1306B","C14"),
["C15"  ]  = f("1306C","C15"),
["C16"  ]  = f("1306D","C16"),
["C17"  ]  = f("1306E","C17"),
["C18"  ]  = f("1306F","C18"),
["C19"  ]  = f(13070,"C19"),
["C20"  ]  = f(13071,"C20"),
["C21"  ]  = f(13072,"C21"),
["C22"  ]  = f(13073,"C22"),
["C23"  ]  = f(13074,"C23"),
["C24"  ]  = f(13075,"C24"),

-- D series Parts of the Human Body
-- needs checking missed some

["D1"   ]   = f(13076,"tp"),
["D2"   ]   = f(13077,"Hr"),
["D3"   ]  = f(13078,"Sny"),
["D4"   ]   = f(13079,"ir"),
["D5"   ]   = f("1307A","D5"),
["D6"   ]   = f("1307B","D6"),
["D7"   ]   = f("1307C","D7"),
["D8"   ]  = f("1307D","D8"),
["D8a"  ] = f("1307E","D8a"),
["D9"   ]   = f("1307F","rmi"),
["D10"  ]  = f(13080,"wDAt"),
["D11"  ]  = f(13081,"D11"),
["D12"  ]  = f(13082,"D12"),
["D13"  ]  = f(13083,"D13"),
["D14"  ]  = f(13084,"D14"),
["D15"  ]  = f(13085,"D15"),
["D16"  ]  = f(13086,"D16"),
["D17"  ]  = f(13087,"D17"),
["D18"  ]  = f(13088,"D18"),
["D19"  ]  = f(13089,"fnD"),
["D20"  ]  = f("1308A","D20"),
["D21"  ]  = f("1308B","r"),
["D22"  ]  = f("1308C","D22"),
["D23"  ]  = f("1308D","D23"),
["D24"  ]  = f("1308E","spt"),
["D25"  ]  = f("1308F","spty"),
["D26"  ]  = f("13090","D26"),
["D27"  ]  = f(13091,"mnD"),

["D27a" ]  = f(13092,"kA"),
["D28"  ]  = f(13093,"D29"),
["D29"  ]  = f(13094,"D30"),
["D30"  ]  = f(13095,"D31"),
["D31"  ]  = f(13096,"D32"),

["D31a" ]  = f(13097,"D33"),
["D32"  ]  = f(13098,"aHA"),
["D33"  ]  = f(13099,"D34"),
["D34"  ]  = f("1309A","aHA"),
["D34a" ]  = f("1309B","a"),
["D35"  ]  = f("1309C","D35"),
["D36"  ]  = f("1309D","D36"),
["D37"  ]  = f("1309E","D37"),
["D38"  ]  = f("1309F","D38"),
["D39"  ]  = f("130A0","D39"),

["D40" ]  = f("130A1","Dsr"),
["D41" ]  = f("130A2","d"),
["D42" ]  = f("130A3","Dba"),
["D43" ]  = f("130A4","D43"),
["D44" ]  = f("130A5","D44"),
["D45" ]  = f("130A6","D45"),
["D46" ]  = f("130A7","D46"),
["D46a"]  = f("130A8","D46a"),
["D47" ]  = f("130A9","D47"),
["D48" ]  = f("130AA","D48"),
["D48a"]  = f("130AB","D48a"),
["D49" ]  = f("130AC","D49"),
["D50" ]  = f("130AD","D50"),
["D50a"]  = f("130AE","D50a"),
["D50b"]  = f("130AF","D50b"),
["D50c"]  = f("130B0","D50c"),
["D50d"]  = f("130B1","D50d"),
["D50e"]  = f("130B2","D50e"),
["D50f"]  = f("130B3","D50f"),
["D50g"]  = f("130B4","D50g"),
["D50h"]  = f("130B5","D50h"),
["D50i"]  = f("130B6","D50i"),
["D51" ]  = f("130B7","D51"),
["D52" ]  = f("130B8","mt"),
["D52a"]  = f("130B9","D52a"),
["D53" ]  = f("130BA","D53"),
["D54" ]  = f("130BB","D54"),
["D54a"]  = f("130BC","D54a"),
["D55" ]  = f("130BD","D55"),
["D56" ]  = f("130BE","rd"),
["D57" ]  = f("130BF","D57"),
["D58" ]  = f("130C0","b"),
["D59" ]  = f("130C1","ab"),
["D60" ]  = f("130C2","wab"),
["D61" ]  = f("130C3","sAH"),
["D62" ]  = f("130C4","D62"),
["D63" ]  = f("130C5","D63"),
["D64" ]  = f("130C6","D64"),
["D65" ]  = f("130C7","D65"),
["D66" ]  = f("130C8","D66"),
["D67" ]  = f("130C9","D67"),
["D67a"]  = f("130CA","D67a"),
["D67b"]  = f("130CB","D67b"),
["D67c"]  = f("130CC","D67c"),
["D67d"]  = f("130CD","D67d"),
["D67e"]  = f("130CE","D67e"),
["D67f"]  = f("130CF","D67f"),
["D67g"]  = f("130D0","D67g"),
["D67h"]  = f("130D1","D67h"),

-- E

    ["E1"  ]  = f("130D2","E1"),
    ["E2"  ]  = f("130D3","E2"),
    ["E3"  ]  = f("130D4","E3"),
    ["E4"  ]  = f("130D5","E4"),
    ["E5"  ]  = f("130D6","E5"),
    ["E6"  ]        = f("130D7","E6","zzmt"),
    ["E7"  ]        = f("130D8","E7"),
    ["E8"  ]  = f("130D9","E8"),
    ["E8a" ]      = f("130DA","E8a"),
    ["E9"  ]  = f("130DB","E9"),
    ["E9a" ]  = f("130DC","E9a"),
    ["E10" ]  = f("130DD","E10"),
["E11" ]  = f("130DE","E11"),
["E12" ]  = f("130DF","E12"),
["E13" ]  = f("130E0","E13"),
["E14" ]  = f("130E1","E14"),
["E15" ]  = f("130E2","E15"),
["E16" ]  = f("130E3","E16"),
["E16a"]  = f("130E4","E16a"),
["E17" ]  = f("130E5","E17","zAb"),
["E17a"]  = f("130E6","E17a",""),
["E18" ]  = f("130E7","E18",""),
["E19" ]  = f("130E8","E19",""),
["E20" ]  = f("130E9","E20"),
["E20a"]  = f("130EA","E20a"),
["E21" ]  = f("130EB","E21",""),
["E22" ]  = f("130EC","E22","mAi"),
["E23" ]  = f("130ED","E23","l"),
["E24" ]  = f("130EE","E24","Aby"),
["E25" ]  = f("130EF","E25",""),
["E26" ]  = f("130F0","E26",""),
["E27" ]  = f("130F1","E27",""),
["E28" ]  = f("130F2","E28",""),
["E28a"]  = f("130F3","E28a",""),
["E29" ]  = f("130F4","E29",""),
["E30" ]  = f("130F5","E30",""),
["E31" ]  = f("130F6","E31",""),
["E32" ]  = f("130F7","E32",""),
["E33" ]  = f("130F8","E33",""),
["E34" ]  = f("130F9","E34","wn"),
["E34a"]  = f("130FA","E34a",""),
["E35" ]  = f("0000","E35","unused"), -- see http://www.rostau.org.uk/aegyptian-l/archives/week617.txt
["E36" ]  = f("130FB","E36",""),
["E37" ]  = f("130FC","E37",""),
["E38" ]  = f("130FD","E38",""),

-- F series

["F1"  ]  = f("130FF","F1",""),
["F2"  ]  = f("13100","F2",""),
["F3"  ]  = f("13101","F3",""),
["F4"  ]  = f(13102,"F4","HAt"),
["F5"  ]  = f(13103,"F5","SsA"),
["F6"  ]  = f(13104,"F6",""),
["F7"  ]  = f(13105,"F7",""),
["F8"  ]  = f(13106,"F8",""),
["F9"  ]  = f(13107,"F9",""),
["F10" ]  = f(13108,"F10",""),
["F11" ]  =  f(13109,"F11",""),
["F12" ]  =  f("1310A","F12","wsr"),
["F13" ]  =  f("1310B","F13","wp"),
["F13a"]  =  f("1310C","F13a",""),
["F14" ]  =  f("1310D","F14",""),
["F15" ]  =  f("1310E","F15",""),
["F16" ]  =  f("1310F","F16","db"),
["F17" ]  =  f("13110","F17",""),
["F18" ]  = f(13111,"F18","Hw"),
["F19" ]  = f(13112,"F19",""),
["F20" ]  = f(13113,"F20","ns"),
["F21" ]  = f(13114,"F21","sDm"),
["F21a"]  = f(13115,"F21a",""),
["F22" ]  = f(13116,"F22","pH"),
["F23" ]       = f(13117,"F23","xpS"),
["F24" ]       = f(13118,"F24","xpS"),
["F25" ]       = f(13119,"F25","wHm"),
["F26" ]       = f("1311A","F26","Xn"),
["F27" ]       = f("1311B","F27",""),
["F28" ]       = f("1311C","F28",""),
["F29" ]       = f("1311D","F29","sti"),
["F30" ]       = f("1311E","F30","Sd"),
["F31" ]       = f("1311F","F31","ms"),
    ["F31a"]       = f("13120","F31a",""),
    ["F32" ]       = f(13121,"F32","X"),
["F33" ]       = f(13122,"F33","sd"),
["F34" ]       = f(13123,"F34","ib"),
["F35" ]       =  f(13124,"F35","nfr"),
["F36" ]       = f(13125,"F36","zmA"),
["F37" ]       = f(13126,"F37",""),
["F37a"]       = f(13127,"F37a",""),
["F38" ]       = f(13128,"F38",""),
["F38a"]       = f(13129,"F38",""),
["F39" ]       = f("1312A","F39","imAx"),
["F40" ]       = f("1312B","F40","Aw"),
["F41" ]       = f("1312C","F41","Aw"),
["F42" ]       = f("1312D","F42","spr"),
["F43" ]       = f("1312E","F43","Aw"),
["F44" ]       = f("1312F","F44","isw"),
["F45" ]       = f("13130","F45",""),
["F45a"]       = f("13131","F45a",""),
["F46" ]       = f(13132,"F46","pXr"),
["F46a"]       = f(13133,"F46a",""),
["F47" ]       = f(13134,"F47","qAb"),
["F47a"]       = f(13135,"F47a",""),
["F48" ]       = f(13136,"F48",""),
["F49" ]       = f(13137,"F49",""),
["F50" ]       = f(13138,"F50",""),
["F51" ]       = f(13139,"F51",""),
["F51a"]       = f("1313A","F51a",""),
["F51b"]       = f("1313B","F51b",""),
["F51c"]       = f("1313C","F51c",""),
["F52" ]       = f("1313D","F52",""),
["F53" ]       = f("1313E","F53",""),
["G1"  ]       = f("1313F","G1","A"),
["G2"  ]       = f("13140","G2","AA"),
["G3"  ]       = f("13141","G3",""),
["G4"  ]       = f(13142,"G4","tyw"),
["G5"  ]       = f("13143","G5",""),
["G6"  ]       = f("13144","G6",""),
["G6a" ]       = f("13145","G6a",""),
["G7"  ]       = f("13146","G7",""),
["G7a" ]       = f("13147","G7a",""),
["G7b" ]       = f("13148","G7b",""),
["G8"  ]       = f("13149","G8",""),
["G9"  ]       = f("1314A","G9",""),
["G10" ]       = f("1314B","G10",""),
["G11" ]       = f("1314C","G11",""),
["G11a"]       = f("1314D","G11a",""),
["G12" ]       = f("1314E","G12",""),
["G13" ]       = f("1314F","G13",""),
["G14" ]       = f("13150","G14","mwt"),
["G15" ]       = f("13151","G15",""),
["G16" ]       = f(13152,"G16","nbty"),
["G17" ]       = f(13153,"G17","m"),
["G18" ]       = f(13154,"G18","mm"),
["G19" ]       = f("13155","G19","mwt"),
["G20" ]       = f("13156","G20","mwt"),
["G20a"]       = f("13157","G20a","mwt"),
["G21" ]       = f(13158,"G21","nH"),
["G22" ]       = f(13159,"G22","Db"),
["G23" ]       = f("1315A","G23","rxyt"),
["G24" ]       = f("1315B","G24",""),
["G25" ]       = f("1315C","G25","Ax"),
["G26" ]       = f("1315D","G26",""),
["G26a"]       = f("1315E","G26a",""),
["G27" ]       = f("1315F","G27","dSr"),
["G28" ]       = f("13160","G28","gm"),
["G29" ]       = f("13161","G29","bA"),
["G30" ]       = f(13162,"G30","baHi"),
["G31" ]       = f(13163,"G31",""),
["G32" ]       = f(13164,"G32","baHi"),
["G33" ]       = f(13165,"G33",""),
["G34" ]       = f(13166,"G34","baHi"),
["G35" ]       = f(13167,"G35","aq"),
["G36" ]       = f(13168,"G36","wr"),
["G36a"]       = f(13169,"G36a",""),
["G37" ]       = f("1316A","G37",""),
["G37a"]       = f("1316B","G37a",""),
["G38" ]       = f("1316C","G38","gb"),
["G39" ]       = f("1316D","G39","zA"),
["G40" ]       = f("1316E","G40","pA"),
["G41" ]       = f("1316F","G41","xn"),
["G42" ]       = f("13170","G42","wSA"),
["G43" ]       = f(13171,"G43","w"),
["G43a"]       = f(13172,"G43a","w"),
["G44" ]       = f(13173,"G44","ww"),
["G45" ]       = f(13174,"G45",""),
["G45a"]       = f(13175,"G45a",""),
["G46" ]       = f(13176,"G46","mAw"),
["G47" ]       = f(13177,"G47","TA"),
["G48" ]       = f(13178,"G48",""),
["G49" ]       = f(13179,"G49",""),
["G50" ]       = f("1317A","G50",""),
["G51" ]       = f("1317B","G51",""),
["G52" ]       = f("1317C","G52",""),
["G53" ]       = f("1317D","G53",""),
["G54" ]       = f("1317E","G54","snD"),
["H1"  ]       = f("1317F","H1",""),
["H2"  ]       = f(13180,"H2","pq"),
["H3"  ]       = f(13181,"H3","pAq"),
["H4"  ]       = f(13182,"H4","nr"),
["H5"  ]       = f(13183,"H5",""),
["H6"  ]       = f(13184,"H6","Sw"),

["I1"  ]       = f(13188,"I1","aSA"),
["I2"  ]       = f(13189,"I2","Styw"),
["I3"  ]       = f("1318A","I3","mzH"),
["I4"  ]       = f("1318B","I4","sbk"),
["I5"  ]       = f("1318C","I5","sAq"),
["I5a" ]       = f("1318D","I5a",""),

["I6"  ]       = f("1318E","I6","km"),
["I7"  ]       = f("1318F","I7",""),
["I8"  ]       = f(13190,"I8","Hfn"),
["I9"  ]       = f(13191,"I9","f"),
["I9a" ]       = f(13192,"I9a",""),

["I10" ]       = f(13193,"I10","D"),
["I10a"]       = f(13194,"I10a",""),

["I11" ]       = f(13195,"I11","DD"),
["I11a"]       = f(13196,"I11a",""),

["I12" ]       = f(13197,"I12",""),
["I13" ]       = f(13198,"I13",""),
["I14" ]       = f(13199,"I14",""),
["I15" ]       = f("1319A","I15",""),

["K1"  ]       = f("1319B","K1","in"),
["K2"  ]       = f("1319C","K2","in"),
["K3"  ]       = f("1319D","K3","ad"),
["K4"  ]       = f("1319E","K4","XA"),
["K5"  ]       = f("1319F","K5","bz"),
["K6"  ]       = f("131A0","K6","nSmt"),
["K7"  ]       = f("131A1","K7",""),
["K8"  ]       = f("131A2","K8",""),

-- Insects

["L1"  ]       = f("131A3","xpr"),
["L2"  ]       = f("131A4","L2","bit"),
["L2a" ]       = f("131A5","L2a","bit"),
["L3"  ]       = f("131A6","L3","bit"),
["L4"  ]       = f("131A7","L4",""),
["L5"  ]       = f("131A8","L5",""),
["L6"  ]       = f("131A9","L6",""),
["L6a" ]       = f("131AA","L6a",""),
["L7"  ]       = f("131AB","L7","srqt"),
["L8"  ]       = f("131AC","L8",""),

--
["M1"  ]       = f("131AD","M1","iAm"),
["M1a" ]       = f("131AE","M1a",""),
["M1b" ]       = f("131AF","M1b",""),
["M2"  ]       = f("131B0","M2","Hn"),
["M3"  ]       = f("131B1","M3","xt"),
["M3a" ]       = f("131B2","M3a",""),
["M4"  ]       = f("131B3","M4","rnp"),
["M5"  ]       = f("131B4","M5",""),
["M6"  ]       = f("131B5","M6","tr"),
["M7"  ]       = f("131B6","M7",""),
["M8"  ]       = f("131B7","M8","SA"),
["M9"  ]       = f("131B8","M9","zSn"),
["M10" ]       = f("131B9","M10",""),
["M10a"]       = f("131BA","M10a",""),

["M11" ]       = f("131BB","M11","wdn"),
["M12" ]       = f("131BC","M12","xA"),
["M12a"]       = f("131BD","M12a",""),
["M12b"]       = f("131BE","M12b",""),
["M12c"]       = f("131BF","M12c",""),

["M12d"]       = f("131C0","M12d",""),
["M12e"]       = f("131C1","M12e",""),
["M12f"]       = f("131C2","M12f",""),
["M12g"]       = f("131C3","M12g",""),
["M12h"]       = f("131C4","M12h",""),

["M13" ]       = f("131C5","M13","wAD"),
["M14" ]       = f("131C6","M14",""),

["M15" ] = f("131C7","M15",""),
["M15a"] = f("131C8","M15a",""),
["M16" ] = f("131C9","HA"),
["M16a"] = f("131CA","M16a",""),

["M17" ] = f("131CB","M17","i"),
["M17a"] = f("131CC","M17a",""),

["M18" ] = f("131CD","M18","ii"),
["M19" ] = f("131CE","M19",""),

["M20" ] = f("131CF","M20","sxt"),
["M21" ] = f("131D0","M21","sm"),
["M22" ] = f("131D1","M22",""),
["M22a"] = f("131D2","M22a",""),

["M23" ] = f("131D3","M23","sw"),
["M24" ]  = f("131D4","M24","rsw"),
["M24a"] = f("131D5","M24a","M24a",""),

["M25" ] = f("131D6","M25",""),

["M26" ] = f("131D7","M26","Sma"),
["M27" ] = f("131D8","M27",""),
["M28" ] = f("131D9","M28",""),
["M28a"] = f("131DA","M28a",""),

["M29" ] = f("131DB","M29","nDm"),
["M30" ] = f("131DC","M30","bnr"),
["M31" ] = f("131DD","M31",""),
["M31a"] = f("131DE","M31a",""),

["M32" ] = f("131EF","M32",""),
["M33" ] = f("131E0","M33",""),
["M33a"] = f("131E1","M33a",""),
    ["M33b"] = f("131E2","M33b",""),
["M34" ] = f("131E3","M34","bdt"),
["M35" ] = f("131E4","M35",""),

["M36" ] = f("131E5","M36","Dr"),
["M37" ] = f("131E6","M37",""),
["M38" ] = f("131E7","M38",""),
["M39" ] = f("131E8","M39",""),

["M40" ] = f("131E9","M40","iz"),
["M40a"] = f("131EA","M40a",""),
["M41" ] = f("131EB","M41",""),
["M42" ] = f("131EC","M42",""),
["M43" ] = f("131ED","M43",""),
["M44" ] = f("131EE","M44",""),
--
["N1"  ] = f("131EF","N1","pt"),
["N2"  ] = f("131F0","N2",""),
["N3"  ] = f("131F1","N3",""),
["N4"  ] = f("131F2","N4","iAdt,idt"),

["N5"  ] = f("131F3","ra,zw"),
["N6"  ] = f("131F4","N6",""),
["N7"  ] = f("131F5","N7",""),

["N8"  ] = f("131F6","N8","Hnmmt"),
["N9"  ] = f("131F7","N9","pzD"),
["N10" ] = f("131F8","N10",""),

["N11" ] = f("131F9","N11","Abd,iaH"),
["N12" ] = f("131FA","N12","iaH"),
["N13" ] = f("131FB","N13",""),

["N14" ] = f("131FC","N14","sbA.dwA"),

["N15" ] = f("131FD","N15","dwAt"),
["N16" ] = f("131FE","N16","tA"),
["N17" ] = f("131FF","N17",""),

["N18" ] = f("13200","N18","iw"),
["N18a"] = f("13201","N18a",""),
["N18b"] = f("13202","N18b",""),

["N19" ] = f(13203,"N19",""),

["N20" ] = f(13204,"wDb"),
["N21" ] = f(13205,"N21",""),
["N22" ] = f(13206,"N22",""),
["N23" ] = f(13207,"N23",""),

["N24" ] = f(13208,"spAt"),
["N25" ] = f(13209,"xAst"),
["N25a"] = f("1320A","N25a",""),

["N26" ] = f("1320B","N26","Dw"),
["N27" ] = f("1320C","N27","Axt"),
["N28" ] = f("1320D","N28","xa"),
["N29" ] = f("1320E","N29","q"),
["N30" ] = f("1320F","N30","iAt"),

["N31" ] = f("13210","N31",""),
["N32" ] = f("13211","N32",""),
["N33" ] = f("13212","N33",""),
["N33a"] = f("13213","N33a",""),
["N34" ] = f(13214,"N34",""),
["N34a"] = f(13215,"N34a",""),

["N35" ] = f(13216,"N35","n"),
["N35a"] = f(13217,"N35a","mw"),
["N36" ] = f(13218,"N36",""),

["N37" ] = f("13219","N37","S"),
["N38" ] = f("1321A","N38",""),
["N39" ] = f("1321B","N39",""),
["N40" ] = f("1321C","N40","Sm",""),
["N41" ] = f("1321D","N41","id"),
["N42" ] = f("1321E","N42",""),

["O1"  ] = f("13250","O1","pr"),
["O1a" ] = f("13251","O1a","pr"),
["O2"  ] = f("13252","O2",""),
["O3"  ] = f("13253","O3",""),
["O4"  ] = f(13254,"O4","h"),
["O5"  ] = f(13255,"O5","h"),
["O5a" ] = f(13256,"O5a","h"),

["O6"  ] = f(13257,"O6","Hwt"),
["O6a" ] = f(13258,"O6a",""),
["O6b" ] = f(13259,"O6b",""),
["O6c" ] = f("1325A","O6c",""),
["O6d" ] = f("1325B","O6d",""),
["O6e" ] = f("1325C","O6e",""),
["O6f" ] = f("1325D","O6f",""),

["O7"  ] = f("1325E","O7","h"),
["O8"  ] = f("1325F","O8","h"),
["O9"  ] = f(13260,"O9",""),
["O10" ] = f(13261,"O10",""),
["O10a"] = f(13262,"O10a",""),
["O10b"] = f(13262,"O10b",""),
["O10c"] = f(13262,"O10c",""),

["O11" ] = f(13265,"aH"),
["O12" ] = f(13266,"O12",""),
["O13" ] = f(13267,"O13",""),
["O14" ] = f(13268,"O14",""),

["O15" ] = f(13269,"wsxt"),
["O16" ] = f("1326A","O16",""),
["O17" ] = f("1326B","O17",""),

["O18" ] = f("1326C","kAr"),
["O19" ] = f("1326D",""),
["O19a"] = f("1326E",""),

["O20" ] = f("1326F","O20",""),
["O20a"] = f("13270","O20a",""),
["O21" ] = f("13271","O21",""),
["O22" ] = f("13272","O22","zH"),
["O23" ] = f("13273","O23",""),
["O24" ] = f("13274","O24",""),
["O24a"] = f("13275","O24a",""),

["O25" ] = f(13276,"O25","txn"),
["O25a"] = f("13277","O25a",""),

["O26" ] = f(13278,"O26",""),
["O27" ] = f(13279,"O27","txn"),
["O28" ] = f("1327A","O28","iwn"),
["O29" ] = f("1327B","O29","aA"),
["O29a"] = f("1327C","O29a"),

["O30" ] = f("1327D","O30","zxnt"),
["O30a"] = f("1327E","O30a",""),

["O31" ] = f("1327F","O31"),
["O32" ] = f("13280","O32"),
["O33" ] = f("13281","O33"),
["O33a"] = f("13282","O33a"),

["O34" ] = f(13283,"O34","z"),
["O35" ] = f(13284,"O35","zb"),
["O36" ] = f(13285,"O36","inb"),
["O36a"] = f(13286,"O36a",""),
["O36b"] = f(13287,"O36b",""),
["O36c"] = f(13288,"O36c","inb"),
["O36d"] = f(13289,"O36d",""),
["O37" ] = f("1328A","O37",""),
["O38" ] = f("1328B","O38",""),
["O39" ] = f("1328C","O39",""),
["O40" ] = f("1328D","O40",""),
["O41" ] = f("1328E","O41",""),
["O42" ] = f("1329F","O42","Szp"),
["O43" ] = f(13290,"O43",""),
["O44" ] = f(13291,"O44","Szp"),
["O45" ] = f(13292,"O45","ipt"),
["O46" ] = f(13293,"O46",""),
["O47" ] = f(13294,"O47","nxn"),
["O48" ] = f(13295,"O42","Szp"),
["O49" ] = f(13296,"O49","niwt"),
["O50" ] = f(13297,"O50","zp"),
["O50a"] = f(13298,"O50a","Snwt"),
["O50b"] = f(13299,"O50b",""),
["O51" ] = f("1329A","O51",""),

["P1"  ] = f("1329B","P1",""),
["P1a" ] = f("1329C","P1a",""),
["P2"  ] = f("1329D","P2",""),
["P3"  ] = f("1329E","P3",""),
["P3a" ] = f("1329F","P3a",""),
["P4"  ] = f("132A0","P4","wHa"),
["P5"  ] = f("132A1","P5","nfw"),
["P6"  ] = f("132A2","P6","TAw"),
["P7"  ] = f("132A3","P7","aHa"),
["P8"  ] = f("132A4","P8","xrw"),
["P9"  ] = f("132A5","P9",""),
["P10" ] = f("132A6","P10",""),
["P11" ] = f("132A7","P11",""),

["Q1"  ] = f("132A8","Q1","st"),
["Q2"  ] = f("132A9","Q2","wz"),
["Q3"  ] = f("132AA","Q3","p"),
["Q4"  ] = f("132AB","Q4",""),
["Q5"  ] = f("132AC","Q5",""),
["Q6"  ] = f("132AD","Q6","qrsw"),
["Q7"  ] = f("132AE","Q7",""),

["R1"  ] = f("132AF","R1","xAwt"),
["R2"  ] = f("132B0","R2",""),
["R2a" ] = f("132B1","R2a",""),
["R3"  ] = f("132B2","R3",""),
["R3a" ] = f("132B3","R3a",""),
["R3b" ] = f("132B4","R3b",""),
["R4"  ] = f("132B5","R4","Htp,kAp"),
["R5"  ] = f("132B6","R5","kAp"),
["R6"  ] = f("132B7","R6",""),
["R7"  ] = f("132B8","R7","snTr"),
["R8"  ] = f("132B9","R8","nTr"),
["R9"  ] = f("132BA","R9","bd"),
["R10" ] = f("132BB","R10",""),
["R10a"] = f("132BC","R10a",""),
["R11" ] = f("132BD","R11","dd,Dd"),
["R12" ] = f("132BE","R12",""),
["R13" ] = f("132BF","R13",""),
["R14" ] = f("132C0","R14","imnt"),
["R15" ] = f("132C1","R15","iAb"),
["R16" ] = f("132C2","R16","wx"),
["R16a"] = f("132C3","R16a",""),
["R17" ] = f("132C4","R17",""),
["R18" ] = f("132C5","R18",""),
["R19" ] = f("132C6","R19",""),
["R20" ] = f("132C7","R20",""),
["R21" ] = f("132C8","R21",""),
["R22" ] = f("132C9","R22","xm"),
["R23" ] = f("132CA","R23",""),
["R24" ] = f("132CB","R24",""),
["R25" ] = f("132CC","R25",""),
["R26" ] = f("132CD","R26",""),
["R27" ] = f("132CE","R27",""),
["R28" ] = f("132CF","R28",""),
["R29" ] = f("132D0","R29",""),

["S1"  ] = f("132D1","S1","HDt"),
["S2"  ] = f("132D2","S2",""),
["S2a" ] = f("132D3","S2a","HDt"),
["S3"  ] = f("132D4","S3","dSrt,N"),
["S4"  ] = f("132D5","S4","HDt"),
["S5"  ] = f("132D6","S5","HDt"),
["S6"  ] = f("132D7","S6","sxmty"),
["S6a" ] = f("132D8","S6a",""),

["S7"  ] = f("132D9","S7","xprS"),
["S8"  ] = f("132DA","S8","Atf"),
["S9"  ] = f("132DB","S9","Swty"),
["S10" ] = f("132DC","S10","mDH"),
["S11" ] = f("132DD","S11","wsx"),
["S12" ] = f("132DE","S12","nbw"),
["S13" ] = f("132DF","S13","sxmty"),
["S14" ] = f("132E0","S14",""),
["S14a"] = f("132E1","S14a",""),
["S14b"] = f("132E2","S14b",""),
["S15" ] = f("132E3","S15","tHn"),
["S16" ] = f("132E4","S16",""),
["S17" ] = f("132E5","S17",""),
["S17a"] = f("132E6","S17a",""),

["S18" ] = f("132E7","S18","mnit"),
["S19" ] = f("132E8","S19","sDAw"),
["S20" ] = f("132E9","S20","xtm"),
["S21" ] = f("132EA","S21",""),

["S22" ] = f("132EB","S22","sT"),
["S23" ] = f("132EC","S23","dmD"),
["S24" ] = f("132ED","S24","Tz"),
["S25" ] = f("132EE","S25","Tz"),

["S26" ] = f("132EF","S26","Sndyt"),
["S26a"] = f("132F0","S26a",""),
["S26b"] = f("132F1","S26b",""),

["S27" ] = f("132F2","S27","mnxt"),
["S28" ] = f("132F3","S28","Tz"),
["S29" ] = f("132F4","S29","s"),

["S30" ] = f("132F5","S30","sf"),
["S31" ] = f("132F6","S31",""),

["S32" ] = f("132F7","S32",""),
["S33" ] = f("132F8","S33",""),
["S34" ] = f("132F9","S34",""),

["S35" ] = f("132FA","S35","Swt"),
["S35a"] = f("132FB","S35a",""),
["S36" ] = f("132FC","S36",""),
["S37" ] = f("132FD","S37","xw"),
["S38" ] = f("132FE","S38","HqA"),
["S39" ] = f("132FF","S39","awt"),
["S40" ] = f(13300,"S40","wAs"),
["S41" ] = f(13301,"S41","Dam"),
["S42" ] = f(13302,"S42","abA"),
["S43" ] = f(13303,"S43","xrp"),
["S44" ] = f(13304,"S44","sxm"),
["S45" ] = f(13305,"S45","nxxw"),
["S46" ] = f("13306","S46",""),

["T1"  ] = f("13307","T1",""),
["T2"  ] = f("13308","T2",""),
["T3"  ] = f(13309,"T3","HD"),
["T3a" ] = f("1330A","T3a",""),
["T4"  ] = f("1330B","T4",""),
["T5"  ] = f("1330C","T5",""),

["T6"  ] = f("1330D","T6","HDD"),
["T7"  ] = f("1330E","T7",""),
["T7a" ] = f("1330F","T7a",""),
["T8"  ] = f("13310","T8",""),
["T8a" ] = f("13311","T8a",""),
["T9"  ] = f(13312,"T9","pd"),

["T10" ] = f(13314,"T10","pD"),
["T11" ] = f(13315,"T11","zin,zwn,sXr"),
    ["T11a"] = f("13316","T11a",""),
["T12" ] = f(13317,"T12","Ai,Ar,rwd,ewD"),
["T13" ] = f(13318,"T13","rs"),

["T14" ] = f(13319,"qmA"),
    ["T15" ] = f("1331A","T15",""),
    ["T16" ] = f("1331B","T16",""),
    ["T16a"] = f("1331C","T16a",""),
["T17" ] = f("1331D","T17","wrrt"),
["T18" ] = f("1331E","T18","Sms"),
["T19" ] = f("1331F","T19","qs"),
    ["T20" ] = f("13320","T20",""),
    ["T21" ] = f("13321","T21",""),
["T22" ] = f(13322,"T22","sn"),
    ["T23" ] = f("13323","T23",""),
["T24" ] = f(13324,"T24","iH"),
["T25" ] = f(13325,"T25","DbA"),
    ["T26" ] = f("13326","T26","T2",""),
    ["T27" ] = f("13327","T27",""),
["T28" ] = f(13328,"T28","Xr"),
["T29" ] = f(13329,"T29","nmt"),
    ["T30" ] = f("1333A","T30","T2",""),
["T31" ] = f("1333B","T31","sSm"),
    ["T32" ] = f("1333C","T32",""),
    ["T32a"] = f("1333D","T32a",""),
    ["T33" ] = f("1333E","T33",""),
    ["T33a"] = f("1333F","T33a",""),
["T34" ] = f("13330","nm"),
    ["T35" ] = f("13331","T35",""),
    ["T36" ] = f("13332","T36",""),

["U1"  ] = f("13333","U1","mA"),
["U2"  ] = f("13334","U2",""),
["U3"  ] = f("13335","U3",""),
["U4"  ] = f("13336","U4",""),
["U5"  ] = f("13337","U5",""),

["U6"  ] = f(13338,"mr"),
["U6a" ] = f("13339","U6a",""),
["U6b" ] = f("1333A","U6b",""),
["U7"  ] = f("1333B","U7",""),
["U8"  ] = f("1333C","U8",""),
["U9"  ] = f("1333D","U9",""),

["U10" ] = f("1333E","it"),

["U11" ] = f("1333F","U11","HqAt"),
["U12" ] = f("13340","U12",""),
["U13" ] = f(13341,"U13","hb,Sna"),
["U14" ] = f(13342,"U14",""),

["U15" ] = f(13343,"U15","tm"),
["U16" ] = f(13344,"U16","biA"),
["U17" ] = f(13345,"U17","grg"),
["U18" ] = f(13346,"U18",""),
["U19" ] = f(13347,"U19",""),
["U20" ] = f(13348,"U20",""),
["U21" ] = f(13349,"U21","stp"),

["U22" ] = f("1334A","U22","mnx"),

["U23" ] = f("1334B","U23","Ab"),
["U23a"] = f("1334C","U23a",""),
["U24" ] = f("1334D","U24","Hmt"),
["U25" ] = f("1334E","U25",""),

["U26" ] = f("1334F","U26","wbA"),
["U27" ] = f("13350","U27",""),
["U28" ] = f("13351","U28","DA"),
["U29" ] = f("13352","U29",""),
["U29a"] = f("13353","U29a",""),
["U30" ] = f("13354","U30",""),
["U31" ] = f("13355","U31","rtH"),
["U32" ] = f(13356,"U32","zmn"),
["U32a"] = f("13357","U32a",""),
["U33" ] = f("13358","U33","ti"),
["U34" ] = f(13359,"U34","xsf"),
["U35" ] = f("1335A","U35",""),
["U36" ] = f("1335B","U36","Hm"),
["U37" ] = f("1335C","U37",""),
["U38" ] = f("1335D","U38","mxAt"),
["U39" ] = f("1335E","U39",""),
["U40" ] = f("1335F","U40",""),
["U41" ] = f("13360","U41",""),
["U42" ]  = f("13361","U42",""),
---
-- Gardiner symbols V mapped to Unicode
-- and MdC
---
["V1"  ]  = f(13362,"V1","100"),
["V1a" ]  = f(13363,"V1a",""),
    ["V1b" ]  = f(13364,"V1b",""),
    ["V1c" ] = f(13365,"V1c",""),
   ["V1d" ] = f(13366,"V1d",""),
   ["V1e" ]  = f(13367,"V1e",""),
   ["V1f" ]  = f(13368,"V1f",""),
   ["V1g" ]  = f(13369,"V1g",""),
   ["V1h" ]  = f("1336A","V1h",""),
   ["V1i" ]  = f("1336B","V1i",""),
["V2"  ]  = f("1336C","V2","sTA"),
["V2a" ]  = f("1336D","V2a",""),
["V3"  ]  = f("1336E","V3","sTAw"),
["V4"  ]  = f("1336F","V4","wA"),
["V5"  ]  = f("13370","V5","snT"),
["V6"  ]  = f(13371,"V6","Ss"),
["V7"  ]  = f(13372,"V7","Sn"),
["V7a" ]  = f(13373,"V7a",""),
["V7b" ]  = f(13374,"V7b",""),
["V8"  ]  = f(13375,"V8",""),
["V9"  ]  = f(13376,"V9",""),
["V10" ]  = f(13377,"V10",""),
["V11" ]  = f(13378,"V11",""),
["V11a"]  = f(13379,"V11a",""),
["V11b"]  = f("1337A","V11b",""),
["V11c"]  = f("1337B","V11c",""),
["V12" ]  = f("1337C","V12","arq"),
["V12a"]  = f("1337D","V12a",""),
["V12b"]  = f("1337E","V12b",""),
["V13" ]  = f("1337F","V13","T"),
["V14" ]  = f("13380","V14","T"),
["V15" ]  = f("13381","V15","iTi"),
["V16" ]  = f("13382","V16",""),
["V17" ]  = f("13383","V17",""),
["V18" ]  = f("13384","V18",""),
["V19" ]  = f("13385","V19","mDt,XAr,TmA"),
["V20" ]  = f(13386,"V20","10,mD"),
["V20a"]  = f(13387,"V20a",""),
["V20b"] = f(13388,"V20b",""),
["V20c"]  = f(13389,"V20c",""),
["V20d"]  = f("1338A","V20d",""),
["V20e"]  = f("1338B","V20e",""),
["V20f"]  = f("1338C","V20f",""),
["V20g"]  = f("1338D","V20g",""),
["V20h"]  = f("1338E","V20h",""),
["V20i"]  = f("1338F","V20i",""),
["V20j"]  = f("13390","V20j",""),
["V20k"]  = f("13391","V20k",""),
["V20l"]  = f("13392","V20l",""),
["V21" ]  = f("13393","V21",""),
["V22" ]    = f(13394,"V22","mH"),
["V23" ]    = f("13395","V23",""),
["V23a"]    = f("13396","V23a",""),
["V24" ]    = f(13397,"V24","wD"),
["V25" ]    = f("13398","V25",""),
["V26" ]    = f(13399,"V26","aD"),
["V27" ]    = f("1339A","V27",""),
["V28" ]    = f("1339B","V28","H"),
["V28a"]    = f("1339C","V28a",""),
["V29" ]    = f("1339D","V29","wAH,sk"),
["V29a"]    = f("1339E","V29a","H"),
["V30" ]    = f("1339F","V30","nb"),
["V30a"]    = f("133A0","V30a","b"),
["V31" ]    = f("133A1","V31","k"),
["V31a"]    = f("133A2","V31a",""),
["V32" ]    = f("133A3","V32","msn"),
["V33" ]    = f("133A4","V33","sSr"),
["V33a"]    = f("133A5","V33a",""),
["V34" ]    = f("133A6","V34",""),
["V35" ]    = f("133A7","V35",""),
["V36" ]    = f("133A8","V36",""),
["V37" ]    = f("133A9","V37","idr"),
["V37a"]    = f("133AA","V37a",""),
["V38" ]    = f("133AB","V38",""),
["V39" ]    = f("133AC","V39",""),
["V40" ]    = f("133AD","V40",""),
["V40a"]    = f("133AE","V40a",""),
---
--  Series W Gardiner set
---

["W1"  ]  = f("133AF","W1",""),
["W2"  ]  = f("133B0","W1","bAs"),
["W3"  ]  = f("133B1","W3","Hb"),
["W3a" ]  = f("133B2","W3a","Hb"),
["W4"  ]  = f("133B3","W4",""),
["W5"  ]  = f("133B4","W5","Hb"),
["W6"  ]  = f("133B5","W6",""),
["W7"  ]  = f("133B6","W7",""),
["W8"  ]  = f("133B7","W8",""),
["W9"  ]  = f("133B8","W9","Xnm"),
["W9a" ]  = f("133B9","W9a",""),

["W10" ]  = f("133BA","W10","iab"),
["W10a"]  = f("133BB","W10a",""),

["W11" ]  = f("133BC","W11","g,nzt"),
["W12" ]  = f("133BD","W12",""),
["W13" ]  = f("133BE","W13",""),

["W14" ]  = f("133BF","W14","Hz"),
["W14a"]  = f("133C0","W14a",""),
["W15" ]  = f("133C1","W15",""),
["W16" ]  = f("133C2","W16",""),
["W17" ]  = f("133C3","W17","xnt"),
["W17a"]  = f("133C4","W17a",""),
["W18" ]  = f("133C5","W18",""),
["W18a"]  = f("133C6","W18a",""),

["W19" ]  = f("133C7","W19","mi"),
["W20" ]  = f("133C8","W20",""),
["W21" ]  = f("133C9","W21",""),
["W22" ]  = f("133CA","W22","Hnqt"),
["W23" ]  = f("133CB","W23",""),
["W24" ]  = f("133CC","W24","nw"),
["W24a"]  = f("133CD","W24a","nw"),
["W25" ]  = f("133CE","W25","ini"),

["X1"  ]    = f("133CF","X1","t"),
  ["X2"  ]    = f("133D0","X2",""),
  ["X3"  ]    = f("133D1","X3",""),
  ["X4"  ]    = f("133D2","X4",""),
  ["X4a" ]    = f("133D3","X4a",""),
  ["X4b" ]    = f("133D4","X4b",""),
  ["X5"  ]    = f("133D5","X5",""),
  ["X6"  ]    = f("133D6","X6",""),
  ["X6a" ]    = f("133D7","X6a",""),
  ["X7"  ]    = f("133D8","X7",""),
["X8"  ]    = f("133D9","rdi,di"),
  ["X8a" ]    = f("133DA","X8a",""),

["Y1"  ]    = f("133DB","Y1","mDAt"),
["Y1a" ]    = f("133DC","Y1a",""),
  ["Y2"  ]    = f("133DD","Y2",""),

["Y3"  ]    = f("133DE","mnhd,zS"),
  ["Y4"  ]    = f("133DF","Y4",""),
["Y5"  ]    = f("133E0","Y5","mn"),
["Y6"  ]    = f("133E1","Y6","ibA"),
  ["Y7"  ]    = f("133E2","Y7",""),
["Y8"  ]    = f("133E3","Y8","zSSt"),

  ["Z1"  ]    = f("133E4","Z1",""),
  ["Z2"  ]    = f("133E5","Z2",""),
  ["Z2a" ]    = f("133E6","Z2a",""),
  ["Z2b" ]    = f("133E7","Z2b",""),
["Z2c" ]    = f("133E8","Z2c",""),
["Z2d" ]    = f("133E9","Z2d",""),

  ["Z3"  ]    = f("133EA","Z3",""),
  ["Z3a" ]    = f("133EB","Z3a",""),
["Z3b" ]    = f("133EC","Z3b",""),
["Z4"  ]    = f("133ED","Z4","y"),
["Z5"  ]    = f("133EE","Z4a","y"),
  ["Z5"  ]    = f("133EF","Z5",""),
  ["Z5a" ]    = f("133F0","Z5a",""),
  ["Z6"  ]    = f("133F1","Z6",""),
["Z7"  ]    = f("133F2","Z7","W"),
  ["Z8"  ]    = f("133F3","Z8",""),
  ["Z9"  ]    = f("133F4","Z9",""),
  ["Z10" ]    = f("133F5","Z10",""),

["Z11" ]    = f("133F6","Z11","imi"),
  ["Z12" ]    = f("133F7","Z12",""),
  ["Z13" ]    = f("133F8","Z13",""),
  ["Z14" ]    = f("133F9","Z14",""),
  ["Z15" ]    = f("133FA","Z15",""),
  ["Z15a"]    = f("133FB","Z15a",""),
  ["Z15b"]    = f("133FC","Z15b",""),
  ["Z15c"]    = f("133FD","Z15c",""),
  ["Z15d"]    = f("133FE","Z15d",""),
  ["Z15e"]    = f("133FF","Z15e",""),
  ["Z15f"]    = f("13400","Z15f",""),
  ["Z15g"]    = f("13401","Z15g",""),
  ["Z15h"]    = f("13402","Z15h",""),
["Z15i"]    = f("13403","Z15i",""),
  ["Z16" ]    = f("13404","Z16",""),
  ["Z16a"]    = f("13405","Z16a",""),
  ["Z16b"]    = f("13406","Z16b",""),
  ["Z16c"]    = f("13407","Z16c",""),
  ["Z16d"]    = f("13408","Z16d",""),
  ["Z16e"]    = f("13409","Z16e",""),
  ["Z16f"]    = f("1340A","Z16f",""),
  ["Z16g"]  = f("1340B","Z16g",""),
  ["Z16h"]  = f("1340C","Z16h",""),
["Aa1" ]  = f("1340D","Aa1","x"),
    ["Aa2" ]    = f("1340E","Aa2","x"),
["Aa3" ]    = f("1340F","Aa3","x"),
["Aa4" ]    = f("13410","Aa4","x"),
["Aa5" ]    = f("13411","Aa5","Hp"),
["Aa6" ]    = f("13412","Aa6","x"),
["Aa7" ]    = f("13413","Aa7","x"),
["Aa7a"]    = f("13414","Aa7a","x"),
["Aa7b"]    = f("13415","Aa7b",""),
["Aa8" ]    = f("13416","Aa8","qn"),
["Aa9" ]    = f("13417","Aa9","x"),
["Aa10"]    = f("13418","Aa10","x"),
["Aa11"]    = f("13419","A11","mAa"),
["Aa12"]    = f("1341A","Aa12",""),
["Aa13"]    = f("1341B","Aa13","im,gs,M"),
["Aa14"]    = f("1341C","Aa14",""),
["Aa15"]    = f("1341D","Aa15",""),
["Aa16"]    = f("1341E","Aa16",""),
["Aa17"]    = f("1341F","Aa17","sA"),
["Aa18"]    = f("13420","Aa18",""),
["Aa19"]    = f("13421","Aa19",""),
["Aa20"]    = f("13422","Aa20","apr"),
["Aa21"]    = f("13423","Aa21","wDa"),
["Aa22"]    = f("13424","Aa22",""),
["Aa23"]    = f("13425","Aa23",""),
["Aa24"]    = f("13426","Aa24",""),
["Aa25"]    = f("13427","Aa25",""),
["Aa26"]    = f("13428","Aa26",""),
["Aa27"]    = f("13429","Aa27","nD"),
["Aa28"]    = f("1342A","Aa28","qd"),
["Aa29"]    = f("1342B","Aa29",""),
      ["Aa30"]    = f("1342C","Aa30","Xkr"),
["Aa31"]    = f("1342D","Aa31",""),
["Aa32"]    = f("1342E","Aa32","")
}

-- Gardiner categories
-- we store in a table for convenience

local cat = {}

cat["A"]   =   {[[A1-A2-A3-A4-A5-A5a-A6-A6a-A6b-A7-A8-
                 A9-A10-A11-A12-A13-A14-A14a-A15-A16-
                 A17-A17a-A18-A19-A20-A21-A22-A23-A24-
                 A25-A26-A27-A28-A29-A30-A31-A32-A32a-
                 A33-A34-A35-A36-A37-A38-A39-A40-A40a-
                 A41-A42-A42a-A43-A43a-A44-A45-A45a-A46-
                 A47-A49-A50-A51-A52-A53-A54-A55-A56-
                 A57-A58-A59-A60-A61-A62-A63-A64-A65-
                 A66-A67-A68-A69-A70!]],
                 heading = "Man and his occupations"}

cat["B"]   =   {[[B1-B2-B3-B4-B5-B5a-B6-B7-B8!]],
                 heading = "Woman and her occupations"}

cat["C"]   =   {[[C1-C2-C2a-C2b-C2c-C3-C4-C5-C6-C7-C8-C9-
                 C10-C10a
                 C11-C12-C13-C14-C15-C16 C17-C18-C19-C20-
                 C21-C22  C23 - C24!]],
                 heading = "Anthropomorphic Deities"}

cat["D"]   =   {[[D1-D2-D3-D4 D5 D6 D7-D8-D9-D10-D11-D12-
                 D13-D14-D15-D16-D17-D18-D19-D20-D21-D22-
                 D23-D24-D25-D26-D27-D28-D29-D30-D31-D31a-
                 D32-D33-D34-D35-D36-D37-D38-D39-D40-D41-
                 D42-D43-D44-D45-D46-D47-D48-D49-D50-D50a-
                 D50b-D50c-D50d-D50e-D50f-D50g-D50h-D50i-
                 D51-D52-D53-D54-D55-D56-D57-D58-D59-D60-
                 D61-D62-D63-D64-D65-D66-D67-D67a-D67b-D67c-
                 D67d-D67e-D67f-D67g-D67h!]],
                 heading = "parts of the human body parts"}

cat["E"]   =   {[[E1-E2-E3-E4-E5-E6-E7-E8-E8a-E9-E9a-E10-
                 E11-E12-E13-E14-E15-E16-E16a-E17-E17a-
                 E18-E19-E20-E20a-E22-E23-E24-E25-E26-
                 E27-E28-E28a-E29-E30-E31-E32-E33-E34-
                 E34a-E35-E36-E37-E38!]],
                 heading = "Mammals"}

cat["F"]   =   {[[F1-F2-F3-F4-F5-F6-F7-F8-F9-F10-F11-F12-
                  F13-F14-F15-F16-F17-F18-F19-F20-F21-F21a-
                  F22-F23-F24-F25-F25-F26-F27-F28-F29-F30-
                  F31-F31a-F32-F33-F34-F35-F36-F37-F37a-F38-
                  F38a-F39-F40-F41-F42-F43-F44-F45-F45a-F46-
                  F46a-F47-F47a-F48-F49-F50-F51-F51a-F51b-
                  F51c-F52-F53!]],
                  heading = "Parts of Mammals"}

cat["G"]  =   {[[G1-G2-G3-G4-G5-G6-G6a-G7-G7a-G8-G9-G10-
                 G11-G11a-G12-G13-G14-G15-G16-G17-G18-
                 G19-G20-G20a-G21-G22-G23-G24-G25-G26-
                 G26a-G27-G28-G29-G30-G31-G32-G33-G34-
                 G35-G36-G36a-G37-G37a-G38-G39-G40-G42-
                 G43-G43a-G44-G45-G45a-G46-G47-G48-G49-
                 G50-G51-G52-G53-G54!]],
                 heading = "Birds"}

cat["H"]   =   {"H1-H2-H3-H4-H5-H6-H6!",
                   heading = "Parts of Birds"}

cat["I"]   =   {[[I1-I2-I3-I4-I5-I5a-I6-I7-I8-I9-
                   I9a-I10-I10a-I11-I12-I13-I14-I15]],
                   heading = "Amphibious Animals, Reptiles etc."}

cat["K"]   =   {"K1-K2-K3-K4-K5-K6-K7-K8",
                   heading = "Fish and parts of fish"}

cat["L"]   =   {"L1-L2-L2a-L3-L4-L5-L6-L6a-L7-L8",
                   heading = "Invertrbrates and lesser animals"}

cat["M"]   =   {[[M1-M1a-M1b-M2-M3-M3a-M4-M5-M6-M7-M8-
                 M9-M10-M10a-M11-M12-M12a-M12b-M12c-
                 M12d-M12e-M12f-M12g-M12h-M13-M14-M15-
                 M15a-M16-M16a-M17-M18-M19-M20-M21-M22-
                 M22a-M23-M24-M25-M26-M27-M28-M29-M30-
                 M31-M32-M33-M34-M35-M36-M37-M38-M39-
                 M40-M41-M42-M43-M44!]],
                 heading = "Trees and plants"}

cat["N"] =     {[[N1-N2-N3-N4-N5-N6-N7-N8-N9-N10-N11-N12-
                 N13-N14-N15-N16-N17-N18-N18a-N18b-N19-
    N20-N21-N22-N23-N24-N25-N26-N27-N28-N29-
                 N30-N31-N32-N33-N34-N34a-N35-N36-N37-N38-
                 N39-N40-N41-N42!]],
                 heading = "Sky, earth, water"}

cat["O"] =    {[[O1-O1a-O2-O3-O4-O5-O6-O6a-O6b-O6c-O6d-O6e-
                  O6f-O7-O8-O9-O10-O10a-O10b-O10c-O11-O12-
                  O13-O14-O15-O16-O17-O18-O19-O19a-O20-O20a-
                  O21-O22-O23-O24-O24a-O25-O25a-O26-O27-O28-
                  O29-O29a-O30-O30a-O31-O32-O33-O34-O35-O36-
                  O36a-O36b-O36c-O36d-O37-O38-O39-O40-O41-
                  O42-O43-O44-O45-O46-O47-O48-O49-O50-O50a-
                  O50b-O51-O51!]],
                  heading = "Buildings, parts of buildings"}

cat["P"]   =   {"P1-P1a-P2-P3-P3a-P4-P5-P6-P7-P8-P9-P10-P11",
                heading = "Ships and parts of ships"}

cat["Q"]   =   {"Q1-Q2-Q3-Q4-Q5-Q6-Q7!",
                heading = "Domestic and funerary furniture"}

cat["R"]  =   {[[R1-R2-R2a-R3-R3a-R3b-R4-R5-R6-R7-R8-R9-
                  R10-R11-R12-R13-R14-R15-R16-R16a-R17-
                  R18-R19-R20-R21-R22-R23-R24-R25-R26-R27-
                  R28-R29]],
                  heading = "Temple furniture and sacred emblems"}

cat["S"]   =   {[[S1-S2-S2a-S3-S4-S5-S6-S6a-S7-S8-S9-
                 S10-S11-S12-S13-S14-S14a-S14b-S15-
                 S16-S17-S17a-S18-S19-S20-S21-S22-
                 S23-S24-S25-S26-S26a-S26b-S27-S28-
                 S29-S30-S31-S32-S33-S34-S35-S35a-S36-
                 S37-S38-S39-S40-S41-S42-S43-S44-S45-S46]],
                heading = "Crowns, dress, staves."}

cat["T"]   =   {[[T1-T2-T3-T3a-T4-T5-T6-T7-T8-T8a-T9-
                 T10-T11-T11a-T12-T13-T14-T15-T16-T16a-
                 T17-T18-T19-T20-T21-T22-T23-T24-T25-
                 T26-T27-T28-T29-T30-T31-T32-T32a-T33-
                 T33a-T34!]],
heading    =     "Warfare, hunting, butchery"}

cat["U"]   =    {[[U1-U2-U3-U4-U5-U6-U6a-U7-U8-U9-U10-
                  U11-U12-U13-U14-U15-U16-U17-U18-U19-
                  U20-U21-U22-U23-U24-U25-U26-U27-U28-
                  U29-U29a-U30-U31-U32-U32a-U33-U34-
                  U35-U36-U37-U38-U39-U40-U41-U42!]],
                  heading = "Agriculture, crafts and Professions"}

cat["V"]   =    {[[V1-V1a-V1b-V1c-V1d-V1e-V1f-V1g-V1h-V1i-
                  V2-V2a-V3-V4-V5-V6-V7-V7a-V7b-V8-V9-
                  V10-V11-V11a-V11b-V11c-V12-V12a-V12b-
                  V13-V14-V15-V16-V17-V18-V19-V20-V20a-
                  V20b-V20c-V20d-V20e-V20f-V20g-V20h-V20i-
                  V20k-V20l-V21-V22-V23-V24-V25-V26-V27-
                  V28-V28a-V29-V29a-V30-V31-V32-V33-V34-
                  V35-V36-V37-V38-V39-V40-V40a!]],
                  heading = "Rope, fiber, baskets, bags"}

cat["X"]   =    {[[X1-X2-X3-X4-X4a-X4b-X5-X6-X6a-X7-X8-X8a!]],
                   heading = "Loaves and cakes"}

cat["W"]   =     {[[W1-W2-W3-W4-W5-W6-W7-W8-W9-W9a-
                    W10-W10a-W11-W12-W13-W14-W14a-
                    W15-W16-W17-W17a-W18-W18a-W19-
                    W20-W21-W22-W23-W24-W24a-W25!]],
                    heading = "Vessels of stone and earthenware"}

cat["Y"]   =     {"Y1-Y1a-Y2-Y3-Y4-Y5-Y6-Y7!",
                   heading = "Writing, games, music"}

cat["Z"]   =     {[[Z1-Z2-Z2a-Z2b-Z3-Z4-Z5-Z5a-Z6-Z7-Z8-Z9-
                    Z10-Z11-Z12-Z13-Z14-Z15-Z15a-Z15b-Z15c-
                    Z15d-Z15e-Z15f-Z15g-Z15h-Z15i-Z16-Z16a-
                    Z16b-Z16c-Z16d-Z16f-Z16g-Z16h!]],
                    heading = [[Strokes, signs derived from
                           hieratic, geometrical figures]],
                    label = "cat:z"}

cat["Aa"]  =     {[[Aa1-Aa2-Aa3-Aa4-Aa5-Aa6-Aa7-Aa7a-Aa8-Aa9-
Aa10-Aa11-Aa12-Aa13-Aa14-Aa15-Aa16-Aa17-
Aa18-Aa19-Aa20-Aa21-Aa22-Aa23-Aa24-Aa25-
Aa26-Aa27-Aa28-Aa29-Aa30-Aa31-Aa32!]],
                   heading = "Unclassified"}

function cleanstring (s)
  s = string.gsub(s,"-", " ")
  s = string.gsub(s,"%t", " ") -- remove tabs?
  return string.gsub(s, "%s+", "-")
end

-- enable hyphenation of the input string
--
local function printstring (s)
  --s = string.gsub(s,"-", " ")
  return string.gsub(s, "-", "\\hskip1sp-\\hskip1sp")
end

local function flushbuffer(a)
   if a~=nil then tex.print(a) end
   return ""
end

-- add the glyphs together
--
local function addtobuffer(str,bf)
    return bf..str
end

local function addtobottom(str)

end

local function placenext(str)

end

local function exclamationmark(str)

end

--[[
This is the main parser.
@str = string formatted as per MoC
@opt =
The parsing occurs in two modes. Under normal mode
it parses strings and collects them in a buffer. If an
end of symbol is found, it flushes the buffer.

In the second mode it stacks the symbols.
--]]

local numberglyphs=0

local function parseMdC (str, opt)

  local options = opt or {style=nil,
                    switch=nil,
                    echo=true,
                    strings=true,
                    heading="Man"}
  --if options.echo == true then
        -- tex.print("{\\ttfamily "..printstring(str).." --}") end

  if options.heading == nil then options.heading="" end
  if options.style=="block" then
     tex.print("\\par "..options.heading.."\\par ")
  end

  local buff = ""
  local bufftop = ""
  local buffbottom
  str = cleanstring(str)
  local counttop = 1
  local countbottom = 1
  local stackon = false
  local staron = false

-- parsing loop
  local i = 0
  while i < #str do
    local c = string.sub(str,i,i)
    i = i + 1
    if c=="-" then
       if type(t[buff].theglyph~=nil) then
         tex.print(t[buff].fullblock)
       end
       buff =""
     elseif c == "!" then
       tex.print(t[buff].fullblock,"\\par")
     elseif c=="*" then -- just signs next to each other
       staron = true
       -- if star is completed in means previous symbol
       -- is completed stack next to each other
     elseif c==":" then
         stackon = true
         c="-" --ignore for the time being flush buffer
   --buff = flushbuffer(t[buff].fullblock)
     else
       if type(t[buff]~=nil) then
            buff = addtobuffer(c,buff)
       else
            buff = buff..c
       end
  end
    -- end of line
  end

  numberglyphs = numberglyphs+i

end

-- tex.print(" ","Number of Glyphs",numberglyphs)

local printgardiner = function (t,options)
   local ts = {} -- table to hold the cat keys
   local tmp = {}
   local hcmd = ""
   local str = ''
   for k,v in pairs (cat) do
      table.insert(ts,k)
   end
   table.sort(ts)

   for k,v in pairs (ts) do
      tmp = cat[ts[k]]
      if (options.headings and tmp.heading) then
          hcmd = "\\"..options.headings --TODO improve on interface
          tex.print(hcmd.." {"..tmp.heading.."}")
      end
      if tmp.label then tex.print("\\label{"..tmp.label.."}") end
      tex.print("\\par\\noindent",parseMdC(tmp[1],options))
   end
end

-- prints a single list from gardiner's series
local printgardinercat = function (series)
      local tmp = cat[series]
      return tex.print(parseMdC(tmp[1], options))
end
return {printhierochar = printhierochar,
        printgardiner  = printgardiner,
        printgardinercat   = printgardinercat,
        parseMdC = parseMdC}


