\documentclass{article}

\begin{filecontents}{cayley.sty}
\NeedsTeXFormat{LaTeX2e}[2017/04/15]%
\ProvidesFile{phd-quote}[2017/04/15 v1.0 quotation management (YL)]%
\RequirePackage{amsmath,amssymb,graphicx}


\DeclareMathSymbol{A}{\mathalpha}{operators}{`A}
\DeclareMathSymbol{B}{\mathalpha}{operators}{`B}
\DeclareMathSymbol{C}{\mathalpha}{operators}{`C}
\DeclareMathSymbol{D}{\mathalpha}{operators}{`D}
\DeclareMathSymbol{E}{\mathalpha}{operators}{`E}
\DeclareMathSymbol{F}{\mathalpha}{operators}{`F}
\DeclareMathSymbol{G}{\mathalpha}{operators}{`G}
\DeclareMathSymbol{H}{\mathalpha}{operators}{`H}
\DeclareMathSymbol{I}{\mathalpha}{operators}{`I}
\DeclareMathSymbol{J}{\mathalpha}{operators}{`J}
\DeclareMathSymbol{K}{\mathalpha}{operators}{`K}
\DeclareMathSymbol{L}{\mathalpha}{operators}{`L}
\DeclareMathSymbol{M}{\mathalpha}{operators}{`M}
\DeclareMathSymbol{N}{\mathalpha}{operators}{`N}
\DeclareMathSymbol{O}{\mathalpha}{operators}{`O}
\DeclareMathSymbol{P}{\mathalpha}{operators}{`P}
\DeclareMathSymbol{Q}{\mathalpha}{operators}{`Q}
\DeclareMathSymbol{R}{\mathalpha}{operators}{`R}
\DeclareMathSymbol{S}{\mathalpha}{operators}{`S}
\DeclareMathSymbol{T}{\mathalpha}{operators}{`T}
\DeclareMathSymbol{U}{\mathalpha}{operators}{`U}
\DeclareMathSymbol{V}{\mathalpha}{operators}{`V}
\DeclareMathSymbol{W}{\mathalpha}{operators}{`W}
\DeclareMathSymbol{X}{\mathalpha}{operators}{`X}
\DeclareMathSymbol{Y}{\mathalpha}{operators}{`Y}
\DeclareMathSymbol{Z}{\mathalpha}{operators}{`Z}


\newsavebox{\cayleybox}
\newlength{\cayleyheight}
\newenvironment{cayleymatrix}[1]
 {\begin{lrbox}{\cayleybox}
  $\begin{array}{@{\enspace}l*{\numexpr#1-1}{@{{,}\enspace}l}@{\enspace}}}
 {\end{array}$\end{lrbox}%
  \setlength{\cayleyheight}{\dimexpr\ht\cayleybox+\dp\cayleybox}%
  \kern-0.8pt
  \vtop to \cayleyheight{\hbox{\vphantom{$\between$}}\leaders\vrule\vfill}%
  \raisebox{\dimexpr\ht\strutbox-\ht\cayleybox}{\usebox\cayleybox}%
  \vtop to \cayleyheight{\hbox{\vphantom{$\between$}}\leaders\vrule\vfill}%
  \kern-0.8pt
 }
\providecommand{\by}{\kern-0.4pt{\between}\kern-0.4pt}

\thinmuskip=6mu
\medmuskip=0mu
\thickmuskip=0mu
\end{filecontents}
\usepackage{cayley}


\begin{document}

\[ % page 17
(X,Y,Z)=
(\begin{cayleymatrix}{3}
a   & b   & c \\
a'  & b'  & c' \\
a'' & b'' & c''
\end{cayleymatrix}
\by x,y,z)
\]

\[ % page 32
(\begin{cayleymatrix}{2} a & c \\ b & d \end{cayleymatrix} \by
\begin{cayleymatrix}{2} a & b \\ c & d \end{cayleymatrix} \by
\begin{cayleymatrix}{2} a & c \\ b & d \end{cayleymatrix} \by
\begin{cayleymatrix}{2} a & b \\ c & d \end{cayleymatrix} )
=
\bigl(
  (\begin{cayleymatrix}{2} a & c \\ b & d \end{cayleymatrix}\by
  \begin{cayleymatrix}{2} a & b \\ c & d \end{cayleymatrix})
\bigr)^2
\]

$M^2$

(\begin{cayleymatrix}{3}
a&b\\
c&d\\
e&f
\end{cayleymatrix})

\[
(\begin{cayleymatrix}{3}
a&b&c\\
a' &b' & c'\\
a''&b'' & c''\\
a''' & b''' & c'''\\
\end{cayleymatrix}) +
(\begin{cayleymatrix}{3}
\alpha & \beta & \gamma\\
\alpha & \beta & \gamma\\
\alpha & \beta & \gamma\\
\end{cayleymatrix})\:\: = \:\:
(\begin{cayleymatrix}{3}
a+a  &b+b  &c+\gamma\\
a''+\alpha' & b'' + \beta'' & c'' +\gamma'' \\
a'''+\alpha''' & b''' + \beta''' & c''' +\gamma''' \\
\end{cayleymatrix})
\]

\begin{gather}
(\begin{cayleymatrix}{3}
a  &b &c\\
a' &b' &c'\\
a'' &b'' &c''
\end{cayleymatrix}\between \begin{cayleymatrix}{3}
\alpha & \beta & \gamma\\
\alpha'' & \beta'' & \gamma''\\
\alpha'' & \beta'' & \gamma''\\
\end{cayleymatrix})
=
(\begin{cayleymatrix}{3} \bigl(a,b,c\between a, a',a''\bigr) & (a,b,c\between (\beta, \beta', \beta'') & (a,b,c\between \gamma, \gamma', \gamma'')\\
(a &b &c\\
(a &b &c
\end{cayleymatrix})
\end{gather}








\begin{multline}
(\begin{cayleymatrix}{3}
a  &b &c\\
a' &b' &c'\\
a'' &b'' &c''
\end{cayleymatrix}\between \begin{cayleymatrix}{3}
\alpha & \beta & \gamma\\
\alpha'' & \beta'' & \gamma''\\
\alpha'' & \beta'' & \gamma''\\
\end{cayleymatrix})
=
\\ (\begin{cayleymatrix}{3} \bigl(a,b,c\between a, a',a''\bigr) & (a,b,c\between (\beta, \beta', \beta'') & (a,b,c\between \gamma, \gamma', \gamma'')\\
(a &b &c\\
(a &b &c
\end{cayleymatrix})\label{caleyprod}
\end{multline}






\end{document}